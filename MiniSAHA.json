[
    {
        "id": "a380efb730bea147",
        "type": "tab",
        "label": "StateMachine",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "1e372cb3d08d9182",
        "type": "tab",
        "label": "UI_Home",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "5c14e0941d341b42",
        "type": "tab",
        "label": "UI_Instellingen",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "af31bf2fe058f803",
        "type": "tab",
        "label": "UI_About",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "eb60a9ea21d42f29",
        "type": "tab",
        "label": "System",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ce724907bfebf75c",
        "type": "tab",
        "label": "Bluetooth speaker",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "bf57a768b975c2e6",
        "type": "tab",
        "label": "Meldingsgeluiden",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "091a23c860c18c2f",
        "type": "tab",
        "label": "Spryng Voice",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "7a37030e3e3276d9",
        "type": "subflow",
        "name": "CheckIsAtHome",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 360,
                "wires": [
                    {
                        "id": "e0fbb4a9fd0354d0"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1040,
                "y": 60,
                "wires": [
                    {
                        "id": "9aa4521d2bf238c3",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1080,
                "y": 120,
                "wires": [
                    {
                        "id": "9aa4521d2bf238c3",
                        "port": 1
                    }
                ]
            },
            {
                "x": 1070,
                "y": 540,
                "wires": [
                    {
                        "id": "85ce8a28740483a4",
                        "port": 2
                    }
                ]
            },
            {
                "x": 430,
                "y": 300,
                "wires": [
                    {
                        "id": "e0fbb4a9fd0354d0",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "inputLabels": [
            "Create CheckAlive script"
        ],
        "outputLabels": [
            "IsAtHome",
            "SuccededPingCount",
            "Result start script",
            "Debug"
        ],
        "status": {
            "x": 1040,
            "y": 180,
            "wires": [
                {
                    "id": "9aa4521d2bf238c3",
                    "port": 2
                }
            ]
        }
    },
    {
        "id": "cf9fd0d5cf32c35e",
        "type": "subflow",
        "name": "Contact",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 40,
                "wires": [
                    {
                        "id": "e197533c3333ac14"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 820,
                "y": 60,
                "wires": [
                    {
                        "id": "b882356f986124aa",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ui_group",
                "type": "str",
                "value": "Main/Inputs"
            }
        ],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "6bde74f61fffc171",
        "type": "group",
        "z": "eb60a9ea21d42f29",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "9c9d4e18a631cc15",
            "6ccc00486baecf9d",
            "ebd1eb7739312b3d",
            "1029c725dc625feb",
            "849129e5cd170f06",
            "30a234133bcbd597",
            "fa66a05f8c746a83",
            "b0067e5db1bb638b",
            "3758cdea9d5d1d01",
            "61806882e2c16761",
            "728339c56b6087ec",
            "6ddc11d490af5fe8",
            "bab0e09190007a04",
            "d4aeaeaaba846f61"
        ],
        "x": 14,
        "y": 919,
        "w": 992,
        "h": 322
    },
    {
        "id": "289d8e4b5f966496",
        "type": "group",
        "z": "eb60a9ea21d42f29",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "5624329dd5cb5b0a",
            "ac6f3d5c09bce733",
            "29faaa6a019e0e9b",
            "6f0b74ba5a27cc3e",
            "2c5db89378881214",
            "97382ae72dc98a86",
            "2d76e161b54a56ff",
            "8d171fe450c7a81f",
            "148566cf72b33e1a",
            "98ddd266a3e4c998",
            "bce54c96101eb7b7",
            "db6b4ac55c770429",
            "aefcaf0124832705",
            "59d5c77dc1dc2a60",
            "ca12465c285a07be",
            "6cdb9cd1a55cd9dd",
            "5fe7d4a09964b635",
            "82ea9c0c0b1c8052",
            "233943e79ec596cb",
            "e3e7c591d92d8d6d",
            "b6d0686a4823c0c2",
            "7b981f6f76e5f9f4",
            "86822077eb192361",
            "b214b552d64a9c10",
            "e21cc1583323afc0",
            "d17ee11b0c0d7512",
            "68b99b881506f9ef",
            "0267af7c7471c4a5",
            "c60a13f83d3ae000",
            "eb861dab.4d428",
            "1ebd5fe3.2c7e8",
            "20a7391c.421bd6",
            "1b9704b98c8415b8",
            "bd83f7d9ca61f8a5",
            "318cd6b22f5d427b",
            "219feef2e9854abf",
            "7bd46b965253598e",
            "2e00e63124f1b99e",
            "67a6274754d23126"
        ],
        "x": 34,
        "y": 11.5,
        "w": 912,
        "h": 869.5
    },
    {
        "id": "d344da1eff713941",
        "type": "group",
        "z": "eb60a9ea21d42f29",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "9efaa0c2fd872693",
            "6d496dbb394b2888",
            "f1ad8f74c46f6314",
            "c8412ad60f0dd6e1",
            "ee5730149418dfeb",
            "7ea37518e7e677d7",
            "cf1713ef3eb3df85"
        ],
        "x": 34,
        "y": 1431.5,
        "w": 632,
        "h": 217
    },
    {
        "id": "4e4ef64c30555769",
        "type": "group",
        "z": "a380efb730bea147",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "86a3b683d730904f",
            "dc25463a90653c93",
            "2fe001daedc674d9",
            "f80c926aa5f4b4e1",
            "94fd03500445951f",
            "04335944abb7d75d",
            "0aaa14729a8e7b05",
            "72150be82696bdfc",
            "e95199098a8ec21d",
            "98a637c918e7ffb3",
            "93e66aed5528479a",
            "391e6a39648d43b8",
            "cd2ccbcdab9e2474",
            "a60b56107555d543",
            "8a2726e6b9fa9a91",
            "e43aa1add6eab915"
        ],
        "x": 14,
        "y": 19,
        "w": 892,
        "h": 502
    },
    {
        "id": "2ce41e3897fb35ce",
        "type": "group",
        "z": "a380efb730bea147",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "6c1f652de628f1be",
            "32e7240df75d8f3a",
            "070af656b33c1a19",
            "0d0b3ee379dc41b0",
            "7e9bbcf4c96e333a",
            "97cd5aa2eb055baf",
            "f66c2ba033e71dfe",
            "df1878820d0f62c5",
            "7406ab9d8567cc25",
            "c9f88ef493593187",
            "f07ba5eecb0df09e",
            "8322868abe70e928",
            "cf1901877bfe59a8",
            "4f39baa7dbd5d547",
            "1cbae632c31ff2b0",
            "da8fec47862aa2f5",
            "cfa6b22427e3edc3",
            "0362a76e4f7b1fd0",
            "d5df2f8a93d16c6a",
            "494c0e1626e74b03",
            "6e3e1642880f5295",
            "9a6d5159979437b8",
            "a9d22c1ccafb666e",
            "694ce244e4cd603f",
            "dc5cb52b6bdb4970",
            "7f979e43785719b9",
            "89da109317470d4e",
            "d4de81b1883bcb34",
            "d366c9dd647f1882",
            "c0678892a8aa9532",
            "a7f43ddc989df43f",
            "7139bcd155107a18",
            "b7c8e30189b3e92e",
            "56b665cac3641749",
            "6c5103174cc9310f",
            "b7b67d2a822e82d9",
            "500d244d6438e211",
            "6c19355dfbaa9427",
            "99a1a62d240c5007",
            "817a65e37e67edcc",
            "7df2d7d7906671f7"
        ],
        "x": 14,
        "y": 539,
        "w": 1092,
        "h": 1022
    },
    {
        "id": "bb314d79eca0c3fd",
        "type": "group",
        "z": "1e372cb3d08d9182",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "b81cb7c076621c31",
            "6ce9c1c05a07f0e4",
            "7d9adb1d8b871f0c",
            "bf9647efa558a7d3",
            "f84bc5be2fce9d39",
            "4b53939b9023b8c0",
            "074f5b05354c5090",
            "f85ce69846f65989",
            "848574e93a41e0cc",
            "45c53f307e13019e"
        ],
        "x": 14,
        "y": 799,
        "w": 812,
        "h": 322
    },
    {
        "id": "4a425ad2d30f78bc",
        "type": "group",
        "z": "1e372cb3d08d9182",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "86d57ce8cd9b65da",
            "753a239026080219",
            "99b664e80a1908c6",
            "3be586184e50e4ea",
            "dd466b9403f2d8f4",
            "75841af45dc440b7",
            "55d46207a0c02be9",
            "5f66bb58047a17de",
            "6f050edd963ed167",
            "e9fa22955a89da80",
            "a5f6fedc4ec48281",
            "55706aed47335f02",
            "4c44736709d21bb0",
            "1c70b188ec53d6ab",
            "f720e78159430790",
            "131f564f42824545",
            "b2ce6b3ac89473bf",
            "d14d455208d7b126",
            "d283ae10f4012c17",
            "16395cfced8c47cb",
            "00e6d8a574603f71",
            "f31d4676aacdfc8e",
            "b2edd67c1976f042",
            "8a224d6b4c8e6e53",
            "6c02930ddcad9dd8",
            "0436958281830a8e",
            "d6b298f8ec85d61c",
            "389045590526c181",
            "87cce92b163a7192",
            "d98e03253a9f5ca9"
        ],
        "x": 14,
        "y": 19,
        "w": 992,
        "h": 762
    },
    {
        "id": "5bb2b589a301c7c8",
        "type": "group",
        "z": "af31bf2fe058f803",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "5a792b79ee924fcc",
            "efef419a3cac5a8b",
            "226a8c5bfb54aa32",
            "38a6029999573c13",
            "7640224f513f74de",
            "60d1d31d381e01eb",
            "e677c617d3a5d29d",
            "940e764301d9d266",
            "6f445b4448b59170",
            "95ed60f262f1803c",
            "6c2c688ef0fa2f63",
            "44f8e182ea2d2fc3",
            "5f841997def03bad",
            "2632771a765ce800",
            "e91938bbca103b42",
            "8341310a2e59ed53",
            "1ad8ae65c31d2570",
            "da7b21ec87871d8c",
            "4d1dba90ae296567",
            "a1659a56c324e2cc",
            "d706900fa126e361",
            "3a750c7cbf887af3",
            "303fedb30576538b",
            "6a267aeb779eac08",
            "dff2dbca89ccfc06"
        ],
        "x": 14,
        "y": 339,
        "w": 792,
        "h": 622
    },
    {
        "id": "04fd012f1107245e",
        "type": "group",
        "z": "ce724907bfebf75c",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "6ab57893a1727021",
            "d3ac11cb5dc0efbc",
            "d611838783d29255",
            "4d4f78505bcbf29e",
            "6c320f8b9fa94d70",
            "f5960bb1164b1dbb",
            "e265ce7aeafc81cf",
            "a382f332dd3ab477",
            "20aee768ba9e2512",
            "17b078a9c4215d63",
            "c8459650666a969b",
            "b6db4fba6aab59b3",
            "ad04926aacf33a5d",
            "25b2f4f138e92a11",
            "9a9cc08da2b8ef61",
            "d1c5073f0e9b7976",
            "6054eae0fe0bbb10",
            "c9aa4babb452e660",
            "c86740ad60f14028",
            "c4556470956a2dd7",
            "988de3a578461499",
            "70b734ee6121d475",
            "dc7a07b385d309ec",
            "620e6a6d64aff30d",
            "3edb32cf296b125f",
            "1314c5376597aa78",
            "a9b3d569ef1ff64c",
            "c307ebad62357506",
            "823df58d3952d919",
            "7802f2270c5b2598",
            "57fcf6eca0a141e9",
            "83cf6cdbc048f7cf",
            "5376b97a3fa53370",
            "aed77f9bf843f122",
            "5cb2e01e6334af76",
            "4e02e2bd20959e39"
        ],
        "x": 34,
        "y": 819,
        "w": 1092,
        "h": 702
    },
    {
        "id": "b653e740e9531504",
        "type": "group",
        "z": "ce724907bfebf75c",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "0af8df52052ef366",
            "a6248e8d64acb74f",
            "43862d3b661a9960",
            "070ce4d9b1f1776d",
            "f5c783e435202cc2",
            "e110dd782e4ed389",
            "c4bdb95a0f7c3226",
            "36e8febe859fd540",
            "04ad4a712d3067e5",
            "480d9f15b0563c9c",
            "7463d453bcf5cff1",
            "df6e998b6d564fcf",
            "f1aeced22e9fa07f",
            "a1e2f6d090e5529d",
            "fd7a048b60fd40cc",
            "7f1c6a83901d3d23",
            "944d64652bbfdc85",
            "95623e89ea0e68bb",
            "fb880435a67662bc",
            "7a71a22caf5630aa",
            "f95485da6f7079a3"
        ],
        "x": 14,
        "y": 19,
        "w": 1052,
        "h": 602
    },
    {
        "id": "f37a603ed66fd806",
        "type": "group",
        "z": "af31bf2fe058f803",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "eb3b563a66c69093",
            "template1",
            "b66ec02ddb299fb9",
            "8ce06555f0c049ea",
            "8d1f7a72eda8b85e",
            "89c7af3d87bd6dfe",
            "1eec94c61974cd1c",
            "b6944b93af04a874",
            "b4cb292e1a70622c"
        ],
        "x": 14,
        "y": 59,
        "w": 752,
        "h": 242
    },
    {
        "id": "e2e84e52f82b08ea",
        "type": "group",
        "z": "ce724907bfebf75c",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "861d995a8063ca2d",
            "43f0b3674c4fcca2",
            "a3da71f32673dfd7",
            "e68d3d081a706fa9"
        ],
        "x": 14,
        "y": 659,
        "w": 652,
        "h": 122
    },
    {
        "id": "3856d925f2c69025",
        "type": "group",
        "z": "bf57a768b975c2e6",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "de3f35eb8cc6cc74",
            "50dd2fd4a701d53d",
            "fb00403833140d8b",
            "7d08a46ad06a9fe9",
            "0d7df80c86a6453d",
            "098f8c595d14aaa5",
            "121eeb47240d2a87",
            "3410874898204686",
            "48db1c2e18f88696",
            "034d3d2d8b8a62ca",
            "e438e1a719031b77",
            "2b8910900d4bbdc5",
            "8c04f7e36a9c4acb",
            "292f906d0611558c",
            "2e14724e3c3ae983",
            "0a60a836b38547df",
            "f071260bdcdcd056",
            "ad3cf096050d54e2",
            "3fe4ddc223bcbaeb",
            "4653356d90a8a897",
            "27336a80e583f921",
            "e1471d5c735bd6d3",
            "d722b84b332a8bb8",
            "7cb194b63eb56afd",
            "ced962bd1c4d22bc",
            "98511df3af0e7143",
            "795954223e100ba0",
            "cd17b3773f335e9b",
            "730dfdd54514ae4a",
            "d0e532abff31a2ad",
            "1087b0d71356eb46",
            "88e932f430c769c9",
            "5a41d7518d03c12d",
            "31476e27da90a60b"
        ],
        "x": 34,
        "y": 19,
        "w": 1072,
        "h": 582
    },
    {
        "id": "e9121fbc4482804f",
        "type": "group",
        "z": "bf57a768b975c2e6",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "ac3df9612f272925",
            "d886cc1affb2bca7",
            "411d40273f5f425f",
            "4991f7f568969713",
            "776ed147123b92b8",
            "c2ddecb04917163d",
            "6d21e3f54526cbb1",
            "a0f17d909e19d179",
            "2912eea2927befa7",
            "1ee1bd387c952be2",
            "217d3c58acae81bd",
            "0375a3cf9551c911",
            "709c2edf3d4f3eb2",
            "9f3dd4c4d056882c",
            "d68aa0b732adcd5c"
        ],
        "x": 34,
        "y": 1071.5,
        "w": 932,
        "h": 309.5
    },
    {
        "id": "852f70d81ad10832",
        "type": "group",
        "z": "bf57a768b975c2e6",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "4a80936a1117d160",
            "a6ad4310a571b04f",
            "ff4b91c6f803a3cb",
            "2f60b40d268db108",
            "ec36fc960434517b",
            "7b381f39c3109c7b",
            "4ce40f669f564d3c",
            "e8dcf9dab51432cf",
            "19674a84640dbeb7",
            "34a8c9383eec9020",
            "c7a079d11845588a",
            "9f7d3fb78648fc41",
            "8fbf837b995b0dd9",
            "c0ef744af7819d7c",
            "c0dfb882e72c4bd7",
            "c5dbb4558df77bc6",
            "25d743058464db66",
            "746b7471fda81cac"
        ],
        "x": 34,
        "y": 619,
        "w": 852,
        "h": 442
    },
    {
        "id": "878de3ac45928077",
        "type": "group",
        "z": "eb60a9ea21d42f29",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "d7d28ff8.f76ba",
            "a37b37d1.aad508",
            "ecc06f5.bc3d39",
            "ea735d0.bb55da",
            "d4dee740ac379f10"
        ],
        "x": 34,
        "y": 1259,
        "w": 672,
        "h": 149.5
    },
    {
        "id": "60ad4210945ee21b",
        "type": "group",
        "z": "ce724907bfebf75c",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "5cc978ea4ecbc645",
            "ff366fd337c467c0",
            "cfd932930dd93210",
            "d42d6d21de99e695",
            "74471f8973fa3f53",
            "160f121d5fcc4c61",
            "27b9c9425c9e0b64",
            "c297539a80312066",
            "4e5fc9ecbb91f9da",
            "a11e0dd251eb5940",
            "88950e4db6177323"
        ],
        "x": 34,
        "y": 1531.5,
        "w": 812,
        "h": 277
    },
    {
        "id": "a49df4f119bb186e",
        "type": "group",
        "z": "af31bf2fe058f803",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "07af420f98d0e89a",
            "d7ff5ad4b1b79918",
            "7a258c3a06322d6a",
            "02d2ac26c698a195",
            "477a82641741c1d2",
            "6ba99393e4c393d8",
            "28228f40169db06d",
            "62cf14493c558309",
            "34d7ae63b33b2312",
            "b119fd4598e51e41",
            "05d5a950f617317c",
            "c4571cfee0924b57",
            "ba410ac8c1a26bad",
            "363ef96aac78d4e7",
            "9328b12c82bcdb88",
            "3dc33bd26ddfd0cd",
            "b92aa98cbf16363f",
            "8032366086aa8de0",
            "e0d919a5c94f2160",
            "27368f40feb169f4"
        ],
        "x": 14,
        "y": 979,
        "w": 852,
        "h": 629.5
    },
    {
        "id": "2032f01a228fa872",
        "type": "group",
        "z": "5c14e0941d341b42",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "510ee11de8ea290e",
            "4fba57d68d73f103",
            "e0d7567c11f14e80",
            "5dce7c29609dbb18",
            "1738098239dd2b7a",
            "fd98e8ea7582c78c",
            "b872cbf54450bd69",
            "4d02350771e9d97a",
            "f97ccb1c541b62d5"
        ],
        "x": 44,
        "y": 1299,
        "w": 982,
        "h": 202
    },
    {
        "id": "0839f7b4c0cbb0a8",
        "type": "mqtt-broker",
        "name": "",
        "broker": "localhost",
        "port": 1883,
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": 4,
        "keepalive": 60,
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "6c1d30b5f16932dd",
        "type": "ui-base",
        "name": "MiniSAHA",
        "path": "/dashboard",
        "appIcon": "https://raw.githubusercontent.com/PauLL54/minisaha/refs/heads/main/Logo.png",
        "includeClientData": true,
        "acceptsClientConfig": [
            "ui-notification",
            "ui-control"
        ],
        "showPathInSidebar": false,
        "headerContent": "page",
        "navigationStyle": "default",
        "titleBarStyle": "default",
        "showReconnectNotification": true,
        "notificationDisplayTime": 1,
        "showDisconnectNotification": true,
        "allowInstall": true
    },
    {
        "id": "72011230335eaee3",
        "type": "ui-theme",
        "name": "Default Theme",
        "colors": {
            "surface": "#087d10",
            "primary": "#0094ce",
            "bgPage": "#0d19c9",
            "groupBg": "#0d19c9",
            "groupOutline": "#0d19c9"
        },
        "sizes": {
            "density": "default",
            "pagePadding": "0px",
            "groupGap": "12px",
            "groupBorderRadius": "4px",
            "widgetGap": "10px"
        }
    },
    {
        "id": "74e147230f204214",
        "type": "ui-page",
        "name": "Safe At Home Alone",
        "ui": "6c1d30b5f16932dd",
        "path": "/page1",
        "icon": "account-question",
        "layout": "grid",
        "theme": "72011230335eaee3",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "6"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "6"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "9"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "4"
            }
        ],
        "order": 1,
        "className": "",
        "visible": true,
        "disabled": false
    },
    {
        "id": "ab8f5143a421d4e8",
        "type": "ui-page",
        "name": "Instellingen",
        "ui": "6c1d30b5f16932dd",
        "path": "/page2",
        "icon": "cog-outline",
        "layout": "grid",
        "theme": "72011230335eaee3",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "5"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "5"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "5"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "5"
            }
        ],
        "order": 2,
        "className": "",
        "visible": true,
        "disabled": false
    },
    {
        "id": "1dd0da4fdcd94089",
        "type": "ui-page",
        "name": "Over deze app",
        "ui": "6c1d30b5f16932dd",
        "path": "/page5",
        "icon": "information",
        "layout": "grid",
        "theme": "72011230335eaee3",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "4"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "4"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "4"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "4"
            }
        ],
        "order": 5,
        "className": "",
        "visible": true,
        "disabled": false
    },
    {
        "id": "4de3d58d68afebf3",
        "type": "ui-group",
        "name": "MiniSAHA",
        "page": "74e147230f204214",
        "width": "6",
        "height": 1,
        "order": 1,
        "showTitle": false,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "a50d14b208aa0231",
        "type": "ui-group",
        "name": "Instellingen",
        "page": "ab8f5143a421d4e8",
        "width": "5",
        "height": 1,
        "order": 1,
        "showTitle": false,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "adc719ee09b9438b",
        "type": "ui-group",
        "name": "About",
        "page": "1dd0da4fdcd94089",
        "width": "4",
        "height": 1,
        "order": 1,
        "showTitle": false,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "c5ea61b98d8ee55d",
        "type": "ui-page",
        "name": "System",
        "ui": "6c1d30b5f16932dd",
        "path": "/page6",
        "icon": "home",
        "layout": "grid",
        "theme": "72011230335eaee3",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "7"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "4"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "4"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "4"
            }
        ],
        "order": 6,
        "className": "",
        "visible": "false",
        "disabled": "false"
    },
    {
        "id": "b71c0e77d9debcfd",
        "type": "ui-group",
        "name": "System",
        "page": "c5ea61b98d8ee55d",
        "width": "7",
        "height": 1,
        "order": 1,
        "showTitle": false,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "e9d32d9d636d4a34",
        "type": "ui-page",
        "name": "Bluetooth speaker",
        "ui": "6c1d30b5f16932dd",
        "path": "/page7",
        "icon": "bluetooth",
        "layout": "grid",
        "theme": "72011230335eaee3",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "4"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "4"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "4"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "4"
            }
        ],
        "order": 3,
        "className": "",
        "visible": "true",
        "disabled": "false"
    },
    {
        "id": "549f1fa0e59e6a04",
        "type": "ui-group",
        "name": "Bluetooth",
        "page": "e9d32d9d636d4a34",
        "width": 6,
        "height": 1,
        "order": 1,
        "showTitle": false,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "bed8396ac6babffc",
        "type": "ui-page",
        "name": "Meldingsgeluiden",
        "ui": "6c1d30b5f16932dd",
        "path": "/page9",
        "icon": "home",
        "layout": "grid",
        "theme": "72011230335eaee3",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "4"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "4"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "4"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "4"
            }
        ],
        "order": 4,
        "className": "",
        "visible": "false",
        "disabled": "false"
    },
    {
        "id": "aae22fe947be766e",
        "type": "ui-group",
        "name": "Meldingsgeluiden",
        "page": "bed8396ac6babffc",
        "width": "5",
        "height": 1,
        "order": 1,
        "showTitle": false,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "3e3eaeeeb5cdee42",
        "type": "ui-spacer",
        "group": "549f1fa0e59e6a04",
        "name": "spacer",
        "tooltip": "",
        "order": 12,
        "width": 1,
        "height": 1,
        "className": ""
    },
    {
        "id": "e0fbb4a9fd0354d0",
        "type": "function",
        "z": "7a37030e3e3276d9",
        "name": "create checkIsAtHome script",
        "func": "var topic = msg.topic;\n\nvar pingCount = msg.payload.PingCount;\nvar ipAddress = msg.payload.IPAddress;\nflow.set(\"IPAddress\", ipAddress);\n\nvar scriptFileName = \"checkIsAtHome\" + ipAddress;\nmsg = { filename:  scriptFileName };\nmsg.topic = topic;\n\nmsg.payload = \"#!/bin/bash\\nwhile true; do sudo arping -c \" + \npingCount + \n\" \" + ipAddress +\n\" > checkIsAtHome\" + ipAddress +\n\".temp ; cp checkIsAtHome\" + ipAddress + \".temp \" + \n\"checkIsAtHome\" + ipAddress + \".output; done\";\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 360,
        "wires": [
            [
                "cb34ef38b28112f1"
            ]
        ]
    },
    {
        "id": "cb34ef38b28112f1",
        "type": "file",
        "z": "7a37030e3e3276d9",
        "name": "store in file",
        "filename": "filename",
        "filenameType": "msg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 430,
        "y": 360,
        "wires": [
            [
                "c07fb01cbd0e1a36"
            ]
        ]
    },
    {
        "id": "f75c33f15a6f1e9a",
        "type": "exec",
        "z": "7a37030e3e3276d9",
        "command": "chmod +x ",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "make file executable",
        "x": 800,
        "y": 360,
        "wires": [
            [],
            [],
            [
                "9db7a230d8d8ded9"
            ]
        ]
    },
    {
        "id": "5d6fe42a49b745c9",
        "type": "exec",
        "z": "7a37030e3e3276d9",
        "command": "pkill -f ",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "stop previous process",
        "x": 360,
        "y": 460,
        "wires": [
            [
                "c1f9479b2838c34c"
            ],
            [],
            []
        ]
    },
    {
        "id": "85ce8a28740483a4",
        "type": "exec",
        "z": "7a37030e3e3276d9",
        "command": "bash -c ",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "start checkIsAtHome in background",
        "x": 780,
        "y": 540,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "6799203e85ef9a07",
        "type": "function",
        "z": "7a37030e3e3276d9",
        "name": "get cmd string",
        "func": "var ipAddress = flow.get(\"IPAddress\");\n\nmsg.payload = \" \\\"exec -a checkIsAtHome\" + ipAddress + \n              \" ./checkIsAtHome\" + ipAddress + \"\\\"&\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 780,
        "y": 440,
        "wires": [
            [
                "85ce8a28740483a4"
            ]
        ]
    },
    {
        "id": "3d04040c2df879b0",
        "type": "comment",
        "z": "7a37030e3e3276d9",
        "name": "Start checkIsAtHome script in the background upon startup",
        "info": "",
        "x": 250,
        "y": 260,
        "wires": []
    },
    {
        "id": "a45022df36c5af08",
        "type": "comment",
        "z": "7a37030e3e3276d9",
        "name": "Precondition: sudo apt-get install arping !!!!!!!!!!!!!!!!!",
        "info": "",
        "x": 230,
        "y": 200,
        "wires": []
    },
    {
        "id": "238df2dd7c8038ee",
        "type": "file in",
        "z": "7a37030e3e3276d9",
        "name": "read file",
        "filename": "filename",
        "filenameType": "msg",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 460,
        "y": 100,
        "wires": [
            [
                "9aa4521d2bf238c3"
            ]
        ]
    },
    {
        "id": "9aa4521d2bf238c3",
        "type": "function",
        "z": "7a37030e3e3276d9",
        "name": "Return IsAtHome, SucceededPingCount, status",
        "func": "// get the ping count:\nvar succeededPingCount = 0;\nvar pos = 0;\nvar i = -1;\n\nwhile (pos != -1) {\n  pos = msg.payload.indexOf(\"index=\", i + 1);\n  if (pos != -1) succeededPingCount += 1;\n  i = pos;\n}\n\nvar result = succeededPingCount > 0 ? 1 : 0;\nmsg = { payload: result, topic: flow.get(\"IPAddress\") };\n\nvar msg_SucceededPingCount = { payload: succeededPingCount };\n\nvar msg_Status = { payload: flow.get(\"IPAddress\") + \", \" + Boolean(result) + \", \" + succeededPingCount};\n\nreturn [ msg, msg_SucceededPingCount, msg_Status ];\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 100,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "42db7e7a4a70564a",
        "type": "comment",
        "z": "7a37030e3e3276d9",
        "name": "Check if person is at home",
        "info": "",
        "x": 150,
        "y": 40,
        "wires": []
    },
    {
        "id": "86e654aae39d4d9a",
        "type": "function",
        "z": "7a37030e3e3276d9",
        "name": "Is output file?",
        "func": "var fileName = \"checkIsAtHome\" + flow.get(\"IPAddress\") + \".output\";\n\nif (msg.payload == fileName) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 100,
        "wires": [
            [
                "238df2dd7c8038ee"
            ]
        ]
    },
    {
        "id": "c07fb01cbd0e1a36",
        "type": "function",
        "z": "7a37030e3e3276d9",
        "name": "get scriptName",
        "func": "msg.payload = \"checkIsAtHome\" + flow.get(\"IPAddress\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 360,
        "wires": [
            [
                "f75c33f15a6f1e9a"
            ]
        ]
    },
    {
        "id": "9db7a230d8d8ded9",
        "type": "function",
        "z": "7a37030e3e3276d9",
        "name": "get scriptName",
        "func": "msg.payload = \"checkIsAtHome\"; // + flow.get(\"IPAddress\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 460,
        "wires": [
            [
                "5d6fe42a49b745c9"
            ]
        ]
    },
    {
        "id": "f3ae14c2f27ba38c",
        "type": "watch-directory",
        "z": "7a37030e3e3276d9",
        "folder": ".",
        "recursive": 0,
        "typeEvent": "update",
        "ignoreInitial": true,
        "ignoredFiles": "",
        "ignoredFilesType": "re",
        "name": "Watch file updates",
        "x": 130,
        "y": 100,
        "wires": [
            [
                "86e654aae39d4d9a"
            ]
        ]
    },
    {
        "id": "c1f9479b2838c34c",
        "type": "function",
        "z": "7a37030e3e3276d9",
        "name": "topic=stop?",
        "func": "if (msg.topic == \"stop\") return;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 440,
        "wires": [
            [
                "6799203e85ef9a07"
            ]
        ]
    },
    {
        "id": "542efb510f561bb3",
        "type": "comment",
        "z": "7a37030e3e3276d9",
        "name": "if topic \"stop\" then start no new process",
        "info": "",
        "x": 190,
        "y": 320,
        "wires": []
    },
    {
        "id": "c22004b0961f513e",
        "type": "link in",
        "z": "cf9fd0d5cf32c35e",
        "name": "OnStartup",
        "links": [
            "da94ae4aa9279e93"
        ],
        "x": 65,
        "y": 120,
        "wires": [
            [
                "b93c9a365b0c0222"
            ]
        ]
    },
    {
        "id": "df1d6d903153bf61",
        "type": "ui-text-input",
        "z": "cf9fd0d5cf32c35e",
        "group": "a50d14b208aa0231",
        "name": "Email contact",
        "label": "Email adres contact",
        "order": 14,
        "width": "4",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "email",
        "tooltip": "",
        "delay": "2000",
        "passthru": false,
        "sendOnDelay": false,
        "sendOnBlur": true,
        "sendOnEnter": false,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 440,
        "y": 120,
        "wires": [
            [
                "b882356f986124aa"
            ]
        ]
    },
    {
        "id": "da94ae4aa9279e93",
        "type": "link out",
        "z": "cf9fd0d5cf32c35e",
        "name": "OnStartup",
        "mode": "link",
        "links": [
            "c22004b0961f513e",
            "dffc27ae70b9c04a",
            "077d42c5953f5254"
        ],
        "x": 335,
        "y": 40,
        "wires": []
    },
    {
        "id": "dffc27ae70b9c04a",
        "type": "link in",
        "z": "cf9fd0d5cf32c35e",
        "name": "OnStartup",
        "links": [
            "da94ae4aa9279e93"
        ],
        "x": 65,
        "y": 420,
        "wires": [
            [
                "4dd9c931ec3bb029"
            ]
        ]
    },
    {
        "id": "7b937f0bd2ed23a1",
        "type": "ui-text-input",
        "z": "cf9fd0d5cf32c35e",
        "d": true,
        "group": "",
        "name": "Mobiel MobielContact",
        "label": "06 nummer",
        "order": 1,
        "width": "3",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "text",
        "tooltip": "",
        "delay": "2000",
        "passthru": false,
        "sendOnDelay": false,
        "sendOnBlur": true,
        "sendOnEnter": false,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 460,
        "y": 420,
        "wires": [
            [
                "e1f1b21d219dfb05"
            ]
        ]
    },
    {
        "id": "5751a2ced8d3ce98",
        "type": "ui-text-input",
        "z": "cf9fd0d5cf32c35e",
        "d": true,
        "group": "",
        "name": "WhatsApp toegangscode",
        "label": "toegangscode",
        "order": 2,
        "width": "2",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "text",
        "tooltip": "",
        "delay": "2000",
        "passthru": false,
        "sendOnDelay": false,
        "sendOnBlur": true,
        "sendOnEnter": false,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 470,
        "y": 520,
        "wires": [
            [
                "2eddfe5c416f564d"
            ]
        ]
    },
    {
        "id": "077d42c5953f5254",
        "type": "link in",
        "z": "cf9fd0d5cf32c35e",
        "name": "OnStartup",
        "links": [
            "da94ae4aa9279e93"
        ],
        "x": 65,
        "y": 520,
        "wires": [
            [
                "83663b488022e846"
            ]
        ]
    },
    {
        "id": "4f0d9cb73de3882f",
        "type": "function",
        "z": "cf9fd0d5cf32c35e",
        "name": "help tekst",
        "func": "msg.payload = \n\"<b>\" +\n\"De contactpersoon ontvangt een email als je niet reageert voor een bepaalde tijd.\" +\n\"<br><br>\" +\n\"Het is handig als er een apart meldingsgeluid wordt ingesteld voor deze email bij jouw contactpersoon.\" +\n\"<br><br>\" +\n\"<b>Instructies hiervoor kan je naar hem/haar toesturen door op 'Stuur email' te tikken.\" +\n\"</b>\";\n\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 6000,\n    allowDismiss: true,\n    allowConfirm: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 180,
        "wires": [
            [
                "59af8c3ff732b16e"
            ]
        ]
    },
    {
        "id": "91af11dcc58b9acd",
        "type": "ui-button",
        "z": "cf9fd0d5cf32c35e",
        "group": "a50d14b208aa0231",
        "name": "Help",
        "label": "?",
        "order": 15,
        "width": "1",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 410,
        "y": 180,
        "wires": [
            [
                "4f0d9cb73de3882f"
            ]
        ]
    },
    {
        "id": "59af8c3ff732b16e",
        "type": "ui-notification",
        "z": "cf9fd0d5cf32c35e",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": false,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Sluiten",
        "allowConfirm": true,
        "confirmText": "Stuur email",
        "raw": false,
        "className": "",
        "name": "",
        "x": 990,
        "y": 180,
        "wires": [
            [
                "07b42c2893215618"
            ]
        ]
    },
    {
        "id": "9f447fd0e555bb14",
        "type": "function",
        "z": "cf9fd0d5cf32c35e",
        "name": "Fout",
        "func": "msg.payload = \"<b>Ongeldig email adres: </b>\" + msg.payload;\n\nmsg.ui_update = {\n    raw: true,\n    position: \"center\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 120,
        "wires": [
            [
                "77c4a33f9d1bac3b"
            ]
        ]
    },
    {
        "id": "b882356f986124aa",
        "type": "function",
        "z": "cf9fd0d5cf32c35e",
        "name": "Verify and set",
        "func": "let email = msg.payload ?? \"\";\n\nif (isInvalidEmail2(email)) {\n    return [null, msg]; // ongeldig email adres\n}\n\nlet emailSleutelbewaarder = \"EmailSleutelbewaarder\" + flow.get(\"ContactNr\");\n\nlet oldEmail = global.get(emailSleutelbewaarder);\n\nif (msg.payload.toLowerCase() != oldEmail.toLowerCase()) {\n    global.set(emailSleutelbewaarder, msg.payload);\n    return [msg, null];\n}\nreturn null;\n\n\nfunction isInvalidEmail2(email) {\n    if (email == \"\") return false;\n    if (typeof email !== \"string\") return true;\n\n    const regex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n    return !regex.test(email);\n}\n\nfunction isInvalidEmail(email) {\n    if (typeof email !== \"string\") return true;\n\n    const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return !regex.test(email);\n}\n",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 120,
        "wires": [
            [],
            [
                "9f447fd0e555bb14"
            ]
        ]
    },
    {
        "id": "77c4a33f9d1bac3b",
        "type": "ui-notification",
        "z": "cf9fd0d5cf32c35e",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": false,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Sluiten",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 990,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "e1f1b21d219dfb05",
        "type": "function",
        "z": "cf9fd0d5cf32c35e",
        "name": "Verify",
        "func": "let input = msg.payload ?? \"\";\nnode.status({ text: \"payload: \" + msg.payload });\nif (input == \"\") return;\n\n// Verwijder alles behalve cijfers en +\nlet cleaned = input.replace(/[^0-9+]/g, \"\");\n\n// Als het nummer met +31 begint  omzetten naar 06-formaat\nif (cleaned.startsWith(\"+31\")) {\n    cleaned = \"0\" + cleaned.slice(3);\n}\n\n// Als het nummer met 0031 begint  zelfde behandeling\nif (cleaned.startsWith(\"0031\")) {\n    cleaned = \"0\" + cleaned.slice(4);\n}\n\n// Nu moet het een 06-nummer zijn\nif (!/^06\\d{8}$/.test(cleaned)) {\n    return [null, msg]; // ongeldig nummer\n}\n\n// Normaliseer naar internationaal formaat\nconst internationaal = \"+31\" + cleaned.slice(1);\n\nmsg.payload = internationaal;\n\nglobal.set(\"MobielContact\" + flow.get(\"ContactNr\"), internationaal);\n\nreturn [msg, null];\n\n",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 420,
        "wires": [
            [
                "0633434dddf97781"
            ],
            [
                "05c49efb60c31baa"
            ]
        ]
    },
    {
        "id": "abc938e23af335a4",
        "type": "function",
        "z": "cf9fd0d5cf32c35e",
        "name": "Fout",
        "func": "msg.payload = \"<b>Ongeldig toegangs code: </b>\" + msg.payload;\n\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 520,
        "wires": [
            [
                "8f7ef42fc6e429a2"
            ]
        ]
    },
    {
        "id": "c630ddca2cd6ee2b",
        "type": "ui-notification",
        "z": "cf9fd0d5cf32c35e",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": false,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Sluiten",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 990,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "2eddfe5c416f564d",
        "type": "function",
        "z": "cf9fd0d5cf32c35e",
        "name": "Verify",
        "func": "let input = msg.payload ?? \"\";\nnode.status({ text: \"payload: \" + input });\nif (input == \"\") return;\n\nconst result = cleanAndCheck(input);\nconst valid = result.isValid;\n\nif (valid) {\n    msg.payload = result.digits;\n    global.set(\"ToegangsCodeContact\" + flow.get(\"ContactNr\"), msg.payload);\n    return [msg, null];\n}\nelse {\n    msg.payload = input;\n    return [null, msg];\n}\n\nfunction cleanAndCheck(input) { \n    // verwijder alles wat geen cijfer is \n    const digits = input.replace(/\\D/g, \"\"); \n    // controleer of het precies 7 cijfers zijn \n    const isValid = digits.length === 7; \n    return { digits, isValid }; \n}\n",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 520,
        "wires": [
            [
                "06faba09f0d6860d"
            ],
            [
                "abc938e23af335a4"
            ]
        ]
    },
    {
        "id": "05c49efb60c31baa",
        "type": "function",
        "z": "cf9fd0d5cf32c35e",
        "name": "Fout",
        "func": "msg.payload = \"<b>Ongeldig mobiel nummer: </b>\" + msg.payload;\n\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 420,
        "wires": [
            [
                "c630ddca2cd6ee2b"
            ]
        ]
    },
    {
        "id": "8f7ef42fc6e429a2",
        "type": "ui-notification",
        "z": "cf9fd0d5cf32c35e",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": false,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Sluiten",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 990,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "9714917faf50e4e6",
        "type": "mqtt out",
        "z": "cf9fd0d5cf32c35e",
        "name": "",
        "topic": "InstructieWhatsAppEmail",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 1010,
        "y": 240,
        "wires": []
    },
    {
        "id": "e197533c3333ac14",
        "type": "function",
        "z": "cf9fd0d5cf32c35e",
        "name": "set flow ContactNr",
        "func": "flow.set(\"ContactNr\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 40,
        "wires": [
            [
                "da94ae4aa9279e93"
            ]
        ]
    },
    {
        "id": "b93c9a365b0c0222",
        "type": "function",
        "z": "cf9fd0d5cf32c35e",
        "name": "Email adres contact",
        "func": "msg.payload = global.get(\"EmailSleutelbewaarder\" + flow.get(\"ContactNr\"));\nmsg.payload = msg.payload ?? \"\";\n\nvar msg = {\n    payload: msg.payload,\n    ui_update: { label: \"Email contact \" + flow.get(\"ContactNr\") }\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 120,
        "wires": [
            [
                "df1d6d903153bf61"
            ]
        ]
    },
    {
        "id": "4dd9c931ec3bb029",
        "type": "function",
        "z": "cf9fd0d5cf32c35e",
        "name": "MobielContact",
        "func": "msg.payload = global.get(\"MobielContact\" + flow.get(\"ContactNr\"));\nmsg.payload = msg.payload ?? \"\";\n\nvar msg = {\n    payload: msg.payload , \n    ui_update: { label: \"06 nummer\" }\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 420,
        "wires": [
            [
                "7b937f0bd2ed23a1"
            ]
        ]
    },
    {
        "id": "83663b488022e846",
        "type": "function",
        "z": "cf9fd0d5cf32c35e",
        "name": "ToegangsCodeContact",
        "func": "msg.payload = global.get(\"ToegangsCodeContact\" + flow.get(\"ContactNr\"));\nmsg.payload = msg.payload ?? \"\";\n\nvar msg = {\n    payload: msg.payload,\n    ui_update: { label: \"WhatsApp code\" }\n};\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 220,
        "y": 520,
        "wires": [
            [
                "5751a2ced8d3ce98"
            ]
        ]
    },
    {
        "id": "0633434dddf97781",
        "type": "delay",
        "z": "cf9fd0d5cf32c35e",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 460,
        "y": 480,
        "wires": [
            [
                "7b937f0bd2ed23a1"
            ]
        ]
    },
    {
        "id": "06faba09f0d6860d",
        "type": "delay",
        "z": "cf9fd0d5cf32c35e",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 460,
        "y": 580,
        "wires": [
            [
                "5751a2ced8d3ce98"
            ]
        ]
    },
    {
        "id": "07b42c2893215618",
        "type": "function",
        "z": "cf9fd0d5cf32c35e",
        "name": "confirm_clicked?",
        "func": "if (msg.payload == \"confirm_clicked\") {\n  return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 260,
        "wires": [
            [
                "6a3e1c4af9e596e8"
            ]
        ]
    },
    {
        "id": "6a3e1c4af9e596e8",
        "type": "function",
        "z": "cf9fd0d5cf32c35e",
        "name": "canSendEmail?",
        "func": "let email = global.get(\"EmailSleutelbewaarder\" + flow.get(\"ContactNr\"));\nemail = email ?? \"\";\nlet canSendEmail = (email != \"\");\n\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 6000,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\n\nif (canSendEmail) {\n    msg.payload = \n    \"<b>\" +\n    \"Een email met instructies is gestuurd naar je contact persoon\" +\n    \"</b>\";\n    return [msg, null];\n} else {\n    msg.payload =\n        \"<b>\" +\n        \"Er is nog geen email adres ingevuld.\" +\n        \"</b>\";   \n    return [null, msg];\n}\n\n\n\n",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 260,
        "wires": [
            [
                "4e3d5b3dbc44d585",
                "9de71c9ffd79d1be"
            ],
            [
                "9de71c9ffd79d1be"
            ]
        ]
    },
    {
        "id": "9de71c9ffd79d1be",
        "type": "ui-notification",
        "z": "cf9fd0d5cf32c35e",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": false,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Sluiten",
        "allowConfirm": false,
        "confirmText": "Stuur email",
        "raw": false,
        "className": "",
        "name": "",
        "x": 990,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "4e3d5b3dbc44d585",
        "type": "function",
        "z": "cf9fd0d5cf32c35e",
        "name": "to:",
        "func": "msg.payload = global.get(\"EmailSleutelbewaarder\" + flow.get(\"ContactNr\"));\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 240,
        "wires": [
            [
                "9714917faf50e4e6"
            ]
        ]
    },
    {
        "id": "86a3b683d730904f",
        "type": "inject",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "Every 10 s",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "10",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 200,
        "wires": [
            [
                "04335944abb7d75d"
            ]
        ]
    },
    {
        "id": "dc25463a90653c93",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "Tijd triggers",
        "func": "// hoe laat is het nu?\nvar tijd_nu = global.get(\"getTime\")();\nlet tijd_nu_ms = global.get(\"tijdNaarMs\")(tijd_nu);\nlet meldingstijdGebruiker_ms = global.get(\"tijdNaarMs\")(global.get(\"TijdOK\"));\nlet beginToonVraag_ms = meldingstijdGebruiker_ms - 120 * 60000;\nlet overtijd_ms = meldingstijdGebruiker_ms + global.get(\"MeldPeriodeInMinuten\") * 60000;\n\n// Wanneer is het tijd om een vraag te stellen (2 uur voor de aangegeven tijd)?\nif ((tijd_nu_ms >= beginToonVraag_ms) &&\n    (tijd_nu_ms <  meldingstijdGebruiker_ms)) {\n    msg.payload = \"startToonVraag\";\n    node.status({ text: tijd_nu + \": startToonVraag\" });\n    return msg;\n}\n\n// Wanneer is het tijd om een meldingen te sturen naar de gebruiker?\nif ((tijd_nu_ms >= meldingstijdGebruiker_ms) &&\n    (tijd_nu_ms < overtijd_ms) ) {\n    msg.payload = \"meldingsPeriodeGebruiker\";\n    node.status({ text: tijd_nu + \": meldingsPeriodeGebruiker\" });\n    return msg;\n}\n\n// Wanneer is het tijd om ook een email te sturen naar de contactpersonen?\nif (tijd_nu_ms >= overtijd_ms) {\n    msg.payload = \"meldingsPeriodeVoorbij\";\n    node.status({ text: tijd_nu + \": meldingsPeriodeVoorbij\" });\n    return msg;\n}\n\nif (tijd_nu_ms == 0) {\n    msg.payload = \"middernacht\";\n    node.status({ text: tijd_nu + \": middernacht\" });\n    return msg;\n}\n\nreturn;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 300,
        "wires": [
            [
                "72150be82696bdfc"
            ]
        ]
    },
    {
        "id": "2fe001daedc674d9",
        "type": "mqtt in",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "",
        "topic": "jaPressed",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 160,
        "y": 360,
        "wires": [
            [
                "72150be82696bdfc"
            ]
        ]
    },
    {
        "id": "f80c926aa5f4b4e1",
        "type": "mqtt in",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "",
        "topic": "neePressed",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 170,
        "y": 420,
        "wires": [
            [
                "72150be82696bdfc"
            ]
        ]
    },
    {
        "id": "94fd03500445951f",
        "type": "mqtt out",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "",
        "topic": "StateChanged",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 800,
        "y": 280,
        "wires": []
    },
    {
        "id": "6c1f652de628f1be",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Gebruiker",
        "func": "var tijd_nu = global.get(\"getTime\")();\n\nlet text = msg.payload;\n\nlet emailGebruiker = global.get(\"EmailGebruiker\") || \"\";\nif (emailGebruiker.indexOf(\"@\") == -1) {\n    msg.payload = \"Geen email gebruiker opgegeven.\"\n    node.status({ text: \"Send: \" + tijd_nu + \n    \" no emailgebruiker: \" + emailGebruiker });\n    return [null, msg];\n}\n\nmsg = {\n    to: emailGebruiker,\n    from: \"safeathomealone@gmail.com\",\n    topic: \"MiniSAHA: ben je OK?\",\n    payload: text\n}\n\nnode.status({ text: \"Send: \" + tijd_nu});\nreturn [msg, null];",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 860,
        "wires": [
            [
                "df1878820d0f62c5"
            ],
            []
        ]
    },
    {
        "id": "32e7240df75d8f3a",
        "type": "comment",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "https://www.w3schools.com/js/js_date_reference.asp",
        "info": "",
        "x": 230,
        "y": 1520,
        "wires": []
    },
    {
        "id": "04335944abb7d75d",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "Als Systerm is On",
        "func": "var tijd_nu = global.get(\"getTime\")();\n\nvar isSystemOn = global.get(\"SystemOn\");\n\nif (!isSystemOn) {\n    node.status({ text: tijd_nu + \": System is Off\" });\n    return;\n}\n\nnode.status({ text: tijd_nu + \": System is On\" });\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 200,
        "wires": [
            [
                "dc25463a90653c93"
            ]
        ]
    },
    {
        "id": "070af656b33c1a19",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Geen melding",
        "func": "let emailSleutelbewaarder1 = global.get(\"EmailSleutelbewaarder1\") || \"\";\nlet emailSleutelbewaarder2 = global.get(\"EmailSleutelbewaarder2\") || \"\";\nlet emailSleutelbewaarder3 = global.get(\"EmailSleutelbewaarder3\") || \"\";\n\nif (emailSleutelbewaarder1 == \"\" && \n    emailSleutelbewaarder2 == \"\" && \n    emailSleutelbewaarder3 == \"\") {\n  node.status({ text: \"Send: \" + tijd_nu  + \" geen contactpersonen\"});\n  return;\n}\n\nlet voornaamGebruiker = global.get(\"VoornaamGebruiker\");\n\nvar bericht = \"Beste contactpersoon,\" + \n  \"\\n\\nNeem contact op met \" + voornaamGebruiker + \" want hij/zij heeft niet gereageerd op de dagelijkse melding.\";\n\nif (emailSleutelbewaarder2 != \"\" || emailSleutelbewaarder3 != \"\") {\n  bericht = \"Beste eerste contactpersoon,\" + \n  \"\\n\\nNeem contact op met \" + voornaamGebruiker + \" want hij/zij heeft niet gereageerd op de dagelijkse melding.\" +\n    \"\\nStuur ook (via een reply to all) een bericht naar de \" +\n    \"andere contactpersonen dat je actie onderneemt.\" +\n    \"\\n\\nBeste tweede en/of derde contactpersoon,\" +\n    \"\\n\\nMocht je binnen een half uur na dit bericht geen bericht \" + \n    \"hebben ontvangen van de eerste contactpersoon, neem dan zelf contact \" + \n    \"op met de gebruiker en laat dat de andere contactpersonen ook weten.\";\n}\n\nmsg.topic = \"MiniSAHA: er is niet gereageerd\";\nmsg.payload = bericht;\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 900,
        "wires": [
            [
                "0d0b3ee379dc41b0"
            ]
        ]
    },
    {
        "id": "0d0b3ee379dc41b0",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "join",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1020,
        "wires": [
            [
                "c0678892a8aa9532"
            ]
        ]
    },
    {
        "id": "0aaa14729a8e7b05",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "currentState=Idle",
        "func": "global.set(\"currentState\", \"Idle\");\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: tijd_nu + \" currentState=Idle\"});\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 120,
        "wires": [
            [
                "94fd03500445951f"
            ]
        ]
    },
    {
        "id": "7e9bbcf4c96e333a",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Niet OK",
        "func": "let voornaamGebruiker = global.get(\"VoornaamGebruiker\");\n\nmsg.topic = \"MiniSAHA: \" + voornaamGebruiker +\n    \" heeft zich niet OK gemeld\";\n\nmsg.payload = \"Beste contactpersoon,\\n\\n\" + \n    voornaamGebruiker + \" heeft NEE geantwoord op de vraag of hij/zij OK was.\";\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 960,
        "wires": [
            [
                "0d0b3ee379dc41b0"
            ]
        ]
    },
    {
        "id": "72150be82696bdfc",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "StateMachine",
        "func": "let states = global.get(\"states\");\nvar tijd_nu = global.get(\"getTime\")();\nlet currentState = global.get(\"currentState\");\nlet previousState = currentState;\nglobal.set(\"previousState\", previousState);\n\nlet trigger = msg.payload;\n\nswitch (currentState) {\n    case states.IDLE: {\n        if (trigger == \"startToonVraag\") currentState = states.TOONOKVRAAG;\n        if (trigger == \"meldingsPeriodeGebruiker\") currentState = states.MELDGEBRUIKER;\n        break;\n    }\n    case states.TOONOKVRAAGNIETTHUIS: {\n        if (trigger == \"isThuis\") currentState = states.TOONOKVRAAG;\n        if (trigger == \"meldingsPeriodeVoorbij\") currentState = states.IDLE;\n        break;\n    }\n    case states.TOONOKVRAAG: {\n        if (trigger == \"isNietThuis\") currentState = states.TOONOKVRAAGNIETTHUIS; \n        if (trigger == \"middernacht\") currentState = states.IDLE; \n        if (trigger == \"jaPressed\") currentState = states.ISOK;\n        if (trigger == \"neePressed\") currentState = states.ISNOTOK;\n        if (trigger == \"meldingsPeriodeGebruiker\") currentState = states.MELDGEBRUIKER;\n        if (trigger == \"meldingsPeriodeVoorbij\") currentState = states.OVERTIJD;\n        break;\n    }\n    case states.MELDGEBRUIKERNIETTHUIS: {\n        if (trigger == \"isThuis\") currentState = states.MELDGEBRUIKER; \n        if (trigger == \"meldingsPeriodeVoorbij\") currentState = states.IDLE;\n        break;\n    }\n    case states.MELDGEBRUIKER: {\n        if (trigger == \"isNietThuis\") currentState = states.MELDGEBRUIKERNIETTHUIS; \n        if (trigger == \"middernacht\") currentState = states.IDLE; \n        if (trigger == \"jaPressed\") currentState = states.ISOK;\n        if (trigger == \"neePressed\") currentState = states.ISNOTOK;\n        if (trigger == \"meldingsPeriodeVoorbij\") currentState = states.OVERTIJD;\n        break;\n    }\n    case states.ISOK: {\n        if (trigger == \"middernacht\") currentState = states.IDLE; \n        break;\n    }\n    case states.ISNOTOK: {\n        if (trigger == \"middernacht\") currentState = states.IDLE; \n        break;\n    }\n    case states.OVERTIJD: {\n        if (trigger == \"middernacht\") currentState = states.IDLE;\n        if (trigger == \"jaPressed\") currentState = states.ISOK_OVERTIJD;\n        if (trigger == \"neePressed\") currentState = states.ISNOTOK_OVERTIJD;\n        break;\n    }\n    case states.ISOK_OVERTIJD: {\n        if (trigger == \"middernacht\") currentState = states.IDLE; \n        break;\n    }\n    case states.ISNOTOK_OVERTIJD: {\n        if (trigger == \"middernacht\") currentState = states.IDLE; \n        break;\n    }\n}\n\nglobal.set(\"currentState\", currentState);\n\nnode.status({ text: tijd_nu + \" State: \" + currentState });\n\nif (currentState != previousState) {\n    msg.payload = currentState;\n    return msg;\n}\nelse\n    return;\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 380,
        "wires": [
            [
                "94fd03500445951f",
                "8a2726e6b9fa9a91"
            ]
        ]
    },
    {
        "id": "97cd5aa2eb055baf",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Email action",
        "func": "var tijd_nu = global.get(\"getTime\")();\nlet currentState = global.get(\"currentState\");\nlet previousState = global.get(\"previousState\");\n\nlet states = global.get(\"states\");\nswitch (currentState) {\n    case states.IDLE: {\n        msg.reset = true;\n        node.status({ text: tijd_nu + \", IDLE\" });\n        return [msg, null, null, null]; // stop met het sturen van berichten naar gebruiker\n    }\n    case states.TOONOKVRAAG: {\n        node.status({ text: tijd_nu + \", TOONOKVRAAG\" });\n        msg.reset = true;\n        return [msg, null, null, null];\n    }\n    case states.TOONOKVRAAGNIETTHUIS: {\n        node.status({ text: tijd_nu + \", TOONOKVRAAGNIETTHUIS\" });\n        msg.reset = true;\n        return [msg, null, null, null];\n    }\n    case states.MELDGEBRUIKERNIETTHUIS: {\n        node.status({ text: tijd_nu + \", MELDGEBRUIKERNIETTHUIS\" });\n        msg.reset = true;\n        return [msg, null, null, null];\n    }\n    case states.MELDGEBRUIKER: {\n        node.status({ text: tijd_nu + \", MELDGEBRUIKER, delay (min): \" + global.get(\"Herinnering\") });\n        msg.delay = global.get(\"Herinnering\") * 60000;\n        return [msg, null, null, null];\n    }\n    case states.ISOK: {\n        node.status({ text: tijd_nu + \", reset timer, ISOK\" });\n        msg.reset = true;\n        return [msg, null, null, null];\n    }\n    case states.ISNOTOK: {\n        node.status({ text: tijd_nu + \", ISNOTOK\" });\n        msg.reset = true;\n        return [msg, null, msg, null];\n    }\n    case states.OVERTIJD: {\n        if (currentState != previousState) {\n            node.status({ text: tijd_nu + \", OVERTIJD\" });\n            return [null, msg, null, null]; // Informeer contactpersonen\n        }\n        break;\n    }\n    case states.ISOK_OVERTIJD: {\n        if (currentState != previousState) {\n            node.status({ text: tijd_nu + \", ISOK_OVERTIJD\" });\n            msg.reset = true;\n            msg.payload = \"JA\";\n            return [msg, null, null, msg];\n        }\n        break;\n    }\n    case states.ISNOTOK_OVERTIJD: {\n        if (currentState != previousState) {\n            node.status({ text: tijd_nu + \", ISNOTOK_OVERTIJD\" });\n            msg.reset = true;\n            msg.payload = \"NEE\";\n            return [msg, null, null, msg];\n        }\n        break;\n    }\n}\nreturn;\n",
        "outputs": 4,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 920,
        "wires": [
            [
                "7406ab9d8567cc25"
            ],
            [
                "070af656b33c1a19"
            ],
            [
                "7e9bbcf4c96e333a"
            ],
            [
                "f66c2ba033e71dfe"
            ]
        ]
    },
    {
        "id": "f66c2ba033e71dfe",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Overtijd melding",
        "func": "let voornaamGebruiker = global.get(\"VoornaamGebruiker\");\n\nmsg.topic = \"MiniSAHA: alsnog op \" + msg.payload + \" gedrukt\";\n\nvar bericht = \"Beste contactpersoon,\\n\\n\" + \n    voornaamGebruiker + \" heeft alsnog \" + msg.payload + \n    \" geantwoord op de vraag of hij/zij OK was.\";\n\nmsg.payload = bericht;\n\nvar tijd_nu = global.get(\"getTime\")(); \nnode.status({ text: \"Send: \" + tijd_nu });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 1020,
        "wires": [
            [
                "0d0b3ee379dc41b0"
            ]
        ]
    },
    {
        "id": "df1878820d0f62c5",
        "type": "e-mail",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "server": "smtp.gmail.com",
        "port": "465",
        "authtype": "BASIC",
        "saslformat": true,
        "token": "oauth2Response.access_token",
        "secure": true,
        "tls": true,
        "name": "",
        "dname": "",
        "x": 1010,
        "y": 1060,
        "wires": []
    },
    {
        "id": "e95199098a8ec21d",
        "type": "mqtt in",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "",
        "topic": "TijdOKChanged",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 120,
        "y": 120,
        "wires": [
            [
                "0aaa14729a8e7b05"
            ]
        ]
    },
    {
        "id": "7406ab9d8567cc25",
        "type": "trigger",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Repeat",
        "op1": "aaa",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "5",
        "extend": false,
        "overrideDelay": true,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 380,
        "y": 740,
        "wires": [
            [
                "0362a76e4f7b1fd0"
            ],
            [
                "c9f88ef493593187"
            ]
        ]
    },
    {
        "id": "c9f88ef493593187",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "loop back",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 800,
        "wires": [
            [
                "7406ab9d8567cc25"
            ]
        ]
    },
    {
        "id": "f07ba5eecb0df09e",
        "type": "catch",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 660,
        "y": 1400,
        "wires": [
            [
                "cf1901877bfe59a8",
                "8322868abe70e928"
            ]
        ]
    },
    {
        "id": "8322868abe70e928",
        "type": "debug",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Error",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 810,
        "y": 1400,
        "wires": []
    },
    {
        "id": "98a637c918e7ffb3",
        "type": "inject",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "At Startup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 60,
        "wires": [
            [
                "93e66aed5528479a"
            ]
        ]
    },
    {
        "id": "93e66aed5528479a",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "Set global functions",
        "func": "global.set(\"tijdNaarMs\", function (tijd) { // e.g. \"09:15\"\n    let [h, m] = tijd.split(\":\").map(Number);\n    return (h * 60 + m) * 60000;\n});\n\nglobal.set(\"getTime\", function () {\n    let now = new Date();\n    return ('0' + now.getHours()).slice(-2) + \":\" + ('0' + now.getMinutes()).slice(-2);\n});\n\nglobal.set(\"states\", {\n    IDLE: \"Idle\",\n    TOONOKVRAAG: \"ToonOkVraag\",\n    TOONOKVRAAGNIETTHUIS: \"ToonOkVraagNietThuis\",\n    MELDGEBRUIKER: \"MeldGebruiker\",\n    MELDGEBRUIKERNIETTHUIS: \"MeldGebruikerNietThuis\",\n    ISOK: \"IsOk\",\n    ISNOTOK: \"IsNotOk\",\n    ISOK_OVERTIJD: \"IsOk_OverTijd\",\n    ISNOTOK_OVERTIJD: \"IsNotOk_OverTijd\",\n    OVERTIJD: \"OverTijd\"\n});\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: tijd_nu + \" global functions created\"});\n\nglobal.set(\"currentState\", global.get(\"currentState\") ?? \"Idle\");\nglobal.set(\"TijdOK\", global.get(\"TijdOK\") ?? \" \");\nglobal.set(\"VoornaamGebruiker\", global.get(\"VoornaamGebruiker\") ?? \"\");\nglobal.set(\"EmailGebruiker\", global.get(\"EmailGebruiker\") ?? \"\");\nglobal.set(\"EmailSleutelbewaarder1\", global.get(\"EmailSleutelbewaarder1\") ?? \"\");\nglobal.set(\"EmailSleutelbewaarder2\", global.get(\"EmailSleutelbewaarder2\") ?? \"\");\n\nglobal.set(\"currentState\", \"Idle\");\nglobal.set(\"previousState\", \"OverTijd\");\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 60,
        "wires": [
            [
                "391e6a39648d43b8"
            ]
        ]
    },
    {
        "id": "391e6a39648d43b8",
        "type": "delay",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "",
        "pauseType": "delay",
        "timeout": "20",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 520,
        "y": 60,
        "wires": [
            [
                "94fd03500445951f"
            ]
        ]
    },
    {
        "id": "cf1901877bfe59a8",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Paul",
        "func": "var text = msg.payload.error + \", \" +\nmsg.payload.error.source.name + \", \";\n\nmsg = {\n    to: \"paullangemeijer@hotmail.com\",\n    from: \"safeathomealone@gmail.com\",\n    topic: \"MiniSAHA: fout\",\n    payload: text\n}\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 1340,
        "wires": [
            [
                "4f39baa7dbd5d547"
            ]
        ]
    },
    {
        "id": "4f39baa7dbd5d547",
        "type": "delay",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Rate limit",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "hour",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 920,
        "y": 1340,
        "wires": [
            [
                "df1878820d0f62c5"
            ]
        ]
    },
    {
        "id": "1cbae632c31ff2b0",
        "type": "mqtt in",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "",
        "topic": "HerinneringChanged",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 1000,
        "wires": [
            [
                "97cd5aa2eb055baf"
            ]
        ]
    },
    {
        "id": "da8fec47862aa2f5",
        "type": "inject",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Weekly",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 12 * * 0",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 1200,
        "wires": [
            [
                "cfa6b22427e3edc3"
            ]
        ]
    },
    {
        "id": "cfa6b22427e3edc3",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Herinnering",
        "func": "let voornaamGebruiker = global.get(\"VoornaamGebruiker\");\nmsg.topic = \"Herinnering: MiniSAHA is nog steeds actief bij \" + voornaamGebruiker;\n\nmsg.payload = \"Beste contactpersoon van \" + voornaamGebruiker +\n  \".\\n\\nEens per week wordt dit bericht naar je gestuurd.\\n\" + \n  \"Zo weet je dat het MiniSAHA systeem nog steeds actief is bij \" + \n  global.get(\"VoornaamGebruiker\") + \".\\n\\n\" +\n\"Mocht je dit bericht niet meer ontvangen op zondag rond 12:00, neem dan contact op met hem/haar.\";\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 1200,
        "wires": [
            [
                "56b665cac3641749"
            ]
        ]
    },
    {
        "id": "0362a76e4f7b1fd0",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Bluetooth connected?",
        "func": "var tijd_nu = global.get(\"getTime\")();\nlet connected = global.get(\"BluetoothConnected\");\nnode.status({ text: tijd_nu + \" connected=\" + connected });\nif (connected == \"yes\")   \n    return msg;\nelse\n    return null;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 740,
        "wires": [
            [
                "d5df2f8a93d16c6a"
            ]
        ]
    },
    {
        "id": "d5df2f8a93d16c6a",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "default or random?",
        "func": "let random = global.get(\"BluetoothRandomSound\");\nnode.status({ text: \"random=\" + random });\n\nif (random)\n  return [msg, null];\nelse {\n  msg.payload = global.get(\"BluetoothSound\");\n  return [null, msg]\n}\n",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 640,
        "wires": [
            [
                "494c0e1626e74b03"
            ],
            [
                "9a6d5159979437b8"
            ]
        ]
    },
    {
        "id": "494c0e1626e74b03",
        "type": "exec",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "command": "ls .node-red/projects/MiniSAHA/sounds/*.mp3",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "ls sounds",
        "x": 540,
        "y": 600,
        "wires": [
            [
                "6e3e1642880f5295"
            ],
            [],
            []
        ]
    },
    {
        "id": "6e3e1642880f5295",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "random",
        "func": "let options = msg.payload.split(/\\n/);\noptions.pop();\nmsg.payload = options[Math.floor(Math.random() * options.length)];\nnode.status({ text: msg.payload });\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 600,
        "wires": [
            [
                "9a6d5159979437b8"
            ]
        ]
    },
    {
        "id": "9a6d5159979437b8",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "join",
        "func": "var tijd_nu = global.get(\"getTime\")();\nnode.status({ text: tijd_nu + \", \" + msg.payload });\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 640,
        "wires": [
            [
                "a9d22c1ccafb666e"
            ]
        ]
    },
    {
        "id": "a9d22c1ccafb666e",
        "type": "mqtt out",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "",
        "topic": "PlaySound",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 1010,
        "y": 640,
        "wires": []
    },
    {
        "id": "cd2ccbcdab9e2474",
        "type": "mqtt in",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "",
        "topic": "PersoonThuis",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 170,
        "y": 480,
        "wires": [
            [
                "a60b56107555d543"
            ]
        ]
    },
    {
        "id": "a60b56107555d543",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "isThuis?",
        "func": "var tijd_nu = global.get(\"getTime\")();\nvar isThuis = global.get(\"GebruikerIsAtHome\");\nmsg.payload = isThuis ? \"isThuis\" : \"isNietThuis\"\nnode.status({ text: tijd_nu + \": \" + msg.payload});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 480,
        "wires": [
            [
                "72150be82696bdfc"
            ]
        ]
    },
    {
        "id": "694ce244e4cd603f",
        "type": "mqtt in",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "",
        "topic": "StateChanged",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 820,
        "wires": [
            [
                "97cd5aa2eb055baf"
            ]
        ]
    },
    {
        "id": "dc5cb52b6bdb4970",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Instructie Email",
        "func": "let toAddress = msg.payload;\n\nmsg.topic = \"MiniSAHA: Hoe email geluid instellen?\";\n\nlet text =\n    \"<br>Beste contactpersoon van \" + global.get(\"VoornaamGebruiker\")  + \",\" +\n    \"<br><br>\" +\n    global.get(\"VoornaamGebruiker\")  + \" gebruikt de MiniSAHA app waarin hij/zij zich iedere dag OK meldt. \" + \n    \"Je ontvangt een email als hij/zij zich te laat afmeldt.\" +\n    \"<br><br>\" +\n    \"Het is handig als er een apart meldingsgeluid is voor dit email bericht.<br>\" +\n    \"Dat kan je als volgt instellen:<br>\" +\n    \"1. Maak dan een nieuw email account aan.<br>\" +\n    \"2. Installeer een andere email app op je telefoon die je nog niet hebt (vraag Google hoe dit moet).<br>\" +\n    \"3. Configureer het meldingsgeluid voor die nieuwe email app.<br>\" +\n    \"4. Stuur je nieuwe email adres naar \" + global.get(\"VoornaamGebruiker\") + \".\" +\n    \"<br><br>\" +\n    \"Voorbeeld om een nieuw Google account aan te maken:<br>\" +\n    \"- Bij veld: Een e-mailadres of telefoonnummer gebruiken voer dan niets in!<br>\" +\n    \"- Klik dan op: 'Heb je geen e-mailadres of telefoonnummer?'.<br>\" +\n    \"- Nu kan je wel zelf bepalen wat het email adres wordt.<br>\" +\n    \"Bijvoorbeeld: Voornaam.Achternaam.MiniSAHA@gmail.com<br>\";\n\n\nmsg = {\n    to: toAddress,\n    from: \"safeathomealone@gmail.com\",\n    topic: msg.topic,\n    payload: text\n}\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: tijd_nu + \", to: \" +toAddress});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 1320,
        "wires": [
            [
                "df1878820d0f62c5"
            ]
        ]
    },
    {
        "id": "7f979e43785719b9",
        "type": "mqtt in",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "",
        "topic": "InstructieWhatsAppEmail",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 150,
        "y": 1320,
        "wires": [
            [
                "dc5cb52b6bdb4970"
            ]
        ]
    },
    {
        "id": "89da109317470d4e",
        "type": "mqtt in",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "",
        "topic": "TestEmail",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 100,
        "y": 1140,
        "wires": [
            [
                "d4de81b1883bcb34"
            ]
        ]
    },
    {
        "id": "d4de81b1883bcb34",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Test email",
        "func": "msg.topic = \"MiniSAHA: test email\";\n\nmsg.payload = \"Dit is een test email.\"\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 1140,
        "wires": [
            [
                "56b665cac3641749"
            ]
        ]
    },
    {
        "id": "d366c9dd647f1882",
        "type": "function",
        "z": "a380efb730bea147",
        "d": true,
        "g": "2ce41e3897fb35ce",
        "name": "Bericht",
        "func": "msg.payload = \"Beste \" + global.get(\"VoornaamGebruiker\") +\n    \", \\n\\n\" +\n    \"Ben je OK? Open de MiniSAHA app en bevestig.\";\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 860,
        "wires": [
            [
                "6c1f652de628f1be"
            ]
        ]
    },
    {
        "id": "c0678892a8aa9532",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Email contacten",
        "func": "var text = msg.payload;\n\nmsg = {\n    to: global.get(\"EmailSleutelbewaarder1\"),\n    cc: global.get(\"EmailSleutelbewaarder2\") + \n        \";\" + global.get(\"EmailSleutelbewaarder3\"),\n    from: \"safeathomealone@gmail.com\",\n    topic: msg.topic,\n    payload: text\n}\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu });\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 1060,
        "wires": [
            [
                "df1878820d0f62c5"
            ]
        ]
    },
    {
        "id": "a7f43ddc989df43f",
        "type": "function",
        "z": "a380efb730bea147",
        "d": true,
        "g": "2ce41e3897fb35ce",
        "name": "WhatsApp contacten",
        "func": "var tijd_nu = global.get(\"getTime\")();\nlet text = msg.payload;\n\nfor (let i = 1; i <= 3; i++) {\n    let contact = global.get(\"MobielContact\" + i) ?? \"\";\n    let apikey = global.get(\"ToegangsCodeContact\" + i) ?? \"\";\n\n\n\n    if (contact != \"\" && apikey != \"\") {\n        msg.payload = {\n            \"message\": text,\n            \"phone_number\": contact,\n            \"apikey\": apikey\n        }\n        node.send(msg);\n        node.status({ text: \"mobielContact: \" + contact + \", code: \" + apikey});\n    }\n}\n\nreturn;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 1460,
        "wires": [
            [
                "7139bcd155107a18"
            ]
        ]
    },
    {
        "id": "7139bcd155107a18",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "WhatsApp payload",
        "func": "let message = encodeCustom(msg.payload.message);\n\nmsg.url = \"https://api.callmebot.com/whatsapp.php?phone=\" +\n    msg.payload.phone_number + \"&text=\" +\n    message + \"&apikey=\" + msg.payload.apikey;\n\n\n//msg.url = \"https://api.callmebot.com/whatsapp.php?phone=+31648729669&text=test+minisaha&apikey=3930698\"\n//msg.url = \"https://api.callmebot.com/phone.php?phone=+31648729669&text=phone+test+minisaha&apikey=3930698\"\n//msg.url = \"https://api.callmebot.com/whatsapp.php?phone=+31613207764&text=Kees+test+minisaha&apikey=3283377\"\n//https://api.callmebot.com/whatsapp.php?phone=+31648729669&text=Beste%20contactpersoon,%20%0A%0A%20Paul%20heeft%20op%20Cancel%20Alarm%20knop%20gedrukt.&apikey=3930698\nreturn msg;\n\nfunction encodeCustom(str) {\n    return str\n        .replace(/ /g, \"%20\")\n        .replace(/\\n/g, \"%0A\");\n}\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 1520,
        "wires": [
            [
                "b7c8e30189b3e92e"
            ]
        ]
    },
    {
        "id": "b7c8e30189b3e92e",
        "type": "http request",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "persist": false,
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 930,
        "y": 1520,
        "wires": [
            []
        ]
    },
    {
        "id": "56b665cac3641749",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "join",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1100,
        "wires": [
            [
                "c0678892a8aa9532"
            ]
        ]
    },
    {
        "id": "6c5103174cc9310f",
        "type": "mqtt in",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "",
        "topic": "AlarmCancel",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 1080,
        "wires": [
            [
                "b7b67d2a822e82d9"
            ]
        ]
    },
    {
        "id": "b7b67d2a822e82d9",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Alarm/Cancel",
        "func": "msg.topic = msg.payload.topic;\nmsg.payload = msg.payload.text;\n\nvar tijd_nu = global.get(\"getTime\")(); \nnode.status({ text: \"Send: \" + tijd_nu + \", topic: \" + msg.topic});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 1080,
        "wires": [
            [
                "0d0b3ee379dc41b0"
            ]
        ]
    },
    {
        "id": "8a2726e6b9fa9a91",
        "type": "debug",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "debug 2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 720,
        "y": 380,
        "wires": []
    },
    {
        "id": "500d244d6438e211",
        "type": "comment",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Meld gebruiker en contactpersonen",
        "info": "",
        "x": 180,
        "y": 580,
        "wires": []
    },
    {
        "id": "e43aa1add6eab915",
        "type": "comment",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "State machine",
        "info": "",
        "x": 770,
        "y": 60,
        "wires": []
    },
    {
        "id": "6c19355dfbaa9427",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Meldperiode gewijzigd",
        "func": "let voornaamGebruiker = global.get(\"VoornaamGebruiker\");\nmsg.topic = \"MiniSAHA: tijdmelding gewijzigd bij \" + voornaamGebruiker;\n\nvar tijd_nu = global.get(\"getTime\")();\nlet tijd_nu_ms = global.get(\"tijdNaarMs\")(tijd_nu);\nlet meldingstijdGebruiker_ms = global.get(\"tijdNaarMs\")(global.get(\"TijdOK\"));\nlet overtijd_ms = meldingstijdGebruiker_ms + global.get(\"MeldPeriodeInMinuten\") * 60000;\nlet overtijd = msToHM(overtijd_ms);\n\nmsg.payload = \"Beste contactpersoon,\\n\\n\" + \n  voornaamGebruiker + \" heeft de tijdmelding gewijzigd.\\n\" + \n  \"Wanneer \" + voornaamGebruiker + \" zich niet bijtijds afmeldt, zal je om \" + overtijd +\n  \" een melding hiervan krijgen.\";\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu });\nreturn msg;\n\nfunction msToHM(ms) {\n  const totalSeconds = Math.floor(ms / 1000);\n  const minutes = Math.floor(totalSeconds / 60) % 60;\n  const hours = Math.floor(totalSeconds / 3600);\n\n  const pad = n => String(n).padStart(2, '0');\n  return `${pad(hours)}:${pad(minutes)}`;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1260,
        "wires": [
            [
                "56b665cac3641749"
            ]
        ]
    },
    {
        "id": "99a1a62d240c5007",
        "type": "mqtt in",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "",
        "topic": "OvertijdChanged",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 120,
        "y": 1260,
        "wires": [
            [
                "6c19355dfbaa9427"
            ]
        ]
    },
    {
        "id": "817a65e37e67edcc",
        "type": "mqtt in",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "",
        "topic": "ContactChanged",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 120,
        "y": 1380,
        "wires": [
            [
                "7df2d7d7906671f7"
            ]
        ]
    },
    {
        "id": "7df2d7d7906671f7",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Welkom nieuw contact",
        "func": "var tijd_nu = global.get(\"getTime\")();\nlet tijd_nu_ms = global.get(\"tijdNaarMs\")(tijd_nu);\nlet meldingstijdGebruiker_ms = global.get(\"tijdNaarMs\")(global.get(\"TijdOK\"));\nlet overtijd_ms = meldingstijdGebruiker_ms + global.get(\"MeldPeriodeInMinuten\") * 60000;\nlet overtijd = msToHM(overtijd_ms);\n\nlet voornaamGebruiker = global.get(\"VoornaamGebruiker\");\n\nlet emailTopic = \"MiniSAHA: welkom contactpersoon van \" + voornaamGebruiker;\nlet toAddress = msg.payload;\nlet text = \"Beste contactpersoon,\\n\\n\" + \n  voornaamGebruiker + \" heeft je toegevoegd als contact voor zijn MiniSAHA app.\\n\" + \n  \"In deze app meldt \" + voornaamGebruiker + \" iedere dag dat hij/zij OK is.\\n\" + \n  \"Wanneer \" + voornaamGebruiker + \" zich niet bijtijds afmeldt, zal je om \" + overtijd +\n  \" een melding hiervan krijgen.\\n\" +\n  \"Neem dan even contact op met \" + voornaamGebruiker + \" om te kijken wat er aan de hand is.\";\n\nmsg = {\n  to: toAddress,\n  from: \"safeathomealone@gmail.com\",\n  topic: emailTopic,\n  payload: text\n}\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu + \", \" + toAddress });\nreturn msg;\n\n\nfunction msToHM(ms) {\n  const totalSeconds = Math.floor(ms / 1000);\n  const minutes = Math.floor(totalSeconds / 60) % 60;\n  const hours = Math.floor(totalSeconds / 3600);\n\n  const pad = n => String(n).padStart(2, '0');\n  return `${pad(hours)}:${pad(minutes)}`;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1380,
        "wires": [
            [
                "df1878820d0f62c5"
            ]
        ]
    },
    {
        "id": "86d57ce8cd9b65da",
        "type": "mqtt in",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "",
        "topic": "StateChanged",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 160,
        "wires": [
            [
                "3be586184e50e4ea",
                "d14d455208d7b126",
                "d283ae10f4012c17"
            ]
        ]
    },
    {
        "id": "753a239026080219",
        "type": "mqtt out",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "",
        "topic": "jaPressed",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 840,
        "y": 120,
        "wires": []
    },
    {
        "id": "99b664e80a1908c6",
        "type": "mqtt out",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "",
        "topic": "neePressed",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 850,
        "y": 180,
        "wires": []
    },
    {
        "id": "3be586184e50e4ea",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "Enable/Disable",
        "func": "var msg = { enabled: false, \n    ui_update: { textColor: \"gray\" } };\n            \nlet states = global.get(\"states\");\nswitch (global.get(\"currentState\")) {\n    case states.TOONOKVRAAG:\n    case states.MELDGEBRUIKER: \n    case states.OVERTIJD: {\n        var msg = {\n            enabled: true,\n            ui_update: { textColor: \"white\" } };\n        break;\n    }\n    default: {\n        break;\n    }\n}\n\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: tijd_nu + \" \" + msg.enabled });\nreturn msg;\n\n/*\n\"red\"\n\"blue\"\n\"green\"\n\"yellow\"\n\"orange\"\n\"purple\"\n\"pink\"\n\"brown\"\n\"black\"\n\"white\"\n\"gray\"\n\n Extra veelgebruikte tinten\n\"cyan\" (lichtblauw)\n\"magenta\" (fel roze/paars)\n\"lime\" (felgroen)\n\"navy\" (donkerblauw)\n\"teal\" (blauwgroen)\n\"olive\" (olijfgroen)\n\"maroon\" (donkerrood)\n\"silver\" (lichtgrijs)\n\"gold\" (goudkleurig)\n\"indigo\" (diep paars/blauw)\n*/",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 160,
        "wires": [
            [
                "a5f6fedc4ec48281",
                "e9fa22955a89da80"
            ]
        ]
    },
    {
        "id": "dd466b9403f2d8f4",
        "type": "inject",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "OnStartup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "Welkom!",
        "payloadType": "str",
        "x": 130,
        "y": 480,
        "wires": [
            [
                "5f66bb58047a17de",
                "b2ce6b3ac89473bf"
            ]
        ]
    },
    {
        "id": "75841af45dc440b7",
        "type": "comment",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "icons: https://pictogrammers.com/library/mdi/",
        "info": "",
        "x": 210,
        "y": 740,
        "wires": []
    },
    {
        "id": "55d46207a0c02be9",
        "type": "change",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "SystemOn",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "5f66bb58047a17de",
        "type": "change",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "SystemOn",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "SystemOn",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 480,
        "wires": [
            [
                "00e6d8a574603f71"
            ]
        ]
    },
    {
        "id": "6f050edd963ed167",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "Systeem in/uit geschakeld",
        "func": "var bericht = \"Systeem is uitgeschakeld.\";\nif (msg.payload) bericht = \"Systeem is ingeschakeld.\";\n\nmsg.payload = bericht;\n\nnode.status({ fill: \"blue\", shape: \"ring\", text: bericht });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 360,
        "wires": [
            [
                "16395cfced8c47cb"
            ]
        ]
    },
    {
        "id": "e9fa22955a89da80",
        "type": "ui-button",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "group": "4de3d58d68afebf3",
        "name": "Nee",
        "label": "NEE",
        "order": 3,
        "width": "3",
        "height": "2",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "JaNeeButton",
        "icon": "",
        "iconPosition": "left",
        "payload": "neePressed",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "yellow",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 610,
        "y": 180,
        "wires": [
            [
                "99b664e80a1908c6"
            ]
        ]
    },
    {
        "id": "a5f6fedc4ec48281",
        "type": "ui-button",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "group": "4de3d58d68afebf3",
        "name": "Ja",
        "label": "JA",
        "order": 2,
        "width": "3",
        "height": "2",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "JaNeeButton",
        "icon": "",
        "iconPosition": "left",
        "payload": "jaPressed",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "yellow",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 610,
        "y": 120,
        "wires": [
            [
                "753a239026080219"
            ]
        ]
    },
    {
        "id": "55706aed47335f02",
        "type": "ui-switch",
        "z": "1e372cb3d08d9182",
        "d": true,
        "g": "4a425ad2d30f78bc",
        "name": "Systeem actief",
        "label": "Systeem",
        "group": "4de3d58d68afebf3",
        "order": 10,
        "width": "2",
        "height": "1",
        "passthru": false,
        "decouple": false,
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "className": "",
        "layout": "row-left",
        "clickableArea": "switch",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 640,
        "y": 480,
        "wires": [
            [
                "55d46207a0c02be9",
                "6f050edd963ed167"
            ]
        ]
    },
    {
        "id": "4c44736709d21bb0",
        "type": "ui-text",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "group": "4de3d58d68afebf3",
        "order": 1,
        "width": "6",
        "height": "2",
        "name": "Vraag",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": true,
        "font": "",
        "fontSize": "24",
        "color": "#ffffff",
        "wrapText": true,
        "className": "TextNode",
        "value": "payload",
        "valueType": "msg",
        "x": 610,
        "y": 60,
        "wires": []
    },
    {
        "id": "1c70b188ec53d6ab",
        "type": "ui-text",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "group": "4de3d58d68afebf3",
        "order": 4,
        "width": "6",
        "height": "2",
        "name": "Response",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": true,
        "font": "",
        "fontSize": "24",
        "color": "#ffffff",
        "wrapText": true,
        "className": "TextNode",
        "value": "payload",
        "valueType": "msg",
        "x": 620,
        "y": 280,
        "wires": []
    },
    {
        "id": "b81cb7c076621c31",
        "type": "ui-text",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "group": "4de3d58d68afebf3",
        "order": 7,
        "width": 0,
        "height": 0,
        "name": "Alarm bericht",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": true,
        "font": "",
        "fontSize": "24",
        "color": "#ffff00",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 730,
        "y": 980,
        "wires": []
    },
    {
        "id": "f720e78159430790",
        "type": "ui-text",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "group": "4de3d58d68afebf3",
        "order": 9,
        "width": "4",
        "height": "1",
        "name": "Info",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": true,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 610,
        "y": 600,
        "wires": []
    },
    {
        "id": "131f564f42824545",
        "type": "mqtt in",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "",
        "topic": "PersoonThuis",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 540,
        "wires": [
            [
                "b2ce6b3ac89473bf"
            ]
        ]
    },
    {
        "id": "b2ce6b3ac89473bf",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "Ja/Nee",
        "func": "var isThuis = global.get(\"GebruikerIsAtHome\");\n\nvar text = \"Mobiel: geen IP adres.\";\n\nvar ipMobiel = global.get(\"IP_Mobiel\"); \nif (ipMobiel && ipMobiel.length > 0) {\n    if (isThuis) {\n        text = \"\";\n    }\n    else {\n        text = \"Mobiel NIET gedetecteerd.\";\n    }\n}\n\nvar msg = { payload: text };\n\nif (isThuis) \n    msg.ui_update = { color: \"#ffffff\"} // wit ;\nelse\n    msg.ui_update = { color: \"#ff0000\"} // rood ;\n\nnode.status({ text: \"msg: \" + text });\nreturn msg;\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 540,
        "wires": [
            [
                "f720e78159430790"
            ]
        ]
    },
    {
        "id": "d14d455208d7b126",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "Vraag",
        "func": "let states = global.get(\"states\");\nmsg.payload = global.get(\"VoornaamGebruiker\");\n\nswitch (global.get(\"currentState\")) {\n    case states.TOONOKVRAAG: \n    case states.MELDGEBRUIKER: {\n        msg.payload += \", ben je OK?\";\n        break;\n    }\n    case states.TOONOKVRAAGNIETTHUIS: \n    case states.MELDGEBRUIKERNIETTHUIS: {\n        msg.payload += \", je bent nu niet thuis\";\n        break;\n    }\n    case states.ISNOTOK: {\n        msg.payload += \", een bericht is verstuurd.\";\n        break;\n    }\n     case states.ISNOTOK_OVERTIJD: {\n        msg.payload += \", een bericht is verstuurd.\";\n        break;\n     }\n    case states.OVERTIJD: {\n        msg.payload += \", ben je OK? <br>Overtijd: er is een bericht naar contactpersonen gestuurd.\";\n        break;\n    }    \n    default: {\n        msg.payload += \", er is geen vraag voor nu.\";\n        break;\n    }\n}\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({text: tijd_nu + \" \" + msg.payload});\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 60,
        "wires": [
            [
                "4c44736709d21bb0"
            ]
        ]
    },
    {
        "id": "d283ae10f4012c17",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "Response",
        "func": "let currentState = global.get(\"currentState\");\nlet previousState = global.get(\"previousState\");\n\nmsg.payload = \"\";\n\nlet states = global.get(\"states\");\n\nif (currentState != previousState) {\n    switch (global.get(\"currentState\")) {\n        case states.ISOK: {\n            msg.payload = \"Dank je wel! Fijne Dag.\";\n            break;\n        }\n        case states.ISOK_OVERTIJD: {\n            msg.payload = \"Dank je wel! Fijne Dag. <br>De contactpersonen zijn geinformeerd.\";\n            break;\n        }\n        case states.ISNOTOK_OVERTIJD: \n        case states.ISNOTOK: {\n            msg.payload = \"Wat vervelend! <br>De contactpersonen zijn geinformeerd.\";\n            break;\n        }\n        default: {\n            break;\n        }\n    }\n}\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({text: tijd_nu + \" \" + msg.payload});\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 240,
        "wires": [
            [
                "16395cfced8c47cb"
            ]
        ]
    },
    {
        "id": "16395cfced8c47cb",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "join",
        "func": "var now = new Date();\nvar tijd_nu = now.getHours() + \":\" + ('0' + now.getMinutes()).slice(-2);;\nnode.status({ text: tijd_nu + \" \"+ msg.payload });\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 280,
        "wires": [
            [
                "1c70b188ec53d6ab",
                "0436958281830a8e"
            ]
        ]
    },
    {
        "id": "00e6d8a574603f71",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "default",
        "func": "if (msg.payload == null) {\n    msg.payload = true;\n    global.set(\"SystemOn\", true);\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 480,
        "wires": [
            [
                "55706aed47335f02"
            ]
        ]
    },
    {
        "id": "f31d4676aacdfc8e",
        "type": "ui-template",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "group": "",
        "page": "74e147230f204214",
        "ui": "",
        "name": "CSS button",
        "order": 1,
        "width": 0,
        "height": 0,
        "head": "",
        "format": ".JaNeeButton button {\n    font-size: 2.5em;\n}\n",
        "storeOutMessages": true,
        "passthru": true,
        "resendOnRefresh": true,
        "templateScope": "page:style",
        "className": "",
        "x": 630,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "b2edd67c1976f042",
        "type": "mqtt in",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "",
        "topic": "EmailError",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 100,
        "y": 300,
        "wires": [
            [
                "8a224d6b4c8e6e53"
            ]
        ]
    },
    {
        "id": "8a224d6b4c8e6e53",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "error",
        "func": "let emailGebruiker = global.get(\"EmailGebruiker\") || \"\";\nlet emailSleutelbewaarder1 = global.get(\"EmailSleutelbewaarder1\") || \"\";\nlet emailSleutelbewaarder2 = global.get(\"EmailSleutelbewaarder2\") || \"\";\n\nif (!emailGebruiker.includes(\"@\")) {\n    msg.payload = \"Fout: geen email adres gebruiker.\";\n}\n\nif ((!emailSleutelbewaarder1.includes(\"@\")) && \n    (!emailSleutelbewaarder1.includes(\"@\"))) {\n    msg.payload = \"Fout: geen email adres contactpersonen.\";\n}\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 270,
        "y": 300,
        "wires": [
            [
                "16395cfced8c47cb"
            ]
        ]
    },
    {
        "id": "6ce9c1c05a07f0e4",
        "type": "ui-button",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "group": "4de3d58d68afebf3",
        "name": "ALARM",
        "label": "ALARM",
        "order": 5,
        "width": "3",
        "height": "2",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "JaNeeButton",
        "icon": "",
        "iconPosition": "left",
        "payload": "neePressed",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "yellow",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 100,
        "y": 840,
        "wires": [
            [
                "bf9647efa558a7d3",
                "4b53939b9023b8c0",
                "848574e93a41e0cc"
            ]
        ]
    },
    {
        "id": "7d9adb1d8b871f0c",
        "type": "ui-button",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "group": "4de3d58d68afebf3",
        "name": "CANCEL",
        "label": "CANCEL",
        "order": 6,
        "width": "3",
        "height": "2",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "JaNeeButton",
        "icon": "",
        "iconPosition": "left",
        "payload": "neePressed",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "yellow",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 100,
        "y": 900,
        "wires": [
            [
                "f84bc5be2fce9d39",
                "074f5b05354c5090",
                "848574e93a41e0cc"
            ]
        ]
    },
    {
        "id": "bf9647efa558a7d3",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "Alarm tekst",
        "func": "let emailSleutelbewaarder1 = global.get(\"EmailSleutelbewaarder1\") || \"\";\nlet emailSleutelbewaarder2 = global.get(\"EmailSleutelbewaarder2\") || \"\";\nlet emailSleutelbewaarder3 = global.get(\"EmailSleutelbewaarder3\") || \"\";\n\nif (emailSleutelbewaarder1 == \"\" && emailSleutelbewaarder2 == \"\" && emailSleutelbewaarder3 == \"\") {\n  node.status({ text: \"Send: \" + tijd_nu  + \" geen contacten\"});\n  return;\n}\n\nvar bericht = \"Beste contactpersoon, \" +\n    \"\\n\\n\" +\n    global.get(\"VoornaamGebruiker\") +\n    \" heeft op de Alarm knop gedrukt.\" +\n    \"\\n\\n Neem contact op met hem/haar.\";\n\nif (emailSleutelbewaarder2 != \"\" || emailSleutelbewaarder3 != \"\") {\n  bericht = \"Beste eerste contactpersoon, \" +\n    \"\\n\\nNeem contact op met \" +\n    global.get(\"VoornaamGebruiker\") + \n    \" want hij/zij heeft op de Alarm gedrukt.\" +\n    \"\\nLaat ook de overige contactpersonen weten dat je actie onderneemt.\" +\n    \"\\n\\nBeste tweede en/of derde contactpersoon,\" +\n    \"\\n\\nMocht je binnen een half uur na dit bericht geen bericht hebben ontvangen van de eerste contactpersoon, neem dan zelf contact op met de gebruiker en laat dat de eerste contactpersoon ook weten.\"\n}\n\nmsg.topic = \"MiniSAHA: op Alarm knop gedrukt\";\nmsg.payload = { \"text\": bericht, \"topic\": msg.topic };\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 840,
        "wires": [
            [
                "45c53f307e13019e"
            ]
        ]
    },
    {
        "id": "f84bc5be2fce9d39",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "Cancel Alarm",
        "func": "let emailSleutelbewaarder1 = global.get(\"EmailSleutelbewaarder1\") || \"\";\nlet emailSleutelbewaarder2 = global.get(\"EmailSleutelbewaarder2\") || \"\";\nlet emailSleutelbewaarder3 = global.get(\"EmailSleutelbewaarder3\") || \"\";\n\nif (emailSleutelbewaarder1 == \"\" && emailSleutelbewaarder2 == \"\" && emailSleutelbewaarder3 == \"\") {\n  node.status({ text: \"Send: \" + tijd_nu + \" geen contactpersonen\"});\n  return;\n}\n\nvar bericht = \"Beste contactpersoon, \" +\n    \"\\n\\n \" +\n    global.get(\"VoornaamGebruiker\") +\n    \" heeft op de Cancel Alarm knop gedrukt.\";\n\nmsg.topic = \"MiniSAHA: op Cancel Alarm knop gedrukt\";\nmsg.payload = { \"text\": bericht, \"topic\":  msg.topic};\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 900,
        "wires": [
            [
                "45c53f307e13019e"
            ]
        ]
    },
    {
        "id": "4b53939b9023b8c0",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "feedback",
        "func": "msg.payload = global.get(\"getTime\")() + \": Alarm melding gestuurd.\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 960,
        "wires": [
            [
                "b81cb7c076621c31"
            ]
        ]
    },
    {
        "id": "074f5b05354c5090",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "feedback",
        "func": "msg.payload = global.get(\"getTime\")() +\": Cancel melding gestuurd.\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 1020,
        "wires": [
            [
                "b81cb7c076621c31"
            ]
        ]
    },
    {
        "id": "f85ce69846f65989",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "clear",
        "func": "msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 1080,
        "wires": [
            [
                "b81cb7c076621c31"
            ]
        ]
    },
    {
        "id": "848574e93a41e0cc",
        "type": "delay",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 380,
        "y": 1080,
        "wires": [
            [
                "f85ce69846f65989"
            ]
        ]
    },
    {
        "id": "6c02930ddcad9dd8",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "clear",
        "func": "msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 340,
        "wires": [
            [
                "1c70b188ec53d6ab"
            ]
        ]
    },
    {
        "id": "0436958281830a8e",
        "type": "delay",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 500,
        "y": 340,
        "wires": [
            [
                "6c02930ddcad9dd8"
            ]
        ]
    },
    {
        "id": "d6b298f8ec85d61c",
        "type": "ui-text",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "group": "4de3d58d68afebf3",
        "order": 8,
        "width": 0,
        "height": 0,
        "name": "lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payloads",
        "valueType": "msg",
        "x": 620,
        "y": 400,
        "wires": []
    },
    {
        "id": "389045590526c181",
        "type": "mqtt in",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "",
        "topic": "BluetoothConnection",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 660,
        "wires": [
            [
                "87cce92b163a7192"
            ]
        ]
    },
    {
        "id": "87cce92b163a7192",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "Connection",
        "func": "node.status({ text: msg.payload });\n\nif (msg.payload == \"yes\") {\n    msg.payload = \"\";\n    msg.ui_update = { color: \"#ffffff\" } // wit ;\n    return msg;\n}\nelse {\n    if (global.get(\"BluetoothConnectedName\") != \"\") {\n        msg.payload = \"Staat de Bluetooth speaker aan?\";\n        msg.ui_update = { color: \"#ff0000\" } // rood ;\n        return msg;\n    }\n}\nreturn;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 660,
        "wires": [
            [
                "f720e78159430790"
            ]
        ]
    },
    {
        "id": "d98e03253a9f5ca9",
        "type": "inject",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.4",
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 110,
        "y": 600,
        "wires": [
            [
                "f720e78159430790"
            ]
        ]
    },
    {
        "id": "45c53f307e13019e",
        "type": "mqtt out",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "",
        "topic": "AlarmCancel",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 730,
        "y": 860,
        "wires": []
    },
    {
        "id": "dba3182f449692bb",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "TijdOK",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "c7a382e00daaa762",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "VoornaamGebruiker",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "210d4509be3e8c2a",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "EmailGebruiker",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "ee88c907a0b09cd1",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "Instellingen aangepast",
        "func": "msg.payload = \"Instellingen aangepast.\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 160,
        "wires": [
            [
                "dd63a561601b450c"
            ]
        ]
    },
    {
        "id": "dd63a561601b450c",
        "type": "mqtt out",
        "z": "5c14e0941d341b42",
        "name": "",
        "topic": "Home_Response",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 890,
        "y": 160,
        "wires": []
    },
    {
        "id": "c3f276a2ad7a0959",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "VoornaamGebruiker",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "VoornaamGebruiker",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 180,
        "y": 100,
        "wires": [
            [
                "40cdbc12fde511c0"
            ]
        ]
    },
    {
        "id": "d79dc93d3be0348d",
        "type": "inject",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "3",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 110,
        "y": 40,
        "wires": [
            [
                "4abb19d96b88ba67"
            ]
        ]
    },
    {
        "id": "03a73053ad9f3c47",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "EmailGebruiker",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "EmailGebruiker",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 360,
        "wires": [
            [
                "7722ab3d73849d23"
            ]
        ]
    },
    {
        "id": "895ee0f7358cef53",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "TijdOK",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "TijdOK",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 130,
        "y": 940,
        "wires": [
            [
                "655933cca9c65716"
            ]
        ]
    },
    {
        "id": "fa655697e3f1bd1d",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "MobielGebruiker",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "cbe4d5b193c88548",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "MobielGebruiker",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "MobielGebruiker",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 220,
        "wires": [
            [
                "a2dcd0ec27b30c84"
            ]
        ]
    },
    {
        "id": "a6fd027bc0be280d",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IP_Mobiel",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "6827ed79fcbc1bcc",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "help tekst",
        "func": "msg.payload = \n\"<b>\" + \"<br><br>\" +\n\"Je kan een melding krijgen op een Bluetooth speaker en/of via het meldingsgeluid van een email.\" +\n\"<br><br>\" +\n\"Het voordeel van een Bluetooth speaker is dat email meldingen uit kunnen staan op je mobiel.\" +\n\"<br><br>\" +\n\"Als je alleen via email een melding wilt, is het handig om een apart meldingsgeluid hiervoor in te stellen.\"+\n\"Dat kan je doen door een nieuw emailadres aan te maken en een andere email app te gebruiken dan de standaard app. \" +\n\"Want dan kan je voor deze email app een uniek geluid instellen.</b>\";\n\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 400,
        "wires": [
            [
                "cc825dfdb183c22b"
            ]
        ]
    },
    {
        "id": "c7a30ab24c9ec224",
        "type": "function",
        "z": "5c14e0941d341b42",
        "d": true,
        "name": "Spaces",
        "func": "// verwijder spaties\nlet origineleString = msg.payload;\nif (origineleString == undefined) return;\nlet zonderSpaties = origineleString.replace(/\\s+/g, \"\");\nmsg.payload = zonderSpaties;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 680,
        "wires": [
            [
                "a6fd027bc0be280d",
                "996abe576c2cecb2"
            ]
        ]
    },
    {
        "id": "f39bf68dcea766f2",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "MeldPeriodeInMinuten",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 960,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "da27f195c199f6ae",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "MeldPeriodeInMinuten",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "MeldPeriodeInMinuten",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 180,
        "y": 1060,
        "wires": [
            [
                "8432a47ba220719a"
            ]
        ]
    },
    {
        "id": "5cd5579edefbe928",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "help tekst",
        "func": "msg.payload = \n\"<b>De gebruiker moet binnen deze periode (b.v. 60 minuten) na de eerste melding reageren in deze app.</b>\" +\n\"<br></b><br>\" +\n\"<b>Zo niet, dan wordt er een email gestuurd naar de contactpersonen met het verzoek contact met je op te nemen.</b><br>\";\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 1120,
        "wires": [
            [
                "f24ffaab884e5a75"
            ]
        ]
    },
    {
        "id": "4abb19d96b88ba67",
        "type": "link out",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "mode": "link",
        "links": [
            "c9ec5160388cc29c",
            "ba5f9de83ae33543",
            "73afa7fb3453b035",
            "3a6f5a640cea07b3",
            "26417c5cfef73e15",
            "bdebfa0f1e99fc2e"
        ],
        "x": 225,
        "y": 40,
        "wires": []
    },
    {
        "id": "c9ec5160388cc29c",
        "type": "link in",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "links": [
            "4abb19d96b88ba67"
        ],
        "x": 45,
        "y": 1060,
        "wires": [
            [
                "da27f195c199f6ae"
            ]
        ]
    },
    {
        "id": "ba5f9de83ae33543",
        "type": "link in",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "links": [
            "4abb19d96b88ba67"
        ],
        "x": 45,
        "y": 100,
        "wires": [
            [
                "c3f276a2ad7a0959"
            ]
        ]
    },
    {
        "id": "73afa7fb3453b035",
        "type": "link in",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "links": [
            "4abb19d96b88ba67"
        ],
        "x": 45,
        "y": 360,
        "wires": [
            [
                "03a73053ad9f3c47"
            ]
        ]
    },
    {
        "id": "3a6f5a640cea07b3",
        "type": "link in",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "links": [
            "4abb19d96b88ba67"
        ],
        "x": 45,
        "y": 220,
        "wires": [
            [
                "cbe4d5b193c88548"
            ]
        ]
    },
    {
        "id": "26417c5cfef73e15",
        "type": "link in",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "links": [
            "4abb19d96b88ba67"
        ],
        "x": 45,
        "y": 940,
        "wires": [
            [
                "895ee0f7358cef53"
            ]
        ]
    },
    {
        "id": "40cdbc12fde511c0",
        "type": "ui-text-input",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Voornaam gebruiker",
        "label": "Voornaam gebruiker",
        "order": 1,
        "width": "4",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "text",
        "tooltip": "",
        "delay": "2000",
        "passthru": false,
        "sendOnDelay": false,
        "sendOnBlur": true,
        "sendOnEnter": false,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 520,
        "y": 100,
        "wires": [
            [
                "c7a382e00daaa762",
                "ee88c907a0b09cd1",
                "6e34a944a7019b1e"
            ]
        ]
    },
    {
        "id": "7722ab3d73849d23",
        "type": "ui-text-input",
        "z": "5c14e0941d341b42",
        "d": true,
        "group": "a50d14b208aa0231",
        "name": "Email gebruiker",
        "label": "Email adres gebruiker",
        "order": 2,
        "width": "4",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "email",
        "tooltip": "",
        "delay": "2000",
        "passthru": false,
        "sendOnDelay": false,
        "sendOnBlur": true,
        "sendOnEnter": false,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 500,
        "y": 360,
        "wires": [
            [
                "210d4509be3e8c2a"
            ]
        ]
    },
    {
        "id": "0d14b59266171697",
        "type": "ui-text-input",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Tijd OK",
        "label": "Tijdstip melding sturen: \"ben je OK?\"",
        "order": 8,
        "width": "4",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "time",
        "tooltip": "",
        "delay": "2000",
        "passthru": false,
        "sendOnDelay": false,
        "sendOnBlur": true,
        "sendOnEnter": false,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 480,
        "y": 940,
        "wires": [
            [
                "9b36b60d6131042f"
            ]
        ]
    },
    {
        "id": "a2dcd0ec27b30c84",
        "type": "ui-text-input",
        "z": "5c14e0941d341b42",
        "d": true,
        "group": "a50d14b208aa0231",
        "name": "Mobiel gebruiker",
        "label": "06 nummer gebruiker",
        "order": 4,
        "width": "3",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "text",
        "tooltip": "",
        "delay": "2000",
        "passthru": false,
        "sendOnDelay": false,
        "sendOnBlur": true,
        "sendOnEnter": false,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 510,
        "y": 220,
        "wires": [
            [
                "4c76892a18484763"
            ]
        ]
    },
    {
        "id": "3f047118cb814e7f",
        "type": "ui-text-input",
        "z": "5c14e0941d341b42",
        "d": true,
        "group": "a50d14b208aa0231",
        "name": "IP adres",
        "label": "WIFI IP adres van deze telefoon",
        "order": 5,
        "width": "4",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "text",
        "tooltip": "",
        "delay": "500",
        "passthru": true,
        "sendOnDelay": false,
        "sendOnBlur": true,
        "sendOnEnter": false,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 340,
        "y": 680,
        "wires": [
            [
                "c7a30ab24c9ec224"
            ]
        ]
    },
    {
        "id": "163dbba3527a1208",
        "type": "ui-text-input",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Meldperiode",
        "label": "Melding sturen naar contacten na  (in min.)",
        "order": 11,
        "width": "4",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "number",
        "tooltip": "",
        "delay": 300,
        "passthru": false,
        "sendOnDelay": false,
        "sendOnBlur": true,
        "sendOnEnter": false,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 490,
        "y": 1060,
        "wires": [
            [
                "ec7010218631a22d"
            ]
        ]
    },
    {
        "id": "d1640933aa5790c8",
        "type": "ui-button",
        "z": "5c14e0941d341b42",
        "d": true,
        "group": "a50d14b208aa0231",
        "name": "Help IP",
        "label": "?",
        "order": 6,
        "width": "1",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 340,
        "y": 720,
        "wires": [
            [
                "21d5374db39f6f21"
            ]
        ]
    },
    {
        "id": "96d36014946018e2",
        "type": "ui-button",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Help Meldperiode",
        "label": "?",
        "order": 12,
        "width": "1",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 510,
        "y": 1120,
        "wires": [
            [
                "5cd5579edefbe928"
            ]
        ]
    },
    {
        "id": "aa21372c06ac99e6",
        "type": "ui-text",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "order": 13,
        "width": 0,
        "height": 0,
        "name": "lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payloads",
        "valueType": "msg",
        "x": 480,
        "y": 1260,
        "wires": []
    },
    {
        "id": "06e50d5277b96605",
        "type": "ui-text",
        "z": "5c14e0941d341b42",
        "d": true,
        "group": "a50d14b208aa0231",
        "order": 7,
        "width": 0,
        "height": 0,
        "name": "lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payloads",
        "valueType": "msg",
        "x": 480,
        "y": 540,
        "wires": []
    },
    {
        "id": "d79891686c8e66ba",
        "type": "ui-notification",
        "z": "5c14e0941d341b42",
        "d": true,
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": false,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Sluiten",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 910,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "f24ffaab884e5a75",
        "type": "ui-notification",
        "z": "5c14e0941d341b42",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": false,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Sluiten",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 910,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "996abe576c2cecb2",
        "type": "mqtt out",
        "z": "5c14e0941d341b42",
        "name": "",
        "topic": "IPAdressUser",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 900,
        "y": 620,
        "wires": []
    },
    {
        "id": "f487e19abb196edc",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Herinnering",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 1180,
        "wires": [
            []
        ]
    },
    {
        "id": "2825429d7e218b9b",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "Herinnering",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Herinnering",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 170,
        "y": 1180,
        "wires": [
            [
                "590a24117a7d6877"
            ]
        ]
    },
    {
        "id": "bdebfa0f1e99fc2e",
        "type": "link in",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "links": [
            "4abb19d96b88ba67"
        ],
        "x": 55,
        "y": 1180,
        "wires": [
            [
                "2825429d7e218b9b"
            ]
        ]
    },
    {
        "id": "eecb60f839dc5afc",
        "type": "ui-text-input",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Herinnering",
        "label": "Melding herhalen na (in minuten)",
        "order": 10,
        "width": "4",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "number",
        "tooltip": "",
        "delay": 300,
        "passthru": false,
        "sendOnDelay": true,
        "sendOnBlur": true,
        "sendOnEnter": false,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 490,
        "y": 1180,
        "wires": [
            [
                "f487e19abb196edc",
                "3d702f0ad5e3389a"
            ]
        ]
    },
    {
        "id": "590a24117a7d6877",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "5",
        "func": "if (msg.payload == null) {\n    msg.payload = 5;\n    global.set(\"Herinnering\", msg.payload);\n    node.status({ text: msg.payload });\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 1180,
        "wires": [
            [
                "eecb60f839dc5afc"
            ]
        ]
    },
    {
        "id": "4a202b76747eac9b",
        "type": "mqtt out",
        "z": "5c14e0941d341b42",
        "name": "",
        "topic": "TijdOKChanged",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 900,
        "y": 880,
        "wires": []
    },
    {
        "id": "5dd81c36547166d6",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "help tekst",
        "func": "msg.payload = \n\"<b>Vanaf dit moment ontvang je meldingen via de Bluetooth speaker met de vraag om te reageren in de app.</b>\" +\n\"<br></b><br>\" +\n\"<b>Echter al 2 uur voor dit tijdstip kan je in de app aangeven dat je OK bent. Je krijgt dan ook geen meldingen meer.</b><br>\";\n\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 840,
        "wires": [
            [
                "e5c27da5e10601ac"
            ]
        ]
    },
    {
        "id": "5574ceb8a61ddb47",
        "type": "ui-button",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Help tijd OK",
        "label": "?",
        "order": 9,
        "width": "1",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 490,
        "y": 840,
        "wires": [
            [
                "5dd81c36547166d6"
            ]
        ]
    },
    {
        "id": "e5c27da5e10601ac",
        "type": "ui-notification",
        "z": "5c14e0941d341b42",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": false,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Sluiten",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 910,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "21d5374db39f6f21",
        "type": "function",
        "z": "5c14e0941d341b42",
        "d": true,
        "name": "help tekst",
        "func": "msg.payload = \n\"<b>Het IP-adres van de WIFI verbinding van je telefoon wordt gebruikt om te zien of je in huis bent. \" +\n\"Als je niet thuis bent, ontvang je geen meldingen.</b>\" +\n\"<br></b><br>\" +\n\"<b>Het IP adres van je telefoon wordt automatisch ingevuld.</b>\"\n//\"<b>Dit IP-adres kan je vinden bij Instellingen op je telefoon. \" +\n//\"Voor ieder merk en type telefoon is dat anders.</b><br>\" +\n//\"<b>Het IP adres kan (bij uitzondering) veranderen!</b>\" + \n//\"<br></b><br>\" +\n//\"<b>Je kan het zo ongeveer vinden:</b><br>\"+\n//\"<b>1. Instellingen --> Verbindingen --> WIFI.</b><br>\" +\n//\"<b>2. Tik op het verbonden netwerk (of Instellingen daarnaast).</b><br>\" +\n//\"<b>3. Daar zie je ergens het IP-adres staan.</b>\" +\n//\"<br></b><br>\" +\n//\"<b>Voorbeeld van een IP-adres is: '192.168.2.68'.</b>\" +\n//\"<br></b><br>\";\n/*\n\"<b>Als blijkt dat je mobiel soms niet gedetecteerd wordt, \" + \n\" ga naar In.stellingen  Apps  (kies een app die altijd actief mag zijn, bv. Chrome)  Batterij  Onbeperkt</b><br>\";\n*/\n\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 720,
        "wires": [
            [
                "d79891686c8e66ba"
            ]
        ]
    },
    {
        "id": "8b7619373fc6f4a5",
        "type": "ui-button",
        "z": "5c14e0941d341b42",
        "d": true,
        "group": "a50d14b208aa0231",
        "name": "Help Email gebruiker",
        "label": "?",
        "order": 16,
        "width": "1",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 520,
        "y": 400,
        "wires": [
            [
                "6827ed79fcbc1bcc"
            ]
        ]
    },
    {
        "id": "cc825dfdb183c22b",
        "type": "ui-notification",
        "z": "5c14e0941d341b42",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": false,
        "color": "#175e03",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Sluiten",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 910,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "d2f2d7243a624cab",
        "type": "comment",
        "z": "5c14e0941d341b42",
        "name": "Weergave is altijd AM/PM",
        "info": "",
        "x": 650,
        "y": 900,
        "wires": []
    },
    {
        "id": "8432a47ba220719a",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "60",
        "func": "if (msg.payload == null) {\n    msg.payload = 60;\n    global.set(\"MeldPeriodeInMinuten\", msg.payload);\n    node.status({ text: '\"null: ' + msg.payload + '\"' });\n}        \nnode.status({ text: '\"' + msg.payload + '\"' });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 1060,
        "wires": [
            [
                "163dbba3527a1208"
            ]
        ]
    },
    {
        "id": "655933cca9c65716",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "09:00",
        "func": "if (msg.payload == null || msg.payload.trim() == \"\") { \n    msg.payload = \"09:00\";\n    global.set(\"TijdOK\", msg.payload);\n    node.status({ text: '\"was empty: ' + msg.payload + '\"' });\n}\nnode.status({ text: '\"' + msg.payload + '\"'});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 940,
        "wires": [
            [
                "0d14b59266171697"
            ]
        ]
    },
    {
        "id": "9b36b60d6131042f",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "Changed?",
        "func": "if (msg.payload != global.get(\"TijdOK\")) {\n    node.status({ text: \"'\"+ msg.payload + \"'\"});\n    return msg;\n}\nelse\n    return;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 940,
        "wires": [
            [
                "dba3182f449692bb",
                "4a202b76747eac9b",
                "9149cd1eac222f06"
            ]
        ]
    },
    {
        "id": "3d702f0ad5e3389a",
        "type": "mqtt out",
        "z": "5c14e0941d341b42",
        "name": "",
        "topic": "HerinneringChanged",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 920,
        "y": 1240,
        "wires": []
    },
    {
        "id": "6e34a944a7019b1e",
        "type": "mqtt out",
        "z": "5c14e0941d341b42",
        "name": "",
        "topic": "StateChanged",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 880,
        "y": 40,
        "wires": []
    },
    {
        "id": "f7e8d9c0b1a2",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "Get IP client",
        "func": "let ip = msg._client?.socketIp || \"???\";\nmsg.payload = ip;\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 640,
        "wires": [
            [
                "3f047118cb814e7f",
                "a18148e4e8946b3b"
            ]
        ]
    },
    {
        "id": "9260659255156c8a",
        "type": "ui-control",
        "z": "5c14e0941d341b42",
        "name": "",
        "ui": "6c1d30b5f16932dd",
        "events": "change",
        "x": 100,
        "y": 640,
        "wires": [
            [
                "f7e8d9c0b1a2"
            ]
        ]
    },
    {
        "id": "4c76892a18484763",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "Verify",
        "func": "node.status({ text: \"payload: \" + msg.payload });\n\nlet input  = msg.payload;\nif (input == undefined) return\n\n// Verwijder alles behalve cijfers en +\nlet cleaned = input.replace(/[^0-9+]/g, \"\");\n\n// Als het nummer met +31 begint  omzetten naar 06-formaat\nif (cleaned.startsWith(\"+31\")) {\n    cleaned = \"0\" + cleaned.slice(3);\n}\n\n// Als het nummer met 0031 begint  zelfde behandeling\nif (cleaned.startsWith(\"0031\")) {\n    cleaned = \"0\" + cleaned.slice(4);\n}\n\n// Nu moet het een 06-nummer zijn\nif (!/^06\\d{8}$/.test(cleaned)) {\n    return [null, msg]; // ongeldig nummer\n}\n\n// Normaliseer naar internationaal formaat\nconst internationaal = \"+31\" + cleaned.slice(1);\n\nmsg.payload = internationaal;\n\nreturn [msg, null];\n\n",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 280,
        "wires": [
            [
                "fa655697e3f1bd1d"
            ],
            [
                "7a10c185dade879d"
            ]
        ]
    },
    {
        "id": "7a10c185dade879d",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "Fout",
        "func": "msg.payload = \"<b>Ongeldig mobiel nummer: </b>\" + msg.payload;\n\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 280,
        "wires": [
            [
                "2d24583c1895d795"
            ]
        ]
    },
    {
        "id": "2d24583c1895d795",
        "type": "ui-notification",
        "z": "5c14e0941d341b42",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": false,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Sluiten",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 890,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "a18148e4e8946b3b",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "filter tailscale",
        "func": "node.status({ text: \"payload: \" + msg.payload });\nvar ip = msg.payload ?? \"\";\nif (!ip.startsWith(\"192\")) return;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 640,
        "wires": [
            [
                "996abe576c2cecb2",
                "a6fd027bc0be280d"
            ]
        ]
    },
    {
        "id": "31e438f9b2bacbbc",
        "type": "ui-button",
        "z": "5c14e0941d341b42",
        "d": true,
        "group": "a50d14b208aa0231",
        "name": "Stuur test email",
        "label": "Stuur test email",
        "order": 3,
        "width": "0",
        "height": "0",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 500,
        "y": 440,
        "wires": [
            [
                "ddec65595400ad5c",
                "307ad5a63392a6d1"
            ]
        ]
    },
    {
        "id": "307ad5a63392a6d1",
        "type": "mqtt out",
        "z": "5c14e0941d341b42",
        "name": "",
        "topic": "TestEmail",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 880,
        "y": 440,
        "wires": []
    },
    {
        "id": "3e9e63b840019cb1",
        "type": "ui-notification",
        "z": "5c14e0941d341b42",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": false,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Sluiten",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 910,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "ddec65595400ad5c",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "Info",
        "func": "msg.payload = \"<br></b><br>\" + \"Een test email is verstuurd naar \" + \nglobal.get(\"EmailGebruiker\") + \".\"\n+ \"</b>\";\n\nmsg.ui_update = {\n    raw: true,\n    position: \"center\",\n    displayTime: 10,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 500,
        "wires": [
            [
                "3e9e63b840019cb1"
            ]
        ]
    },
    {
        "id": "510ee11de8ea290e",
        "type": "subflow:cf9fd0d5cf32c35e",
        "z": "5c14e0941d341b42",
        "g": "2032f01a228fa872",
        "name": "",
        "x": 500,
        "y": 1340,
        "wires": [
            [
                "f97ccb1c541b62d5"
            ]
        ]
    },
    {
        "id": "4fba57d68d73f103",
        "type": "inject",
        "z": "5c14e0941d341b42",
        "g": "2032f01a228fa872",
        "name": "At  Startup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 1400,
        "wires": [
            [
                "e0d7567c11f14e80",
                "1738098239dd2b7a",
                "b872cbf54450bd69"
            ]
        ]
    },
    {
        "id": "e0d7567c11f14e80",
        "type": "function",
        "z": "5c14e0941d341b42",
        "g": "2032f01a228fa872",
        "name": "1",
        "func": "msg.payload = \"1\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 1340,
        "wires": [
            [
                "510ee11de8ea290e"
            ]
        ]
    },
    {
        "id": "5dce7c29609dbb18",
        "type": "subflow:cf9fd0d5cf32c35e",
        "z": "5c14e0941d341b42",
        "g": "2032f01a228fa872",
        "name": "",
        "x": 500,
        "y": 1400,
        "wires": [
            [
                "f97ccb1c541b62d5"
            ]
        ]
    },
    {
        "id": "1738098239dd2b7a",
        "type": "function",
        "z": "5c14e0941d341b42",
        "g": "2032f01a228fa872",
        "name": "2",
        "func": "msg.payload = \"2\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 1400,
        "wires": [
            [
                "5dce7c29609dbb18"
            ]
        ]
    },
    {
        "id": "fd98e8ea7582c78c",
        "type": "subflow:cf9fd0d5cf32c35e",
        "z": "5c14e0941d341b42",
        "g": "2032f01a228fa872",
        "name": "",
        "x": 500,
        "y": 1460,
        "wires": [
            [
                "f97ccb1c541b62d5"
            ]
        ]
    },
    {
        "id": "b872cbf54450bd69",
        "type": "function",
        "z": "5c14e0941d341b42",
        "g": "2032f01a228fa872",
        "name": "3",
        "func": "msg.payload = \"3\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 1460,
        "wires": [
            [
                "fd98e8ea7582c78c"
            ]
        ]
    },
    {
        "id": "ec7010218631a22d",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "Changed?",
        "func": "if (msg.payload != global.get(\"MeldPeriodeInMinuten\")) {\n    node.status({ text: \"'\"+ msg.payload + \"'\"});\n    return msg;\n}\nelse\n    return;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 1060,
        "wires": [
            [
                "f39bf68dcea766f2",
                "9149cd1eac222f06"
            ]
        ]
    },
    {
        "id": "9149cd1eac222f06",
        "type": "delay",
        "z": "5c14e0941d341b42",
        "name": "",
        "pauseType": "rate",
        "timeout": "1",
        "timeoutUnits": "hours",
        "rate": "1",
        "nbRateUnits": "10",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 560,
        "y": 1000,
        "wires": [
            [
                "32d4144c043af885"
            ]
        ]
    },
    {
        "id": "2611f5f157ea5d54",
        "type": "mqtt out",
        "z": "5c14e0941d341b42",
        "name": "",
        "topic": "OvertijdChanged",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 910,
        "y": 1000,
        "wires": []
    },
    {
        "id": "32d4144c043af885",
        "type": "delay",
        "z": "5c14e0941d341b42",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 730,
        "y": 1000,
        "wires": [
            [
                "2611f5f157ea5d54"
            ]
        ]
    },
    {
        "id": "4d02350771e9d97a",
        "type": "mqtt out",
        "z": "5c14e0941d341b42",
        "g": "2032f01a228fa872",
        "name": "",
        "topic": "ContactChanged",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 910,
        "y": 1400,
        "wires": []
    },
    {
        "id": "f97ccb1c541b62d5",
        "type": "function",
        "z": "5c14e0941d341b42",
        "g": "2032f01a228fa872",
        "name": "check empty",
        "func": "if (msg.payload == \"\") return null;\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu + \", '\" + msg.payload  + \"'\"});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 1400,
        "wires": [
            [
                "4d02350771e9d97a"
            ]
        ]
    },
    {
        "id": "5a792b79ee924fcc",
        "type": "inject",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "OnStart",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 600,
        "wires": [
            [
                "e677c617d3a5d29d"
            ]
        ]
    },
    {
        "id": "efef419a3cac5a8b",
        "type": "ui-button",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "group": "adc719ee09b9438b",
        "name": "Update",
        "label": "Update",
        "order": 7,
        "width": "2",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "buttonupdate",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 100,
        "y": 720,
        "wires": [
            [
                "6c2c688ef0fa2f63"
            ]
        ]
    },
    {
        "id": "eb3b563a66c69093",
        "type": "ui-text",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "group": "adc719ee09b9438b",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "About",
        "label": "De MiniSAHA app is bedoeld voor de alleenstaande oudere. Met deze app kan je instellen hoe laat je een melding wilt ontvangen op je Bluetooth speaker en/of telefoon om te controleren of het goed met je gaat. Mocht je niet binnen een bepaalde tijd reageren, dan ontvangt een andere persoon een email met de vraag om te kijken hoe het met je gaat.",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": true,
        "font": "",
        "fontSize": "18",
        "color": "#ffffff",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 610,
        "y": 100,
        "wires": []
    },
    {
        "id": "226a8c5bfb54aa32",
        "type": "ui-text",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "group": "adc719ee09b9438b",
        "order": 6,
        "width": "2",
        "height": "1",
        "name": "Versie",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 630,
        "y": 500,
        "wires": []
    },
    {
        "id": "38a6029999573c13",
        "type": "ui-text",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "group": "adc719ee09b9438b",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Auteur",
        "label": "Digidokters SONENBREUGELVERBINDT",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 630,
        "y": 380,
        "wires": []
    },
    {
        "id": "7640224f513f74de",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "command": "wget https://raw.githubusercontent.com/PauLL54/minisaha/main/version.txt",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "get version.txt",
        "x": 420,
        "y": 720,
        "wires": [
            [
                "44f8e182ea2d2fc3"
            ],
            [],
            []
        ]
    },
    {
        "id": "60d1d31d381e01eb",
        "type": "function",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "rm \\n",
        "func": "msg.payload = msg.payload.replace(/[\\r\\n]+/g, '');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 600,
        "wires": [
            [
                "940e764301d9d266",
                "95ed60f262f1803c"
            ]
        ]
    },
    {
        "id": "e677c617d3a5d29d",
        "type": "file in",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "current version",
        "filename": ".node-red/projects/MiniSAHA/version.txt",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 280,
        "y": 600,
        "wires": [
            [
                "60d1d31d381e01eb"
            ]
        ]
    },
    {
        "id": "940e764301d9d266",
        "type": "change",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "version",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "6f445b4448b59170",
        "type": "ui-text",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "group": "adc719ee09b9438b",
        "order": 8,
        "width": 0,
        "height": 0,
        "name": "Update msg",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 710,
        "y": 840,
        "wires": []
    },
    {
        "id": "95ed60f262f1803c",
        "type": "function",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "Versie:",
        "func": "msg.payload = \"Versie: \" + msg.payload;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 500,
        "wires": [
            [
                "226a8c5bfb54aa32"
            ]
        ]
    },
    {
        "id": "6c2c688ef0fa2f63",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "command": "rm version.txt*",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "rm old",
        "x": 270,
        "y": 720,
        "wires": [
            [
                "7640224f513f74de"
            ],
            [],
            []
        ]
    },
    {
        "id": "44f8e182ea2d2fc3",
        "type": "file in",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "latest",
        "filename": "version.txt",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 570,
        "y": 720,
        "wires": [
            [
                "5f841997def03bad"
            ]
        ]
    },
    {
        "id": "5f841997def03bad",
        "type": "function",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "rm \\n",
        "func": "msg.payload = msg.payload.replace(/[\\r\\n]+/g, '');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 720,
        "wires": [
            [
                "8341310a2e59ed53"
            ]
        ]
    },
    {
        "id": "2632771a765ce800",
        "type": "delay",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "45",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 380,
        "y": 880,
        "wires": [
            [
                "e91938bbca103b42"
            ]
        ]
    },
    {
        "id": "e91938bbca103b42",
        "type": "function",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "clear",
        "func": "msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 880,
        "wires": [
            [
                "6f445b4448b59170"
            ]
        ]
    },
    {
        "id": "8341310a2e59ed53",
        "type": "function",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "Update?",
        "func": "var current = global.get(\"version\");\nvar latest = msg.payload;\n\nnode.status({ fill: \"blue\", shape: \"ring\", \n    text: \"current: \" + current +\n    \", latest: \" + latest    });\n\nif (latest > current) {\n    var msg2 = { payload: \"Update wordt geinstalleerd...\"};\n    return [msg, msg2];\n}\nelse {\n    var msg2 = { payload: \"Geen nieuwere versie beschikbaar.\"};\n   return [null, msg2]; \n}\nreturn msg;",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 180,
        "y": 840,
        "wires": [
            [
                "d7ff5ad4b1b79918"
            ],
            [
                "2632771a765ce800",
                "6f445b4448b59170"
            ]
        ]
    },
    {
        "id": "1ad8ae65c31d2570",
        "type": "inject",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "OnStart",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 380,
        "y": 920,
        "wires": [
            [
                "e91938bbca103b42"
            ]
        ]
    },
    {
        "id": "da7b21ec87871d8c",
        "type": "catch",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 120,
        "y": 500,
        "wires": [
            [
                "4d1dba90ae296567",
                "3a750c7cbf887af3"
            ]
        ]
    },
    {
        "id": "4d1dba90ae296567",
        "type": "function",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "0000-00-00",
        "func": "msg.payload = \"0000-00-00\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 500,
        "wires": [
            [
                "95ed60f262f1803c",
                "940e764301d9d266"
            ]
        ]
    },
    {
        "id": "a1659a56c324e2cc",
        "type": "inject",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "At 00:00",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 660,
        "wires": [
            [
                "6c2c688ef0fa2f63"
            ]
        ]
    },
    {
        "id": "d706900fa126e361",
        "type": "ui-template",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "group": "",
        "page": "1dd0da4fdcd94089",
        "ui": "",
        "name": "CSS button",
        "order": 1,
        "width": 0,
        "height": 0,
        "head": "",
        "format": ".buttonupdate button {\n    font-size: 1.6em;\n}",
        "storeOutMessages": true,
        "passthru": true,
        "resendOnRefresh": true,
        "templateScope": "page:style",
        "className": "buttonupdate",
        "x": 110,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "template1",
        "type": "ui-template",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "group": "adc719ee09b9438b",
        "page": "",
        "ui": "",
        "name": "Afbeelding tonen",
        "order": 3,
        "width": "0",
        "height": "0",
        "format": "<template>\n    <div style=\"text-align:center;\">\n        <img src=\"/logo\" \n             style=\"max-width:40%; height:auto;\" \n             @click=\"send({payload: 'logo_clicked'})\" />\n    </div>\n</template>\n",
        "storeOutMessages": true,
        "passthru": true,
        "templateScope": "local",
        "className": "",
        "x": 650,
        "y": 180,
        "wires": [
            [
                "b6944b93af04a874"
            ]
        ]
    },
    {
        "id": "3a750c7cbf887af3",
        "type": "debug",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "catch all About",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 300,
        "y": 440,
        "wires": []
    },
    {
        "id": "b66ec02ddb299fb9",
        "type": "http in",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "name": "Get",
        "url": "/logo",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 180,
        "wires": [
            [
                "8ce06555f0c049ea"
            ]
        ]
    },
    {
        "id": "8ce06555f0c049ea",
        "type": "file in",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "name": "path Logo",
        "filename": ".node-red/projects/MiniSAHA/Logo.png",
        "filenameType": "str",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 300,
        "y": 180,
        "wires": [
            [
                "8d1f7a72eda8b85e"
            ]
        ]
    },
    {
        "id": "8d1f7a72eda8b85e",
        "type": "http response",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 430,
        "y": 180,
        "wires": []
    },
    {
        "id": "89c7af3d87bd6dfe",
        "type": "ui-text",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "group": "adc719ee09b9438b",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payloads",
        "valueType": "msg",
        "x": 620,
        "y": 140,
        "wires": []
    },
    {
        "id": "303fedb30576538b",
        "type": "inject",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 540,
        "wires": [
            [
                "4d1dba90ae296567"
            ]
        ]
    },
    {
        "id": "1eec94c61974cd1c",
        "type": "ui-control",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "name": "",
        "ui": "6c1d30b5f16932dd",
        "events": "all",
        "x": 620,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "b6944b93af04a874",
        "type": "function",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "name": "set page Tester",
        "func": "msg.payload = \"System\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 260,
        "wires": [
            [
                "1eec94c61974cd1c"
            ]
        ]
    },
    {
        "id": "b4cb292e1a70622c",
        "type": "comment",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "name": "Navigeer naar de Test pagina door op het logo te klikken",
        "info": "",
        "x": 240,
        "y": 100,
        "wires": []
    },
    {
        "id": "6a267aeb779eac08",
        "type": "comment",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "Update button en iedere nacht testen of een update nodig is",
        "info": "",
        "x": 260,
        "y": 400,
        "wires": []
    },
    {
        "id": "dff2dbca89ccfc06",
        "type": "ui-text",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "group": "adc719ee09b9438b",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payloads",
        "valueType": "msg",
        "x": 640,
        "y": 440,
        "wires": []
    },
    {
        "id": "inject1",
        "type": "inject",
        "z": "af31bf2fe058f803",
        "name": "Stuur testbericht",
        "props": [],
        "repeat": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 1760,
        "wires": [
            [
                "fn1"
            ]
        ]
    },
    {
        "id": "fn1",
        "type": "function",
        "z": "af31bf2fe058f803",
        "name": "Maak WhatsApp payload",
        "func": "//msg.phone = \"+31648729669\";   // jouw nummer\n//msg.apikey = \"3930698\";\n//msg.payload = \"Hallo Paul, dit is een test vanuit NodeRED!\";\n\nmsg.url = \"https://api.callmebot.com/whatsapp.php?phone=+31648729669&text=test+minisaha&apikey=3930698\"\nmsg.url = \"https://api.callmebot.com/phone.php?phone=+31648729669&text=phone+test+minisaha&apikey=3930698\"\nmsg.url = \"https://api.callmebot.com/whatsapp.php?phone=+31613207764&text=Kees+test+minisaha&apikey=3283377\"\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 1760,
        "wires": [
            [
                "7be1e3e3c5ead2f4"
            ]
        ]
    },
    {
        "id": "07af420f98d0e89a",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "sudo reboot",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "Reboot",
        "x": 780,
        "y": 1400,
        "wires": [
            [
                "e91938bbca103b42"
            ],
            [],
            []
        ]
    },
    {
        "id": "d7ff5ad4b1b79918",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "rm MiniSAHA.json",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "rm MiniSAHA.json",
        "x": 330,
        "y": 1140,
        "wires": [
            [
                "7a258c3a06322d6a",
                "27368f40feb169f4"
            ],
            [],
            []
        ]
    },
    {
        "id": "7a258c3a06322d6a",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "wget https://raw.githubusercontent.com/PauLL54/minisaha/main/MiniSAHA.json",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "get MiniSAHA.json",
        "x": 590,
        "y": 1140,
        "wires": [
            [
                "28228f40169db06d"
            ],
            [],
            []
        ]
    },
    {
        "id": "02d2ac26c698a195",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "cp -f version.txt version_test.txt  MiniSAHA_cred.json MiniSAHA.json Logo.png bluetooth.py .node-red/projects/MiniSAHA",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "Install all files",
        "x": 310,
        "y": 1460,
        "wires": [
            [
                "c4571cfee0924b57"
            ],
            [],
            []
        ]
    },
    {
        "id": "477a82641741c1d2",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "wget https://raw.githubusercontent.com/PauLL54/minisaha/main/Logo.png",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "get Logo.png",
        "x": 570,
        "y": 1300,
        "wires": [
            [
                "b119fd4598e51e41"
            ],
            [],
            []
        ]
    },
    {
        "id": "6ba99393e4c393d8",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "rm Logo.png",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "rm Logo.png",
        "x": 310,
        "y": 1300,
        "wires": [
            [
                "477a82641741c1d2"
            ],
            [],
            []
        ]
    },
    {
        "id": "28228f40169db06d",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "rm MiniSAHA_cred.json",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "rm MiniSAHA_cred.json",
        "x": 350,
        "y": 1220,
        "wires": [
            [
                "62cf14493c558309"
            ],
            [],
            []
        ]
    },
    {
        "id": "62cf14493c558309",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "wget https://raw.githubusercontent.com/PauLL54/minisaha/main/MiniSAHA_cred.json",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "get MiniSAHA_cred.json",
        "x": 610,
        "y": 1220,
        "wires": [
            [
                "6ba99393e4c393d8"
            ],
            [],
            []
        ]
    },
    {
        "id": "34d7ae63b33b2312",
        "type": "mqtt in",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "name": "",
        "topic": "Update",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 1080,
        "wires": [
            [
                "d7ff5ad4b1b79918"
            ]
        ]
    },
    {
        "id": "b119fd4598e51e41",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "rm bluetooth.py",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "rm bluetooth.py",
        "x": 320,
        "y": 1380,
        "wires": [
            [
                "05d5a950f617317c"
            ],
            [],
            []
        ]
    },
    {
        "id": "05d5a950f617317c",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "wget https://raw.githubusercontent.com/PauLL54/minisaha/main/bluetooth.py",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "get bluetooth.py",
        "x": 580,
        "y": 1380,
        "wires": [
            [
                "02d2ac26c698a195"
            ],
            [],
            []
        ]
    },
    {
        "id": "c4571cfee0924b57",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "chmod +x .node-red/projects/MiniSAHA/bluetooth.py",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "chmod +x",
        "x": 560,
        "y": 1460,
        "wires": [
            [
                "3dc33bd26ddfd0cd"
            ],
            [],
            []
        ]
    },
    {
        "id": "ba410ac8c1a26bad",
        "type": "comment",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "name": "Update procedure voor de gebruiker en tester",
        "info": "",
        "x": 430,
        "y": 1020,
        "wires": []
    },
    {
        "id": "363ef96aac78d4e7",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "wget https://raw.githubusercontent.com/PauLL54/minisaha/main/sounds/Goedemorgen.mp3",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "get sound",
        "x": 140,
        "y": 1560,
        "wires": [
            [
                "9328b12c82bcdb88"
            ],
            [],
            []
        ]
    },
    {
        "id": "9328b12c82bcdb88",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "cp -f Goedemorgen.mp3 .node-red/projects/MiniSAHA/sounds",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "Install sound",
        "x": 330,
        "y": 1560,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "3dc33bd26ddfd0cd",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "sudo systemctl restart nodered.service",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "Restart node-red",
        "x": 750,
        "y": 1460,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "b92aa98cbf16363f",
        "type": "inject",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 1020,
        "wires": [
            [
                "d7ff5ad4b1b79918"
            ]
        ]
    },
    {
        "id": "8032366086aa8de0",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "cd .node-red; npm install @flowfuse/node-red-dashboard@latest",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "install dashboard@latest",
        "x": 630,
        "y": 1560,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "e0d919a5c94f2160",
        "type": "mqtt out",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "name": "",
        "topic": "IPAdressUser",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 580,
        "y": 1080,
        "wires": []
    },
    {
        "id": "27368f40feb169f4",
        "type": "function",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "name": "Stop arping",
        "func": "if (typeof msg.payload !== \"object\" || msg.payload === null) {\n    msg.payload = {};\n}\n\nmsg.payload.stop = true;\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 1080,
        "wires": [
            [
                "e0d919a5c94f2160"
            ]
        ]
    },
    {
        "id": "316126531d74a6fc",
        "type": "comment",
        "z": "af31bf2fe058f803",
        "name": "https://api.callmebot.com/whatsapp.php?phone=[phone_number]&text=[message]&apikey=[your_apikey]",
        "info": "",
        "x": 390,
        "y": 1680,
        "wires": []
    },
    {
        "id": "7be1e3e3c5ead2f4",
        "type": "http request",
        "z": "af31bf2fe058f803",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "persist": false,
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 610,
        "y": 1760,
        "wires": [
            [
                "338d050289d11eeb"
            ]
        ]
    },
    {
        "id": "338d050289d11eeb",
        "type": "debug",
        "z": "af31bf2fe058f803",
        "name": "debug 3",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 780,
        "y": 1760,
        "wires": []
    },
    {
        "id": "5624329dd5cb5b0a",
        "type": "inject",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "OnStart",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 500,
        "wires": [
            [
                "97382ae72dc98a86"
            ]
        ]
    },
    {
        "id": "ac6f3d5c09bce733",
        "type": "ui-button",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "name": "Test update",
        "label": "Update",
        "order": 12,
        "width": "3",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "buttonupdate",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 130,
        "y": 600,
        "wires": [
            [
                "148566cf72b33e1a"
            ]
        ]
    },
    {
        "id": "29faaa6a019e0e9b",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "order": 11,
        "width": "4",
        "height": "1",
        "name": "Test versie",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 750,
        "y": 420,
        "wires": []
    },
    {
        "id": "6f0b74ba5a27cc3e",
        "type": "exec",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "command": "wget https://raw.githubusercontent.com/PauLL54/minisaha/main/version_test.txt",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "get version_test.txt",
        "x": 450,
        "y": 600,
        "wires": [
            [
                "98ddd266a3e4c998"
            ],
            [],
            []
        ]
    },
    {
        "id": "2c5db89378881214",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "rm \\n",
        "func": "msg.payload = msg.payload.replace(/[\\r\\n]+/g, '');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 500,
        "wires": [
            [
                "2d76e161b54a56ff",
                "e3e7c591d92d8d6d"
            ]
        ]
    },
    {
        "id": "97382ae72dc98a86",
        "type": "file in",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "current test version",
        "filename": ".node-red/projects/MiniSAHA/version_test.txt",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 310,
        "y": 500,
        "wires": [
            [
                "2c5db89378881214"
            ]
        ]
    },
    {
        "id": "2d76e161b54a56ff",
        "type": "change",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "version_test",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "8d171fe450c7a81f",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "order": 13,
        "width": 0,
        "height": 0,
        "name": "Update msg",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 750,
        "y": 740,
        "wires": []
    },
    {
        "id": "148566cf72b33e1a",
        "type": "exec",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "command": "rm version_test.txt",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "rm old",
        "x": 290,
        "y": 600,
        "wires": [
            [
                "6f0b74ba5a27cc3e"
            ],
            [],
            []
        ]
    },
    {
        "id": "98ddd266a3e4c998",
        "type": "file in",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "latest",
        "filename": "version_test.txt",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 610,
        "y": 600,
        "wires": [
            [
                "bce54c96101eb7b7"
            ]
        ]
    },
    {
        "id": "bce54c96101eb7b7",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "rm \\n",
        "func": "msg.payload = msg.payload.replace(/[\\r\\n]+/g, '');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 600,
        "wires": [
            [
                "59d5c77dc1dc2a60"
            ]
        ]
    },
    {
        "id": "db6b4ac55c770429",
        "type": "delay",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "",
        "pauseType": "delay",
        "timeout": "30",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 340,
        "y": 780,
        "wires": [
            [
                "aefcaf0124832705"
            ]
        ]
    },
    {
        "id": "aefcaf0124832705",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "clear",
        "func": "msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 780,
        "wires": [
            [
                "8d171fe450c7a81f"
            ]
        ]
    },
    {
        "id": "59d5c77dc1dc2a60",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "Update?",
        "func": "var current = global.get(\"version_test\");\nvar latest = msg.payload;\n\nnode.status({ fill: \"blue\", shape: \"ring\", \n    text: \"current: \" + current +\n    \", latest: \" + latest    });\n\nif (latest > current) {\n    var msg2 = { payload: \"Nieuwe test versie wordt geinstalleerd...\"};\n    return [msg, msg2];\n}\nelse {\n    var msg2 = { payload: \"Geen nieuwere test versie beschikbaar.\"};\n   return [null, msg2]; \n}\nreturn msg;",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 720,
        "wires": [
            [
                "b6d0686a4823c0c2"
            ],
            [
                "db6b4ac55c770429",
                "8d171fe450c7a81f"
            ]
        ]
    },
    {
        "id": "ca12465c285a07be",
        "type": "inject",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "OnStart",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 340,
        "y": 840,
        "wires": [
            [
                "aefcaf0124832705"
            ]
        ]
    },
    {
        "id": "6cdb9cd1a55cd9dd",
        "type": "catch",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 140,
        "y": 420,
        "wires": [
            [
                "5fe7d4a09964b635",
                "233943e79ec596cb"
            ]
        ]
    },
    {
        "id": "5fe7d4a09964b635",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "0000-00-00",
        "func": "msg.payload = \"0000-00-00\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 420,
        "wires": [
            [
                "2d76e161b54a56ff",
                "e3e7c591d92d8d6d"
            ]
        ]
    },
    {
        "id": "82ea9c0c0b1c8052",
        "type": "ui-template",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "",
        "page": "c5ea61b98d8ee55d",
        "ui": "",
        "name": "CSS button",
        "order": 1,
        "width": 0,
        "height": 0,
        "head": "",
        "format": ".buttonupdate button {\n    font-size: 1.6em;\n}",
        "storeOutMessages": true,
        "passthru": true,
        "resendOnRefresh": true,
        "templateScope": "page:style",
        "className": "buttonupdate",
        "x": 130,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "233943e79ec596cb",
        "type": "debug",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "catch all About",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 340,
        "y": 460,
        "wires": []
    },
    {
        "id": "e3e7c591d92d8d6d",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "Test versie:",
        "func": "msg.payload = \"Test versie: \" + msg.payload;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 420,
        "wires": [
            [
                "29faaa6a019e0e9b"
            ]
        ]
    },
    {
        "id": "b6d0686a4823c0c2",
        "type": "mqtt out",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "",
        "topic": "Update",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 420,
        "y": 700,
        "wires": []
    },
    {
        "id": "9c9d4e18a631cc15",
        "type": "subflow:7a37030e3e3276d9",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "",
        "env": [],
        "x": 580,
        "y": 1080,
        "wires": [
            [
                "849129e5cd170f06",
                "61806882e2c16761",
                "6ddc11d490af5fe8"
            ],
            [],
            [],
            [
                "d4aeaeaaba846f61"
            ]
        ]
    },
    {
        "id": "6ccc00486baecf9d",
        "type": "inject",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "At startup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.2",
        "topic": "",
        "payload": "4",
        "payloadType": "num",
        "x": 130,
        "y": 1160,
        "wires": [
            [
                "ebd1eb7739312b3d",
                "1029c725dc625feb"
            ]
        ]
    },
    {
        "id": "ebd1eb7739312b3d",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "IP adres & PingCount",
        "func": "var ipAddress = global.get(\"IP_Mobiel\");\nvar pingCount = msg.payload;\n\nmsg.payload = { IPAddress: ipAddress, PingCount: pingCount };\n\nnode.status({text: \"topic: \" + msg.topic + \"; \" +\nipAddress + \", pingCount: \" + pingCount });\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 1080,
        "wires": [
            [
                "9c9d4e18a631cc15"
            ]
        ]
    },
    {
        "id": "1029c725dc625feb",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "GebruikerIsAtHome=false",
        "func": "global.set(\"GebruikerIsAtHome\", false);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 1160,
        "wires": [
            []
        ]
    },
    {
        "id": "849129e5cd170f06",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "set global GebruikerIsAtHome",
        "func": "global.set(\"GebruikerIsAtHome\", (msg.payload == 1));\nnode.status({ fill: \"blue\", shape: \"ring\", text: (msg.payload == 1) ? \"thuis\" : \"niet thuis\" });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "30a234133bcbd597",
        "type": "comment",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "Precondition: sudo apt-get install arping !!!!!!!!!!!!!!!!!",
        "info": "",
        "x": 270,
        "y": 960,
        "wires": []
    },
    {
        "id": "fa66a05f8c746a83",
        "type": "inject",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "Na 10s",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "",
        "payload": "20",
        "payloadType": "num",
        "x": 130,
        "y": 1080,
        "wires": [
            [
                "ebd1eb7739312b3d"
            ]
        ]
    },
    {
        "id": "b0067e5db1bb638b",
        "type": "ui-chart",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "group": "b71c0e77d9debcfd",
        "name": "",
        "label": "",
        "order": 2,
        "chartType": "line",
        "category": "topic",
        "categoryType": "msg",
        "xAxisLabel": "",
        "xAxisProperty": "",
        "xAxisPropertyType": "timestamp",
        "xAxisType": "time",
        "xAxisFormat": "",
        "xAxisFormatType": "auto",
        "xmin": "",
        "xmax": "",
        "yAxisLabel": "",
        "yAxisProperty": "payload",
        "yAxisPropertyType": "msg",
        "ymin": "0",
        "ymax": "80",
        "bins": 10,
        "action": "append",
        "stackSeries": false,
        "pointShape": "circle",
        "pointRadius": 4,
        "showLegend": true,
        "removeOlder": "24",
        "removeOlderUnit": "3600",
        "removeOlderPoints": "1000",
        "colors": [
            "#04ff00",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#a347e1",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "textColor": [
            "#ffffff"
        ],
        "textColorDefault": false,
        "gridColor": [
            "#e5e5e5"
        ],
        "gridColorDefault": true,
        "width": "7",
        "height": "3",
        "className": "",
        "interpolation": "linear",
        "x": 880,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "3758cdea9d5d1d01",
        "type": "mqtt in",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "",
        "topic": "IPAdressUser",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 1000,
        "wires": [
            [
                "728339c56b6087ec"
            ]
        ]
    },
    {
        "id": "61806882e2c16761",
        "type": "mqtt out",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "",
        "topic": "PersoonThuis",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 800,
        "y": 980,
        "wires": []
    },
    {
        "id": "728339c56b6087ec",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "pingcount",
        "func": "node.status({ text: \"stop: \" + msg.payload.stop } );\n\nif (msg.payload.stop) msg.topic = \"stop\";\nmsg.payload = 4;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 260,
        "y": 1000,
        "wires": [
            [
                "ebd1eb7739312b3d",
                "bab0e09190007a04"
            ]
        ]
    },
    {
        "id": "9efaa0c2fd872693",
        "type": "exec",
        "z": "eb60a9ea21d42f29",
        "g": "d344da1eff713941",
        "command": "sudo shutdown -h now",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "Execute shutdown",
        "x": 550,
        "y": 1480,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "6d496dbb394b2888",
        "type": "exec",
        "z": "eb60a9ea21d42f29",
        "g": "d344da1eff713941",
        "command": "sudo reboot -f",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "Execute restart",
        "x": 540,
        "y": 1600,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "f1ad8f74c46f6314",
        "type": "ui-button",
        "z": "eb60a9ea21d42f29",
        "g": "d344da1eff713941",
        "group": "b71c0e77d9debcfd",
        "name": "Shutdown computer",
        "label": "Shutdown",
        "order": 14,
        "width": "3",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "PowerButton",
        "icon": "",
        "iconPosition": "left",
        "payload": "Shutdown...",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 160,
        "y": 1480,
        "wires": [
            [
                "9efaa0c2fd872693",
                "7ea37518e7e677d7"
            ]
        ]
    },
    {
        "id": "c8412ad60f0dd6e1",
        "type": "ui-button",
        "z": "eb60a9ea21d42f29",
        "g": "d344da1eff713941",
        "group": "b71c0e77d9debcfd",
        "name": "Restart computer",
        "label": "Restart",
        "order": 16,
        "width": "3",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "PowerButton",
        "icon": "",
        "iconPosition": "left",
        "payload": "Restarting...",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 150,
        "y": 1600,
        "wires": [
            [
                "6d496dbb394b2888",
                "7ea37518e7e677d7"
            ]
        ]
    },
    {
        "id": "ee5730149418dfeb",
        "type": "ui-template",
        "z": "eb60a9ea21d42f29",
        "g": "d344da1eff713941",
        "group": "",
        "page": "c5ea61b98d8ee55d",
        "ui": "",
        "name": "CSS button",
        "order": 1,
        "width": 0,
        "height": 0,
        "head": "",
        "format": ".PowerButton button {\n    font-size: 1.6em;\n}\n",
        "storeOutMessages": true,
        "passthru": true,
        "resendOnRefresh": true,
        "templateScope": "page:style",
        "className": "",
        "x": 130,
        "y": 1540,
        "wires": [
            []
        ]
    },
    {
        "id": "7b981f6f76e5f9f4",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "Model",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "style": true,
        "font": "",
        "fontSize": "20",
        "color": "#ffffff",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 730,
        "y": 60,
        "wires": []
    },
    {
        "id": "86822077eb192361",
        "type": "inject",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "At Startup 1",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 100,
        "wires": [
            [
                "b214b552d64a9c10"
            ]
        ]
    },
    {
        "id": "b214b552d64a9c10",
        "type": "exec",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "command": "cat /proc/cpuinfo",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 360,
        "y": 60,
        "wires": [
            [
                "e21cc1583323afc0"
            ],
            [],
            []
        ]
    },
    {
        "id": "e21cc1583323afc0",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "Model?",
        "func": "msg.payload = parseCpuInfo(msg.payload);\nglobal.set(\"RaspberryPiModel\", msg.payload);\nnode.status({ text: msg.payload });\nreturn msg;\n\nfunction parseCpuInfo(cpuinfo) {\n    // Extract the revision line\n    const revisionMatch = cpuinfo.match(/Revision\\s*:\\s*([0-9a-fA-F]+)/);\n    if (!revisionMatch) {\n        return \"\";\n    }\n\n    const revision = revisionMatch[1].toLowerCase();\n\n    // Mapping van revision codes naar modellen\n    const revisionMap = {\n        // --- Raspberry Pi 2 ---\n        \"a01041\": \"Raspberry Pi 2 Model B - revisie 1.1\",\n        // --- Raspberry Pi 3 ---\n        \"a02082\": \"Raspberry Pi 3 Model B\",\n        \"a22082\": \"Raspberry Pi 3 Model B (Sony)\",\n        \"a020d3\": \"Raspberry Pi 3 Model B+\",\n        \"a020a0\": \"Raspberry Pi Compute Module 3\",\n        \"a02100\": \"Raspberry Pi Compute Module 3+\",\n\n        // --- Raspberry Pi 4 ---\n        \"a03111\": \"Raspberry Pi 4 Model B (1GB)\",\n        \"a03115\": \"Raspberry Pi 4 Model B+ (1GB) Rev 1.5\",\n        \"b03111\": \"Raspberry Pi 4 Model B (2GB)\",\n        \"b03115\": \"Raspberry Pi 4 Model B (2GB) Rev 1.5\",\n        \"c03111\": \"Raspberry Pi 4 Model B (4GB)\",\n        \"d03114\": \"Raspberry Pi 4 Model B (8GB)\",\n\n        // --- Raspberry Pi 400 ---\n        \"c03130\": \"Raspberry Pi 400\",\n\n        // --- Raspberry Pi Compute Module 4 ---\n        \"a03140\": \"Raspberry Pi Compute Module 4\",\n        \"b03140\": \"Raspberry Pi Compute Module 4 (WiFi)\",\n        \"c03140\": \"Raspberry Pi Compute Module 4 (Lite)\",\n        \"d03140\": \"Raspberry Pi Compute Module 4 (WiFi + Lite)\",\n\n        // --- Raspberry Pi 5 ---\n        \"9023c0\": \"Raspberry Pi 5 (4GB)\",\n        \"a023c0\": \"Raspberry Pi 5 (8GB)\",\n        \"b023c0\": \"Raspberry Pi 5 (16GB)\",\n\n        // --- Raspberry Pi 5 Compute Module ---\n        \"c023c0\": \"Raspberry Pi Compute Module 5\",\n        \"d023c0\": \"Raspberry Pi Compute Module 5 Lite\"\n    };\n\n    const model = revisionMap[revision] || \"Onbekende revision: \" + revision;\n\nreturn model;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 60,
        "wires": [
            [
                "7b981f6f76e5f9f4"
            ]
        ]
    },
    {
        "id": "d17ee11b0c0d7512",
        "type": "exec",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "command": "free",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 330,
        "y": 280,
        "wires": [
            [
                "68b99b881506f9ef"
            ],
            [],
            []
        ]
    },
    {
        "id": "68b99b881506f9ef",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "Free/swapped",
        "func": "var output = msg.payload.split(\"\\n\");\n\nvar words1 = output[1].split(/[ ]+/);\nvar free = (words1[3] / 1000); \nmsg.payload = free.toFixed(0)  + \" kb\"; \n\nvar words2 = output[2].split(/[ ]+/);\nvar swapped = (words2[2] / 1000); \n\nvar swap = { payload: swapped + \" kb\"};\n\nreturn [msg, swap];",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 260,
        "wires": [
            [
                "0267af7c7471c4a5"
            ],
            [
                "c60a13f83d3ae000"
            ]
        ]
    },
    {
        "id": "0267af7c7471c4a5",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "order": 5,
        "width": "3",
        "height": "1",
        "name": "Free",
        "label": "Mem Free:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": true,
        "font": "",
        "fontSize": "18",
        "color": "#ffffff",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 730,
        "y": 240,
        "wires": []
    },
    {
        "id": "c60a13f83d3ae000",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "order": 7,
        "width": "3",
        "height": "1",
        "name": "Swapped",
        "label": "Swapped:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": true,
        "font": "",
        "fontSize": "18",
        "color": "#ffffff",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 740,
        "y": 280,
        "wires": []
    },
    {
        "id": "d7d28ff8.f76ba",
        "type": "inject",
        "z": "eb60a9ea21d42f29",
        "g": "878de3ac45928077",
        "name": "Every minute",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 1360,
        "wires": [
            [
                "a37b37d1.aad508",
                "d4dee740ac379f10"
            ]
        ]
    },
    {
        "id": "a37b37d1.aad508",
        "type": "exec",
        "z": "eb60a9ea21d42f29",
        "g": "878de3ac45928077",
        "command": "vcgencmd measure_temp",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "measure CPU temperature",
        "x": 400,
        "y": 1360,
        "wires": [
            [
                "ecc06f5.bc3d39"
            ],
            [],
            []
        ]
    },
    {
        "id": "ecc06f5.bc3d39",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "878de3ac45928077",
        "name": "Get value",
        "func": "let str = msg.payload\n\nmsg.payload = parseInt(str.substring(5, 9), 10);\nmsg.topic = \"CPU Temp\";\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 1360,
        "wires": [
            [
                "b0067e5db1bb638b"
            ]
        ]
    },
    {
        "id": "ea735d0.bb55da",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "878de3ac45928077",
        "name": "Get value",
        "func": "node.status({ text: msg.payload });\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = \"CPU load\";\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 1300,
        "wires": [
            [
                "b0067e5db1bb638b"
            ]
        ]
    },
    {
        "id": "7ea37518e7e677d7",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "d344da1eff713941",
        "group": "b71c0e77d9debcfd",
        "order": 17,
        "width": 0,
        "height": 0,
        "name": "status",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 510,
        "y": 1540,
        "wires": []
    },
    {
        "id": "6ddc11d490af5fe8",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "1 --> 80",
        "func": "msg.topic = global.get(\"IP_Mobiel\");\nif (msg.payload == 1) msg.payload = 80;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 1100,
        "wires": [
            [
                "b0067e5db1bb638b"
            ]
        ]
    },
    {
        "id": "d4dee740ac379f10",
        "type": "cpu",
        "z": "eb60a9ea21d42f29",
        "g": "878de3ac45928077",
        "name": "",
        "msgCore": false,
        "msgOverall": true,
        "msgArray": false,
        "msgTemp": false,
        "x": 350,
        "y": 1300,
        "wires": [
            [
                "ea735d0.bb55da"
            ]
        ]
    },
    {
        "id": "1ebd5fe3.2c7e8",
        "type": "inject",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "Every 10 min",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 300,
        "wires": [
            [
                "20a7391c.421bd6",
                "d17ee11b0c0d7512"
            ]
        ]
    },
    {
        "id": "20a7391c.421bd6",
        "type": "exec",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "command": "df",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 330,
        "y": 340,
        "wires": [
            [
                "eb861dab.4d428"
            ],
            [],
            []
        ]
    },
    {
        "id": "eb861dab.4d428",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "split usage",
        "func": "var output = msg.payload.split(\"\\n\");\nvar internalUse, internal1k;\n\nfor (let i = 0; i < output.length; ++i) {\n    var words = output[i].split(/[ ]+/);\n    if (words[0].includes(\"/dev/mmcblk0p2\")) \n    { \n        internal1k = getGb(words[1]) + \" Gb\";\n        internalUse = words[4];\n    }\n}\nreturn [\n    { payload: internal1k },\n    { payload: internalUse }\n]\n\nfunction getGb(blocks) {\n    var x = parseInt(blocks) / 100000;\n    x += 5;\n    x /= 10;\n    return Math.round(x);\n}",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 340,
        "wires": [
            [
                "1b9704b98c8415b8"
            ],
            [
                "bd83f7d9ca61f8a5"
            ]
        ]
    },
    {
        "id": "1b9704b98c8415b8",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "order": 8,
        "width": "3",
        "height": "1",
        "name": "Disk",
        "label": "Disk size:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": true,
        "font": "",
        "fontSize": "18",
        "color": "#ffffff",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 730,
        "y": 320,
        "wires": []
    },
    {
        "id": "bd83f7d9ca61f8a5",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "order": 10,
        "width": "3",
        "height": "1",
        "name": "Used",
        "label": "Disk used: ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": true,
        "font": "",
        "fontSize": "18",
        "color": "#ffffff",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 730,
        "y": 360,
        "wires": []
    },
    {
        "id": "318cd6b22f5d427b",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "State",
        "func": "msg.payload = global.get(\"currentState\");\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 120,
        "wires": [
            [
                "219feef2e9854abf"
            ]
        ]
    },
    {
        "id": "219feef2e9854abf",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "order": 3,
        "width": "5",
        "height": "1",
        "name": "State",
        "label": "State: ",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": true,
        "font": "",
        "fontSize": "18",
        "color": "#ffffff",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 730,
        "y": 120,
        "wires": []
    },
    {
        "id": "7bd46b965253598e",
        "type": "mqtt in",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "",
        "topic": "StateChanged",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 350,
        "y": 120,
        "wires": [
            [
                "318cd6b22f5d427b"
            ]
        ]
    },
    {
        "id": "2e00e63124f1b99e",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "order": 9,
        "width": "1",
        "height": "1",
        "name": "space",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": true,
        "font": "",
        "fontSize": "18",
        "color": "#ffffff",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 870,
        "y": 260,
        "wires": []
    },
    {
        "id": "67a6274754d23126",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "order": 6,
        "width": "1",
        "height": "1",
        "name": "space",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": true,
        "font": "",
        "fontSize": "18",
        "color": "#ffffff",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 870,
        "y": 340,
        "wires": []
    },
    {
        "id": "cf1713ef3eb3df85",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "d344da1eff713941",
        "group": "b71c0e77d9debcfd",
        "order": 15,
        "width": "1",
        "height": "1",
        "name": "space",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": true,
        "font": "",
        "fontSize": "18",
        "color": "#ffffff",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 270,
        "y": 1540,
        "wires": []
    },
    {
        "id": "210c0d3eb90c90fc",
        "type": "ui-button",
        "z": "eb60a9ea21d42f29",
        "group": "b71c0e77d9debcfd",
        "name": "Clear",
        "label": "Clear",
        "order": 4,
        "width": "2",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "buttonupdate",
        "icon": "",
        "iconPosition": "left",
        "payload": "[]",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 620.3333129882812,
        "y": 1198.333251953125,
        "wires": [
            [
                "b0067e5db1bb638b"
            ]
        ]
    },
    {
        "id": "bab0e09190007a04",
        "type": "trigger",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "",
        "op1": "",
        "op2": "20",
        "op1type": "nul",
        "op2type": "json",
        "duration": "10",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 430,
        "y": 1000,
        "wires": [
            [
                "ebd1eb7739312b3d"
            ]
        ]
    },
    {
        "id": "d4aeaeaaba846f61",
        "type": "debug",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "debug 1",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 720,
        "y": 1140,
        "wires": []
    },
    {
        "id": "0af8df52052ef366",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "get devices",
        "func": "msg.payload = 'echo -e \"devices\\nquit\" | bluetoothctl';\nmsg.payload = 'bluetoothctl devices';\nnode.status({ text: msg.payload });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 360,
        "wires": [
            [
                "a6248e8d64acb74f"
            ]
        ]
    },
    {
        "id": "a6248e8d64acb74f",
        "type": "exec",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "bluetoothctl",
        "x": 510,
        "y": 360,
        "wires": [
            [
                "43862d3b661a9960"
            ],
            [],
            []
        ]
    },
    {
        "id": "43862d3b661a9960",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "mac/name",
        "func": "let str = Buffer.from(msg.payload).toString(\"utf8\");\nlet clean = stripAnsi(str);\n\nlet results = [];\nconst regex = /Device\\s+([0-9A-F:]{17})\\s+(.+)/gi;\nlet matches = clean.matchAll(regex);\n\nfor (const m of matches) {\n    results.push({\n        mac: m[1],\n        name: m[2]\n    });\n}\nmsg.devices = results;\n\nreturn msg;\n\nfunction stripAnsi(str) {\n    return str.replace(/\\x1B\\[[0-9;]*[A-Za-z]/g, '');\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 360,
        "wires": [
            [
                "070ce4d9b1f1776d"
            ]
        ]
    },
    {
        "id": "070ce4d9b1f1776d",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "get status",
        "func": "let devices = msg.devices;\nif (Array.isArray(devices) && devices.length === 0) {\n    node.status({ text: \"geen devices gekoppeld\" });\n    msg.payload = \"bluetoothctl quit\";    \n    return msg;\n}\n\nlet cmd = \"\";\nfor (const device of devices) {\n    cmd += \"bluetoothctl info \" + device.mac + \";\";\n}\nmsg.payload = cmd;\nnode.status({ text: \"bluetoothctl info\"  });\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 440,
        "wires": [
            [
                "f5c783e435202cc2"
            ]
        ]
    },
    {
        "id": "f5c783e435202cc2",
        "type": "exec",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "bluetoothctl",
        "x": 510,
        "y": 440,
        "wires": [
            [
                "e110dd782e4ed389"
            ],
            [],
            []
        ]
    },
    {
        "id": "e110dd782e4ed389",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "Connected?",
        "func": "let devices = [];\n\nif (msg.payload == \"\") {\n    global.set(\"BluetoothConnected\", \"no\");\n    global.set(\"BluetoothPaired\", \"no\");\n    global.set(\"BluetoothConnectedName\", \"\");\n    node.status({ text: \"payload empty\" });\n    msg.payload = devices;\n    return msg;\n}\n\nconst text = msg.payload;\nnode.status({ text: text });\nconst blocks = text.split(/(?=Device\\s+[0-9A-F:]{17})/gi);\n\nfor (const block of blocks) {\n    // MAC-adres\n    const macMatch = block.match(/Device\\s+([0-9A-F:]{17})/i);\n    if (!macMatch) continue;\n\n    // Naam\n    const nameMatch = block.match(/Name:\\s*(.+)/i);\n    const name = nameMatch ? nameMatch[1].trim() : null;\n\n    // Paired-status\n    const pairedMatch = block.match(/Paired:\\s*(yes|no)/i);\n    const paired = pairedMatch ? pairedMatch[1].toLowerCase() : null;\n\n    // Connected-status\n    const connMatch = block.match(/Connected:\\s*(yes|no)/i);\n    const connected = connMatch ? connMatch[1].toLowerCase() : null;\n\n    if (paired == \"yes\") {\n        devices.push({\n            mac: macMatch[1],\n            name,\n            paired,\n            connected\n        });\n    }\n\n    if (connected == \"yes\") {\n        node.status({ text: \"Connected: \" + name });\n        global.set(\"BluetoothMac\", macMatch[1]);\n        global.set(\"BluetoothConnectedName\", name);\n        global.set(\"BluetoothPaired\", paired);\n        global.set(\"BluetoothConnected\", connected);\n    }\n    else {\n        if (name == global.get(\"BluetoothConnectedName\")) {\n            global.set(\"BluetoothPaired\", paired);\n            global.set(\"BluetoothConnected\", connected);\n        }\n    }\n}\n\nmsg.payload = devices;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 440,
        "wires": [
            [
                "7f1c6a83901d3d23",
                "fb880435a67662bc"
            ]
        ]
    },
    {
        "id": "d3ac11cb5dc0efbc",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "kill",
        "func": "msg.kill = \"SIGTERM\";   // of \"SIGKILL\", \"SIGINT\", etc.\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 1400,
        "wires": [
            [
                "d611838783d29255",
                "c4556470956a2dd7"
            ]
        ]
    },
    {
        "id": "c4bdb95a0f7c3226",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "start",
        "func": "if (msg.topic == \"$pageview\" && \n    msg.payload.page.name == \"Bluetooth\") {\n\n    var tijd_nu = global.get(\"getTime\")();\n    node.status({ text: tijd_nu });\n    return msg;\n}\nelse return null;\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 250,
        "y": 160,
        "wires": [
            [
                "04ad4a712d3067e5"
            ]
        ]
    },
    {
        "id": "36e8febe859fd540",
        "type": "ui-event",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "ui": "6c1d30b5f16932dd",
        "name": "",
        "x": 90,
        "y": 200,
        "wires": [
            [
                "c4bdb95a0f7c3226",
                "480d9f15b0563c9c"
            ]
        ]
    },
    {
        "id": "04ad4a712d3067e5",
        "type": "trigger",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "Repeat 10s",
        "op1": "Status Bluetooth devices",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "5",
        "extend": false,
        "overrideDelay": true,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 410,
        "y": 220,
        "wires": [
            [
                "0af8df52052ef366"
            ],
            [
                "7463d453bcf5cff1"
            ]
        ]
    },
    {
        "id": "480d9f15b0563c9c",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "reset",
        "func": "if (msg.topic == \"$pageleave\" && \n    msg.payload.page.name == \"Bluetooth\") {\n        msg.reset = true;\n        return msg;\n    }\nelse \n    return null;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 250,
        "y": 220,
        "wires": [
            [
                "04ad4a712d3067e5"
            ]
        ]
    },
    {
        "id": "7463d453bcf5cff1",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "loop back",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 140,
        "wires": [
            [
                "04ad4a712d3067e5"
            ]
        ]
    },
    {
        "id": "df6e998b6d564fcf",
        "type": "inject",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "Startup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 360,
        "wires": [
            [
                "0af8df52052ef366"
            ]
        ]
    },
    {
        "id": "d611838783d29255",
        "type": "exec",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "command": ".node-red/projects/MiniSAHA/bluetooth.py",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "Pair & Connect",
        "x": 520,
        "y": 1140,
        "wires": [
            [
                "6054eae0fe0bbb10"
            ],
            [],
            []
        ]
    },
    {
        "id": "4d4f78505bcbf29e",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "Mogelijk?",
        "func": "msg.payload = global.get(\"BluetoothName\");\nif (msg.payload === undefined) { msg.payload = \"\"; }\nif (msg.payload == \"\") {\n    msg.payload = \"Vul eerst de naam in van de Bluetooth speaker...\";\n    node.status({ text: msg.payload });\n    return [null, msg];\n}\n\nmsg.payload = '\"' + msg.payload + '\"';\n\n\nlet bluetoothConnectedName = global.get(\"BluetoothConnectedName\");\nif (bluetoothConnectedName === undefined) { bluetoothConnectedName = \"\"; }\n\nlet connected = global.get(\"BluetoothConnected\");\nif (connected === undefined) { connected = \"no\"; }\n\nif (bluetoothConnectedName != \"\" && connected != \"yes\") {\n        msg.payload = \"Zet speaker aan of verwijder deze eerst.\";\n        node.status({ text: msg.payload });\n        return [null, msg];\n }\n\nif (bluetoothConnectedName != \"\" && connected == \"yes\") {\n    msg.payload = \"Verwijder eerst \" + bluetoothConnectedName;\n        node.status({ text: msg.payload });\n        return [null, msg];\n }\n\nnode.status({ text: \"Connect \" + msg.payload });\nreturn [msg, null];\n",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 1280,
        "wires": [
            [
                "ad04926aacf33a5d",
                "d611838783d29255",
                "57fcf6eca0a141e9",
                "83cf6cdbc048f7cf"
            ],
            [
                "988de3a578461499"
            ]
        ]
    },
    {
        "id": "6c320f8b9fa94d70",
        "type": "ui-button",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "group": "549f1fa0e59e6a04",
        "name": "",
        "label": "Voeg toe",
        "order": 7,
        "width": "2",
        "height": "2",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "Bluetooth",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 180,
        "y": 1280,
        "wires": [
            [
                "4d4f78505bcbf29e"
            ]
        ]
    },
    {
        "id": "f5960bb1164b1dbb",
        "type": "ui-text-input",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "group": "549f1fa0e59e6a04",
        "name": "Zoek op naam",
        "label": "Zoek op (gedeelte van) naam",
        "order": 5,
        "width": "3",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "text",
        "tooltip": "",
        "delay": 300,
        "passthru": true,
        "sendOnDelay": false,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 700,
        "y": 980,
        "wires": [
            [
                "e265ce7aeafc81cf"
            ]
        ]
    },
    {
        "id": "e265ce7aeafc81cf",
        "type": "change",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "BluetoothName",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "a382f332dd3ab477",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "set BluetoothName",
        "func": "if (msg.payload == null) msg.payload = \"Speaker\";\nglobal.set(\"BluetoothName\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 980,
        "wires": [
            [
                "f5960bb1164b1dbb"
            ]
        ]
    },
    {
        "id": "20aee768ba9e2512",
        "type": "change",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "BluetoothName",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "BluetoothName",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 980,
        "wires": [
            [
                "a382f332dd3ab477"
            ]
        ]
    },
    {
        "id": "17b078a9c4215d63",
        "type": "inject",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "At Startup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 980,
        "wires": [
            [
                "20aee768ba9e2512"
            ]
        ]
    },
    {
        "id": "c8459650666a969b",
        "type": "ui-text",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "group": "549f1fa0e59e6a04",
        "order": 9,
        "width": "0",
        "height": "0",
        "name": "progress",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 1000,
        "y": 1260,
        "wires": []
    },
    {
        "id": "b6db4fba6aab59b3",
        "type": "ui-button",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "group": "549f1fa0e59e6a04",
        "name": "",
        "label": "Annuleer",
        "order": 8,
        "width": "2",
        "height": "2",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "Bluetooth",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 180,
        "y": 1400,
        "wires": [
            [
                "d3ac11cb5dc0efbc"
            ]
        ]
    },
    {
        "id": "ad04926aacf33a5d",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "Scanning...",
        "func": "msg.payload = \"Nog steeds aan het zoeken naar '\" + \n    global.get(\"BluetoothName\") + \n    \"'...\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 1260,
        "wires": [
            [
                "c8459650666a969b"
            ]
        ]
    },
    {
        "id": "25b2f4f138e92a11",
        "type": "delay",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 840,
        "y": 1340,
        "wires": [
            [
                "6ab57893a1727021"
            ]
        ]
    },
    {
        "id": "6ab57893a1727021",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "clear",
        "func": "msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 990,
        "y": 1340,
        "wires": [
            [
                "c8459650666a969b"
            ]
        ]
    },
    {
        "id": "9a9cc08da2b8ef61",
        "type": "ui-text",
        "z": "ce724907bfebf75c",
        "d": true,
        "g": "04fd012f1107245e",
        "group": "549f1fa0e59e6a04",
        "order": 3,
        "width": "5",
        "height": "1",
        "name": "Lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 130,
        "y": 1480,
        "wires": []
    },
    {
        "id": "d1c5073f0e9b7976",
        "type": "inject",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "At Startup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 830,
        "y": 1400,
        "wires": [
            [
                "6ab57893a1727021"
            ]
        ]
    },
    {
        "id": "6054eae0fe0bbb10",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "Verbonden",
        "func": "if (msg.payload == \"\") return null;\n\nmsg.payload = \"Verbonden\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 1220,
        "wires": [
            [
                "c9aa4babb452e660",
                "70b734ee6121d475"
            ]
        ]
    },
    {
        "id": "f1aeced22e9fa07f",
        "type": "link in",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "connected",
        "links": [
            "c9aa4babb452e660",
            "c307ebad62357506",
            "88950e4db6177323"
        ],
        "x": 165,
        "y": 400,
        "wires": [
            [
                "0af8df52052ef366"
            ]
        ]
    },
    {
        "id": "c9aa4babb452e660",
        "type": "link out",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "connected",
        "mode": "link",
        "links": [
            "f1aeced22e9fa07f"
        ],
        "x": 805,
        "y": 1220,
        "wires": []
    },
    {
        "id": "c86740ad60f14028",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "geannuleerd",
        "func": "msg.payload = \"Scanning geannuleerd.\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 1400,
        "wires": [
            [
                "70b734ee6121d475"
            ]
        ]
    },
    {
        "id": "c4556470956a2dd7",
        "type": "delay",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "delay 0.1",
        "pauseType": "delay",
        "timeout": "100",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 480,
        "y": 1400,
        "wires": [
            [
                "c86740ad60f14028"
            ]
        ]
    },
    {
        "id": "988de3a578461499",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "fout bericht",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 1300,
        "wires": [
            [
                "70b734ee6121d475"
            ]
        ]
    },
    {
        "id": "70b734ee6121d475",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "join",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 1280,
        "wires": [
            [
                "c8459650666a969b",
                "25b2f4f138e92a11",
                "5376b97a3fa53370"
            ]
        ]
    },
    {
        "id": "dc7a07b385d309ec",
        "type": "ui-text",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "group": "549f1fa0e59e6a04",
        "order": 4,
        "width": "5",
        "height": "1",
        "name": "Lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 310,
        "y": 1480,
        "wires": []
    },
    {
        "id": "620e6a6d64aff30d",
        "type": "ui-button",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "group": "549f1fa0e59e6a04",
        "name": "Help naam",
        "label": "?",
        "order": 6,
        "width": "1",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "Bluetooth",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 690,
        "y": 920,
        "wires": [
            [
                "3edb32cf296b125f",
                "c307ebad62357506"
            ]
        ]
    },
    {
        "id": "3edb32cf296b125f",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "help tekst",
        "func": "msg.payload = \n\"<b>De Bluetooth speaker moet in de buurt (< 10 m) van het meegeleverde computertje staan. \" + \n\"<br><br>\" +\n\"Zorg dat er altijd een netadapter is aangesloten!\" +\n\"<br><br>\" +\n\"De naam van de Bluetooth speaker vind je in de handleiding. Bijvoorbeeld: HEMA BT Speaker.\" +\n\"<br><br>\" +\n\"Je hoeft maar een gedeelte van de naam op te geven. Bijvoorbeeld: speaker.\" +\n\"<br><br>\" +\n\"Als de speaker niet in de koppelmodus komt (knipperen blauwe LED), geef dan een harde reset: \" +\n\"<br>\" +\n\"1.\tZet de speaker uit.\"+ \n\"<br>\" +\n\"2.\tHoud Power + Volume- tegelijk ingedrukt voor 10 seconden.\" +\n\"<br>\" +\n\"3.\tWacht op een apart geluid: dat is de reset.\" +\n\"<br><br>\" +\n\"Je kan maar 1 apparaat tegelijk koppelen. Dus als je een nieuw apparaat wil koppelen, moet je eerst de oude verwijderen.</b><br>\";;\n\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 920,
        "wires": [
            [
                "1314c5376597aa78"
            ]
        ]
    },
    {
        "id": "1314c5376597aa78",
        "type": "ui-notification",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": false,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Sluiten",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 1010,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "a1e2f6d090e5529d",
        "type": "comment",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "Toon automatisch (wanneer de pagina getoond wordt) of via een button wat de status is",
        "info": "",
        "x": 340,
        "y": 60,
        "wires": []
    },
    {
        "id": "a9b3d569ef1ff64c",
        "type": "comment",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "Verbinden met een nieuw apparaat",
        "info": "",
        "x": 200,
        "y": 880,
        "wires": []
    },
    {
        "id": "fd7a048b60fd40cc",
        "type": "comment",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "Bij een Deploy van de code werkt ui-event niet meer (bug)",
        "info": "",
        "x": 250,
        "y": 100,
        "wires": []
    },
    {
        "id": "861d995a8063ca2d",
        "type": "comment",
        "z": "ce724907bfebf75c",
        "g": "e2e84e52f82b08ea",
        "name": "https://pixabay.com/nl/music/search/ringtones/",
        "info": "",
        "x": 350,
        "y": 740,
        "wires": []
    },
    {
        "id": "43f0b3674c4fcca2",
        "type": "ui-button",
        "z": "ce724907bfebf75c",
        "g": "e2e84e52f82b08ea",
        "group": "549f1fa0e59e6a04",
        "name": "",
        "label": "Beheer meldingsgeluiden",
        "order": 11,
        "width": "6",
        "height": "2",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "Bluetooth",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 150,
        "y": 700,
        "wires": [
            [
                "a3da71f32673dfd7"
            ]
        ]
    },
    {
        "id": "a3da71f32673dfd7",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "e2e84e52f82b08ea",
        "name": "set page Beheer",
        "func": "msg.payload = \"Meldingsgeluiden\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 700,
        "wires": [
            [
                "e68d3d081a706fa9"
            ]
        ]
    },
    {
        "id": "e68d3d081a706fa9",
        "type": "ui-control",
        "z": "ce724907bfebf75c",
        "g": "e2e84e52f82b08ea",
        "name": "",
        "ui": "6c1d30b5f16932dd",
        "events": "all",
        "x": 580,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "c307ebad62357506",
        "type": "link out",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "connected",
        "mode": "link",
        "links": [
            "f1aeced22e9fa07f"
        ],
        "x": 795,
        "y": 860,
        "wires": []
    },
    {
        "id": "5cc978ea4ecbc645",
        "type": "inject",
        "z": "ce724907bfebf75c",
        "g": "60ad4210945ee21b",
        "name": "Test",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 1620,
        "wires": [
            [
                "ff366fd337c467c0"
            ]
        ]
    },
    {
        "id": "ff366fd337c467c0",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "60ad4210945ee21b",
        "name": "get devices",
        "func": "msg.payload = 'echo -e \"devices\\nquit\" | bluetoothctl';\nmsg.payload = 'bluetoothctl devices';\nnode.status({ text: msg.payload });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 1580,
        "wires": [
            [
                "cfd932930dd93210"
            ]
        ]
    },
    {
        "id": "cfd932930dd93210",
        "type": "exec",
        "z": "ce724907bfebf75c",
        "g": "60ad4210945ee21b",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "bluetoothctl",
        "x": 490,
        "y": 1580,
        "wires": [
            [
                "d42d6d21de99e695"
            ],
            [],
            []
        ]
    },
    {
        "id": "d42d6d21de99e695",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "60ad4210945ee21b",
        "name": "mac/name",
        "func": "let str = Buffer.from(msg.payload).toString(\"utf8\");\nlet clean = stripAnsi(str);\n\nlet results = [];\nconst regex = /Device\\s+([0-9A-F:]{17})\\s+(.+)/gi;\nlet matches = clean.matchAll(regex);\n\nfor (const m of matches) {\n    results.push({\n        mac: m[1],\n        name: m[2]\n    });\n}\nmsg.devices = results;\n\nreturn msg;\n\nfunction stripAnsi(str) {\n    return str.replace(/\\x1B\\[[0-9;]*[A-Za-z]/g, '');\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 1580,
        "wires": [
            [
                "74471f8973fa3f53"
            ]
        ]
    },
    {
        "id": "74471f8973fa3f53",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "60ad4210945ee21b",
        "name": "get status",
        "func": "let devices = msg.devices;\nif (Array.isArray(devices) && devices.length === 0) {\n    node.status({ text: \"geen devices gekoppeld\" });\n    msg.payload = \"bluetoothctl quit\";    \n    return msg;\n}\n\nlet cmd = \"\";\nfor (const device of devices) {\n    cmd += \"bluetoothctl info \" + device.mac + \";\";\n}\nmsg.payload = cmd;\nnode.status({ text: \"bluetoothctl info\"  });\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 1660,
        "wires": [
            [
                "160f121d5fcc4c61"
            ]
        ]
    },
    {
        "id": "160f121d5fcc4c61",
        "type": "exec",
        "z": "ce724907bfebf75c",
        "g": "60ad4210945ee21b",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "bluetoothctl",
        "x": 490,
        "y": 1660,
        "wires": [
            [
                "27b9c9425c9e0b64"
            ],
            [],
            []
        ]
    },
    {
        "id": "27b9c9425c9e0b64",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "60ad4210945ee21b",
        "name": "Connected?",
        "func": "let devices = [];\n\nconst text = msg.payload;\nnode.status({ text: text });\nconst blocks = text.split(/(?=Device\\s+[0-9A-F:]{17})/gi);\n\nfor (const block of blocks) {\n    // MAC-adres\n    const macMatch = block.match(/Device\\s+([0-9A-F:]{17})/i);\n    if (!macMatch) continue;\n\n    // Naam\n    const nameMatch = block.match(/Name:\\s*(.+)/i);\n    const name = nameMatch ? nameMatch[1].trim() : null;\n\n    // Paired-status\n    const pairedMatch = block.match(/Paired:\\s*(yes|no)/i);\n    const paired = pairedMatch ? pairedMatch[1].toLowerCase() : null;\n\n    // Connected-status\n    const connMatch = block.match(/Connected:\\s*(yes|no)/i);\n    const connected = connMatch ? connMatch[1].toLowerCase() : null;\n\n    //if (paired == \"yes\") {\n        devices.push({\n            mac: macMatch[1],\n            name,\n            paired,\n            connected\n        });\n    //}\n\n}\n\nmsg.payload = devices;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 1660,
        "wires": [
            [
                "4e5fc9ecbb91f9da"
            ]
        ]
    },
    {
        "id": "c297539a80312066",
        "type": "exec",
        "z": "ce724907bfebf75c",
        "g": "60ad4210945ee21b",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "bluetoothctl",
        "x": 670,
        "y": 1760,
        "wires": [
            [
                "88950e4db6177323"
            ],
            [],
            []
        ]
    },
    {
        "id": "4e5fc9ecbb91f9da",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "60ad4210945ee21b",
        "name": "remove device",
        "func": "let devices = msg.payload;   \n\ndevices.forEach(device => {\n    node.send({ payload: \"bluetoothctl remove \" + device.mac });\n});\n\n// Zorg dat de function node zelf niet nog een extra msg terugstuurt\nreturn null;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 1760,
        "wires": [
            [
                "c297539a80312066"
            ]
        ]
    },
    {
        "id": "a11e0dd251eb5940",
        "type": "ui-button",
        "z": "ce724907bfebf75c",
        "g": "60ad4210945ee21b",
        "group": "549f1fa0e59e6a04",
        "name": "Clear BT",
        "label": "Verwijder apparaten",
        "order": 2,
        "width": "0",
        "height": "0",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "Bluetooth",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 120,
        "y": 1580,
        "wires": [
            [
                "ff366fd337c467c0"
            ]
        ]
    },
    {
        "id": "88950e4db6177323",
        "type": "link out",
        "z": "ce724907bfebf75c",
        "g": "60ad4210945ee21b",
        "name": "connected",
        "mode": "link",
        "links": [
            "f1aeced22e9fa07f"
        ],
        "x": 805,
        "y": 1760,
        "wires": []
    },
    {
        "id": "7f1c6a83901d3d23",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "Toon speaker verbonden",
        "func": "if (msg.payload.length == 0) {\n    global.set(\"BluetoothConnected\", \"no\");\n    global.set(\"BluetoothConnectedName\", \"\");\n    global.set(\"BluetoothMac\", \"\");\n    global.set(\"BluetoothPaired\", \"\");\n    msg.payload = \"Geen apparaat verbonden.\";\n    return msg;\n}\n\nlet device = msg.payload[0];\nglobal.set(\"BluetoothConnectedName\", device.name);\n\nmsg.payload = device.name + \"  -  Verbonden: \" \n    + (device.connected == \"yes\" ? \"ja\" : \"nee\");\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 520,
        "wires": [
            [
                "944d64652bbfdc85"
            ]
        ]
    },
    {
        "id": "944d64652bbfdc85",
        "type": "ui-text",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "group": "549f1fa0e59e6a04",
        "order": 1,
        "width": "5",
        "height": "1",
        "name": "Bluetooth device",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 690,
        "y": 520,
        "wires": []
    },
    {
        "id": "95623e89ea0e68bb",
        "type": "ui-template",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "group": "",
        "page": "e9d32d9d636d4a34",
        "ui": "",
        "name": "CSS button",
        "order": 1,
        "width": 0,
        "height": 0,
        "head": "",
        "format": ".Bluetooth button {\n    font-size: 1.6em;\n}\n",
        "storeOutMessages": true,
        "passthru": true,
        "resendOnRefresh": true,
        "templateScope": "page:style",
        "className": "Bluetooth",
        "x": 130,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "fb880435a67662bc",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "Niet verbonden?",
        "func": "if (msg.payload.length == 0) {\n    msg.payload = \"no\";\n    return msg;\n}\n\nmsg.payload = msg.payload[0].connected;\nnode.status({ text: msg.payload });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 920,
        "y": 420,
        "wires": [
            [
                "7a71a22caf5630aa"
            ]
        ]
    },
    {
        "id": "7a71a22caf5630aa",
        "type": "mqtt out",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "",
        "topic": "BluetoothConnection",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 940,
        "y": 500,
        "wires": []
    },
    {
        "id": "f95485da6f7079a3",
        "type": "inject",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "Regularly",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "10",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 320,
        "wires": [
            [
                "0af8df52052ef366"
            ]
        ]
    },
    {
        "id": "823df58d3952d919",
        "type": "ui-text",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "group": "549f1fa0e59e6a04",
        "order": 10,
        "width": "5",
        "height": "1",
        "name": "Lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 470,
        "y": 1480,
        "wires": []
    },
    {
        "id": "7802f2270c5b2598",
        "type": "ui-notification",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "ui": "6c1d30b5f16932dd",
        "position": "center center",
        "colorDefault": false,
        "color": "#175e03",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Close",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "popup",
        "x": 330,
        "y": 1140,
        "wires": [
            []
        ]
    },
    {
        "id": "57fcf6eca0a141e9",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "Zoeken...",
        "func": "msg.payload = \"<br></b><br>\" +\n\"<b>Zorg dat de Bluetooth speaker aan staat en is aangesloten op een netadapter!\" +\n\"<br><br>\" + \n\"Nu zoeken naar een Bluetooth speaker (~30 sec.) ...  \";\n\"<br></b><br>\";\n\nmsg.ui_update = {\n    raw: true,\n    position: \"center\",\n    displayTime: 30,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 1140,
        "wires": [
            [
                "7802f2270c5b2598"
            ]
        ]
    },
    {
        "id": "83cf6cdbc048f7cf",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "Disable",
        "func": "    var msg = {\n        enabled: false,\n        ui_update: { textColor: \"gray\" }\n    };\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: tijd_nu + \" \" + msg.enabled });\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 180,
        "y": 1340,
        "wires": [
            [
                "aed77f9bf843f122",
                "6c320f8b9fa94d70"
            ]
        ]
    },
    {
        "id": "5376b97a3fa53370",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "Enable",
        "func": "    var msg = {\n        enabled: true,\n        ui_update: { textColor: \"white\" }\n    };\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: tijd_nu + \" \" + msg.enabled });\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 1200,
        "wires": [
            [
                "4e02e2bd20959e39"
            ]
        ]
    },
    {
        "id": "aed77f9bf843f122",
        "type": "delay",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 340,
        "y": 1340,
        "wires": [
            [
                "d3ac11cb5dc0efbc"
            ]
        ]
    },
    {
        "id": "5cb2e01e6334af76",
        "type": "link in",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "link in 4",
        "links": [
            "4e02e2bd20959e39"
        ],
        "x": 75,
        "y": 1280,
        "wires": [
            [
                "6c320f8b9fa94d70"
            ]
        ]
    },
    {
        "id": "4e02e2bd20959e39",
        "type": "link out",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "link out enable",
        "mode": "link",
        "links": [
            "5cb2e01e6334af76"
        ],
        "x": 1055,
        "y": 1200,
        "wires": []
    },
    {
        "id": "de3f35eb8cc6cc74",
        "type": "ui-button",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "group": "aae22fe947be766e",
        "name": "",
        "label": "Test geluid",
        "order": 2,
        "width": "2",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "StartStopButton",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 170,
        "y": 300,
        "wires": [
            [
                "7cb194b63eb56afd"
            ]
        ]
    },
    {
        "id": "50dd2fd4a701d53d",
        "type": "ui-dropdown",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "group": "aae22fe947be766e",
        "name": "",
        "label": "Kies meldingsgeluid:",
        "tooltip": "",
        "order": 1,
        "width": "0",
        "height": "0",
        "passthru": false,
        "multiple": false,
        "chips": false,
        "clearable": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "typeIsComboBox": false,
        "msgTrigger": "onChange",
        "x": 700,
        "y": 440,
        "wires": [
            [
                "098f8c595d14aaa5"
            ]
        ]
    },
    {
        "id": "fb00403833140d8b",
        "type": "exec",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "command": "ls .node-red/projects/MiniSAHA/sounds",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "ls sounds",
        "x": 320,
        "y": 440,
        "wires": [
            [
                "7d08a46ad06a9fe9"
            ],
            [],
            []
        ]
    },
    {
        "id": "7d08a46ad06a9fe9",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "split",
        "func": "var tijd_nu = global.get(\"getTime\")();\n\nmsg.options = msg.payload.split(/\\n/);\nif (msg.options.length > 1) {\n   msg.options.pop();\n}\n\nlet selected = global.get(\"BluetoothSound\"); \n\nif (msg.options.includes(selected)) {\n    node.status({ text: tijd_nu + \", default: \" + msg.options });\n    msg.payload = global.get(\"BluetoothSound\");\n}\nelse {\n    if (msg.options.length > 0) {\n        node.status({ text: tijd_nu + \", first: \" + msg.payload });\n        msg.payload = msg.options[0];\n        global.set(\"BluetoothSound\", msg.payload);\n    }\n    else {\n        node.status({ text: tijd_nu + \", empty\" });\n        msg.payload = \"\";\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 440,
        "wires": [
            [
                "50dd2fd4a701d53d"
            ]
        ]
    },
    {
        "id": "0d7df80c86a6453d",
        "type": "exec",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "play sound",
        "x": 750,
        "y": 180,
        "wires": [
            [
                "730dfdd54514ae4a"
            ],
            [],
            []
        ]
    },
    {
        "id": "098f8c595d14aaa5",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "set BluetoothSound",
        "func": "global.set(\"BluetoothSound\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 910,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "121eeb47240d2a87",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "mpg123 sound",
        "func": "msg.payload = \"mpg123 -q '.node-red/projects/MiniSAHA/sounds/\" \n        + msg.payload + \"'\";\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: tijd_nu + \", \" + msg.payload });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 200,
        "wires": [
            [
                "0d7df80c86a6453d"
            ]
        ]
    },
    {
        "id": "3410874898204686",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "kill",
        "func": "var tijd_nu = global.get(\"getTime\")();\nnode.status({text: tijd_nu + \" kill sound\"});\nmsg.kill = \"SIGTERM\";   // of \"SIGKILL\", \"SIGINT\", etc.\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 120,
        "wires": [
            [
                "0d7df80c86a6453d"
            ]
        ]
    },
    {
        "id": "48db1c2e18f88696",
        "type": "ui-button",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "group": "aae22fe947be766e",
        "name": "",
        "label": "Stop",
        "order": 3,
        "width": "2",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "StartStopButton",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 130,
        "y": 120,
        "wires": [
            [
                "3410874898204686"
            ]
        ]
    },
    {
        "id": "034d3d2d8b8a62ca",
        "type": "ui-switch",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "",
        "label": "Random geluid",
        "group": "aae22fe947be766e",
        "order": 4,
        "width": "2",
        "height": "1",
        "passthru": false,
        "decouple": false,
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "className": "",
        "layout": "row-left",
        "clickableArea": "switch",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 680,
        "y": 500,
        "wires": [
            [
                "e438e1a719031b77"
            ]
        ]
    },
    {
        "id": "e438e1a719031b77",
        "type": "change",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "BluetoothRandomSound",
        "rules": [
            {
                "t": "set",
                "p": "BluetoothRandomSound",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "2b8910900d4bbdc5",
        "type": "change",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "BluetoothRandomSound",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "BluetoothRandomSound",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 500,
        "wires": [
            [
                "8c04f7e36a9c4acb"
            ]
        ]
    },
    {
        "id": "8c04f7e36a9c4acb",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "false",
        "func": "if (msg.payload == null) {\n    msg.payload = false;\n    global.set(\"BluetoothRandomSound\", msg.payload);\n    node.status({ text: msg.payload });\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 500,
        "wires": [
            [
                "034d3d2d8b8a62ca"
            ]
        ]
    },
    {
        "id": "292f906d0611558c",
        "type": "comment",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "https://pixabay.com/nl/music/search/ringtones/",
        "info": "",
        "x": 830,
        "y": 60,
        "wires": []
    },
    {
        "id": "2e14724e3c3ae983",
        "type": "mqtt in",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "",
        "topic": "PlaySound",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 380,
        "y": 200,
        "wires": [
            [
                "121eeb47240d2a87"
            ]
        ]
    },
    {
        "id": "ac3df9612f272925",
        "type": "exec",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "command": "ls .node-red/projects/MiniSAHA/sounds/*.mp3",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "ls sounds",
        "x": 200,
        "y": 1120,
        "wires": [
            [
                "411d40273f5f425f"
            ],
            [],
            []
        ]
    },
    {
        "id": "d886cc1affb2bca7",
        "type": "ui-table",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "group": "aae22fe947be766e",
        "name": "Device Table",
        "label": "",
        "order": 10,
        "width": "0",
        "height": "0",
        "maxrows": "",
        "autocols": false,
        "showSearch": false,
        "deselect": true,
        "selectionType": "none",
        "columns": [
            {
                "title": "Speel",
                "key": "sound",
                "keyType": "key",
                "type": "button",
                "width": "",
                "align": "start"
            },
            {
                "title": "MP3 bestand",
                "key": "shortName",
                "keyType": "key",
                "type": "text",
                "width": ""
            },
            {
                "title": "Verwijder",
                "key": "verwijder",
                "keyType": "key",
                "type": "button",
                "width": "",
                "align": "start"
            }
        ],
        "mobileBreakpoint": "sm",
        "mobileBreakpointType": "defaults",
        "action": "replace",
        "x": 670,
        "y": 1120,
        "wires": [
            [
                "4991f7f568969713"
            ]
        ]
    },
    {
        "id": "411d40273f5f425f",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "name": "Array: filename, shortname, delete",
        "func": "let filenames = msg.payload.split(/\\r?\\n/);\nif (filenames.length > 1) {\n    filenames = filenames.slice(0, -1);\n}\nnode.status({ text: filenames.length });\n\nlet data = [];\nfilenames.forEach(function(filename) {\n    let short = filename.split('/').pop();\n    short = short.split('.').slice(0, -1).join('.')\n    data.push({\n        sound: \"\",\n        filename: filename,\n        shortName: short,\n        verwijder: \"\"\n    });\n}\n);\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 1120,
        "wires": [
            [
                "d886cc1affb2bca7"
            ]
        ]
    },
    {
        "id": "4a80936a1117d160",
        "type": "ui-text",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "group": "aae22fe947be766e",
        "order": 9,
        "width": 0,
        "height": 0,
        "name": "Voortgang",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 790,
        "y": 660,
        "wires": []
    },
    {
        "id": "a6ad4310a571b04f",
        "type": "ui-button",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "group": "aae22fe947be766e",
        "name": "",
        "label": "Kopieer alle MP3 bestanden van USB stick",
        "order": 7,
        "width": "0",
        "height": "0",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 230,
        "y": 840,
        "wires": [
            [
                "ec36fc960434517b"
            ]
        ]
    },
    {
        "id": "4991f7f568969713",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "name": "play / remove sound",
        "func": "node.status({ text: msg.column + \": \" + msg.payload.shortName });\n\nif (msg.column == \"sound\") {\n  msg.payload = msg.payload.shortName + \".mp3\";\n  return [msg, null];\n}\n\nif (msg.column == \"verwijder\") {\n    msg.cmd = 'rm \"' + msg.payload.filename + '\"';\n    return [null, msg];\n}\n\nreturn msg;",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 1220,
        "wires": [
            [
                "217d3c58acae81bd"
            ],
            [
                "709c2edf3d4f3eb2"
            ]
        ]
    },
    {
        "id": "776ed147123b92b8",
        "type": "exec",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "exec rm",
        "x": 880,
        "y": 1320,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "ff4b91c6f803a3cb",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "USB disk",
        "func": "let usb = msg.payload.slice(0, -1);\nusb = usb.replace(/ /, \"\\\\ \");\n\nnode.status({ text: usb });\nmsg.payload = 'cp -r /media/pi/' + usb +\n    '/*.mp3 /home/pi/.node-red/projects/MiniSAHA/sounds/'\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 900,
        "wires": [
            [
                "2f60b40d268db108"
            ]
        ]
    },
    {
        "id": "2f60b40d268db108",
        "type": "exec",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "exec",
        "x": 690,
        "y": 900,
        "wires": [
            [
                "19674a84640dbeb7"
            ],
            [],
            []
        ]
    },
    {
        "id": "ec36fc960434517b",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "Find USB",
        "func": "msg.payload = \"ls /media/pi\"\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 840,
        "wires": [
            [
                "7b381f39c3109c7b"
            ]
        ]
    },
    {
        "id": "7b381f39c3109c7b",
        "type": "exec",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "exec",
        "x": 690,
        "y": 840,
        "wires": [
            [
                "ff4b91c6f803a3cb"
            ],
            [],
            []
        ]
    },
    {
        "id": "c2ddecb04917163d",
        "type": "watch-directory",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "folder": ".node-red/projects/MiniSAHA/sounds",
        "recursive": 0,
        "typeEvent": "create",
        "ignoreInitial": false,
        "ignoredFiles": "",
        "ignoredFilesType": "re",
        "name": "",
        "x": 200,
        "y": 1260,
        "wires": [
            [
                "a0f17d909e19d179"
            ]
        ]
    },
    {
        "id": "6d21e3f54526cbb1",
        "type": "watch-directory",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "folder": ".node-red/projects/MiniSAHA/sounds",
        "recursive": 0,
        "typeEvent": "delete",
        "ignoreInitial": false,
        "ignoredFiles": "",
        "ignoredFilesType": "re",
        "name": "",
        "x": 200,
        "y": 1340,
        "wires": [
            [
                "a0f17d909e19d179"
            ]
        ]
    },
    {
        "id": "a0f17d909e19d179",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "name": "join",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 1320,
        "wires": [
            [
                "2912eea2927befa7"
            ]
        ]
    },
    {
        "id": "2912eea2927befa7",
        "type": "link out",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "name": "Changed",
        "mode": "link",
        "links": [
            "1ee1bd387c952be2",
            "0a60a836b38547df",
            "4ce40f669f564d3c"
        ],
        "x": 565,
        "y": 1320,
        "wires": []
    },
    {
        "id": "1ee1bd387c952be2",
        "type": "link in",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "name": "link in 1",
        "links": [
            "2912eea2927befa7"
        ],
        "x": 95,
        "y": 1120,
        "wires": [
            [
                "ac3df9612f272925"
            ]
        ]
    },
    {
        "id": "0a60a836b38547df",
        "type": "link in",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "link in 2",
        "links": [
            "2912eea2927befa7"
        ],
        "x": 155,
        "y": 440,
        "wires": [
            [
                "fb00403833140d8b"
            ]
        ]
    },
    {
        "id": "f071260bdcdcd056",
        "type": "inject",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "Startup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 540,
        "wires": [
            [
                "2b8910900d4bbdc5",
                "4653356d90a8a897"
            ]
        ]
    },
    {
        "id": "4ce40f669f564d3c",
        "type": "link in",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "link in 3",
        "links": [
            "2912eea2927befa7"
        ],
        "x": 105,
        "y": 660,
        "wires": [
            [
                "e8dcf9dab51432cf"
            ]
        ]
    },
    {
        "id": "e8dcf9dab51432cf",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "klaar",
        "func": "msg.payload = \"klaar\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 660,
        "wires": [
            [
                "9f7d3fb78648fc41"
            ]
        ]
    },
    {
        "id": "19674a84640dbeb7",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "bezig",
        "func": "msg.payload = \"bezig met kopieren...\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 700,
        "wires": [
            [
                "9f7d3fb78648fc41"
            ]
        ]
    },
    {
        "id": "34a8c9383eec9020",
        "type": "delay",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 640,
        "y": 720,
        "wires": [
            [
                "c7a079d11845588a"
            ]
        ]
    },
    {
        "id": "c7a079d11845588a",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "clear",
        "func": "msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 720,
        "wires": [
            [
                "4a80936a1117d160"
            ]
        ]
    },
    {
        "id": "9f7d3fb78648fc41",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "join",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 660,
        "wires": [
            [
                "4a80936a1117d160",
                "34a8c9383eec9020"
            ]
        ]
    },
    {
        "id": "8fbf837b995b0dd9",
        "type": "ui-text",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "group": "aae22fe947be766e",
        "order": 6,
        "width": 0,
        "height": 0,
        "name": "leeg",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 110,
        "y": 1020,
        "wires": []
    },
    {
        "id": "c0ef744af7819d7c",
        "type": "ui-button",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "group": "aae22fe947be766e",
        "name": "",
        "label": "Hoe kopieer ik MP3 bestanden vanaf mijn PC?",
        "order": 8,
        "width": "0",
        "height": "0",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 240,
        "y": 960,
        "wires": [
            [
                "746b7471fda81cac"
            ]
        ]
    },
    {
        "id": "c0dfb882e72c4bd7",
        "type": "ui-notification",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": false,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Sluiten",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 690,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "c5dbb4558df77bc6",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "help tekst",
        "func": "msg.payload = \n\"<b>Je kan MP3 bestanden ook kopieren vanaf je PC.\" +\n\"<br><br>\" +\n\"In File Manager typ in de adres balk: \\\\\\\\\" + msg.payload + \"\\\\sounds\"  +\n\"<br><br>\" +\n\"Na een paar seconden krijg je popup scherm.\" + \n\"<br><br>\" +\n\"Log nu in als gebruiker 'user' met wachtwoord 'user'.\" +\n\"<br><br>\" +\n\"Kopieer je MP3 bestanden naar deze folder.\" +\n\"</b>\"\n\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 1020,
        "wires": [
            [
                "c0dfb882e72c4bd7"
            ]
        ]
    },
    {
        "id": "25d743058464db66",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "IP adres",
        "func": "msg.payload = msg.payload.split(/\\s+/)[0];\nnode.status({ text: msg.payload });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 960,
        "wires": [
            [
                "c5dbb4558df77bc6"
            ]
        ]
    },
    {
        "id": "746b7471fda81cac",
        "type": "exec",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "command": "hostname -I  ",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "hostname -I  ",
        "x": 530,
        "y": 960,
        "wires": [
            [
                "25d743058464db66"
            ],
            [],
            []
        ]
    },
    {
        "id": "ad3cf096050d54e2",
        "type": "ui-switch",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "",
        "label": "Stop na JA/NEE",
        "group": "aae22fe947be766e",
        "order": 5,
        "width": "2",
        "height": "1",
        "passthru": false,
        "decouple": false,
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "className": "",
        "layout": "row-left",
        "clickableArea": "switch",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 680,
        "y": 560,
        "wires": [
            [
                "3fe4ddc223bcbaeb"
            ]
        ]
    },
    {
        "id": "3fe4ddc223bcbaeb",
        "type": "change",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "BluetoothAutoStop",
        "rules": [
            {
                "t": "set",
                "p": "BluetoothAutoStop",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "4653356d90a8a897",
        "type": "change",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "BluetoothAutoStop",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "BluetoothAutoStop",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 560,
        "wires": [
            [
                "27336a80e583f921"
            ]
        ]
    },
    {
        "id": "27336a80e583f921",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "false",
        "func": "if (msg.payload == null) {\n    msg.payload = false;\n    global.set(\"BluetoothAutoStop\", msg.payload);\n    node.status({ text: msg.payload });\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 560,
        "wires": [
            [
                "ad3cf096050d54e2"
            ]
        ]
    },
    {
        "id": "e1471d5c735bd6d3",
        "type": "mqtt in",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "",
        "topic": "StateChanged",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 150,
        "y": 60,
        "wires": [
            [
                "d722b84b332a8bb8"
            ]
        ]
    },
    {
        "id": "d722b84b332a8bb8",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "AutoStop?",
        "func": "if (global.get(\"BluetoothAutoStop\") == \"false\") {\n    return null;\n}\n\nlet states = global.get(\"states\");\n\nswitch (global.get(\"currentState\")) {\n    case states.ISOK: \n    case states.ISNOTOK: \n    case states.ISOK_OVERTIJD: \n    case states.ISNOTOK_OVERTIJD: { \n            var tijd_nu = global.get(\"getTime\")();\n            node.status({text: tijd_nu + \" Stop sounds\"});\n            return msg;\n    }\n    default: {\n        return null;\n    }\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 60,
        "wires": [
            [
                "3410874898204686"
            ]
        ]
    },
    {
        "id": "7cb194b63eb56afd",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "Selected sound",
        "func": "msg.payload = global.get(\"BluetoothSound\");\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({text: tijd_nu + \" \" + msg.payload});\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 300,
        "wires": [
            [
                "121eeb47240d2a87",
                "cd17b3773f335e9b"
            ]
        ]
    },
    {
        "id": "ced962bd1c4d22bc",
        "type": "mqtt in",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "",
        "topic": "BluetoothConnection",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 150,
        "y": 380,
        "wires": [
            [
                "98511df3af0e7143"
            ]
        ]
    },
    {
        "id": "98511df3af0e7143",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "BT Connected",
        "func": "let enabled = flow.get(\"TestGeluidEnabled\") ?? true;\n\nif (!enabled) {\n    return;\n}\n\nlet bluetootConnected = msg.payload;\nnode.status({ text: \"Connected: \" + bluetootConnected});\n\nmsg = {\n    enabled: true,\n    ui_update: { textColor: \"white\" },\n    payload: \"\"\n};\n\nif (bluetootConnected == \"no\") {\n    msg.enabled = false;\n    msg.ui_update.textColor = \"silver\";\n}\n\nreturn msg;\n\n/*\n\"red\"\n\"blue\"\n\"green\"\n\"yellow\"\n\"orange\"\n\"purple\"\n\"pink\"\n\"brown\"\n\"black\"\n\"white\"\n\"gray\"\n\n Extra veelgebruikte tinten\n\"cyan\" (lichtblauw)\n\"magenta\" (fel roze/paars)\n\"lime\" (felgroen)\n\"navy\" (donkerblauw)\n\"teal\" (blauwgroen)\n\"olive\" (olijfgroen)\n\"maroon\" (donkerrood)\n\"silver\" (lichtgrijs)\n\"gold\" (goudkleurig)\n\"indigo\" (diep paars/blauw)\n*/",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 380,
        "wires": [
            [
                "de3f35eb8cc6cc74"
            ]
        ]
    },
    {
        "id": "795954223e100ba0",
        "type": "ui-template",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "group": "",
        "page": "bed8396ac6babffc",
        "ui": "",
        "name": "CSS StartStopButton",
        "order": 1,
        "width": 0,
        "height": 0,
        "head": "",
        "format": ".StartStopButton button {\n    font-size: 1.6em;\n}\n",
        "storeOutMessages": true,
        "passthru": true,
        "resendOnRefresh": true,
        "templateScope": "page:style",
        "className": "",
        "x": 180,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "cd17b3773f335e9b",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "Disable",
        "func": "flow.set(\"TestGeluidEnabled\", false);\n\nvar msg = {\n    enabled: false,\n    ui_update: { textColor: \"gray\" }\n};\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: tijd_nu + \" \" + msg.enabled });\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 280,
        "wires": [
            [
                "d0e532abff31a2ad"
            ]
        ]
    },
    {
        "id": "730dfdd54514ae4a",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "Enable",
        "func": "flow.set(\"TestGeluidEnabled\", true);\n\nvar msg = {\n    enabled: true,\n    ui_update: { textColor: \"white\" }\n};\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: tijd_nu + \" \" + msg.enabled });\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 180,
        "wires": [
            [
                "d0e532abff31a2ad"
            ]
        ]
    },
    {
        "id": "d0e532abff31a2ad",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "join",
        "func": "flow.get(\"TestGeluidEnabled\");\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1030,
        "y": 220,
        "wires": [
            [
                "de3f35eb8cc6cc74"
            ]
        ]
    },
    {
        "id": "1087b0d71356eb46",
        "type": "link in",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "link in sound",
        "links": [
            "217d3c58acae81bd"
        ],
        "x": 255,
        "y": 140,
        "wires": [
            [
                "3410874898204686",
                "88e932f430c769c9"
            ]
        ]
    },
    {
        "id": "217d3c58acae81bd",
        "type": "link out",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "name": "link out 1",
        "mode": "link",
        "links": [
            "1087b0d71356eb46",
            "5a41d7518d03c12d"
        ],
        "x": 675,
        "y": 1180,
        "wires": []
    },
    {
        "id": "88e932f430c769c9",
        "type": "delay",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "",
        "pauseType": "delay",
        "timeout": "500",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 370,
        "y": 160,
        "wires": [
            [
                "121eeb47240d2a87"
            ]
        ]
    },
    {
        "id": "0375a3cf9551c911",
        "type": "comment",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "name": "Play",
        "info": "",
        "x": 790,
        "y": 1180,
        "wires": []
    },
    {
        "id": "709c2edf3d4f3eb2",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "name": "ja/nee dialog",
        "func": "msg.payload = \n    \"<b>Wil je het bestand '\" + \n    msg.payload.shortName + \n    \"' echt verwijderen?\" +\n\"<br></b><br>\";\n\nmsg.ui_update = {\n    raw: true,\n    position: \"center\",\n    displayTime: 100,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 1240,
        "wires": [
            [
                "9f3dd4c4d056882c"
            ]
        ]
    },
    {
        "id": "9f3dd4c4d056882c",
        "type": "ui-notification",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": false,
        "color": "#175e03",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Nee",
        "allowConfirm": true,
        "confirmText": "Ja",
        "raw": false,
        "className": "",
        "name": "Show",
        "x": 870,
        "y": 1240,
        "wires": [
            [
                "d68aa0b732adcd5c"
            ]
        ]
    },
    {
        "id": "d68aa0b732adcd5c",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "name": "Ja?",
        "func": "if (msg.payload == \"dismiss_clicked\") return;\n\nif (msg.payload == \"confirm_clicked\") {\n    msg.payload = msg.cmd;\n    return msg;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 1320,
        "wires": [
            [
                "776ed147123b92b8"
            ]
        ]
    },
    {
        "id": "5a41d7518d03c12d",
        "type": "link in",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "link in sound",
        "links": [
            "217d3c58acae81bd"
        ],
        "x": 595,
        "y": 320,
        "wires": [
            [
                "31476e27da90a60b"
            ]
        ]
    },
    {
        "id": "31476e27da90a60b",
        "type": "delay",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "",
        "pauseType": "delay",
        "timeout": "500",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 710,
        "y": 320,
        "wires": [
            [
                "cd17b3773f335e9b"
            ]
        ]
    },
    {
        "id": "inject_test",
        "type": "inject",
        "z": "091a23c860c18c2f",
        "name": "Test SMS",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 140,
        "y": 100,
        "wires": [
            [
                "build_spryng"
            ]
        ]
    },
    {
        "id": "build_spryng",
        "type": "function",
        "z": "091a23c860c18c2f",
        "name": "Build Spryng Payload",
        "func": "msg.headers = {\n    \"Content-Type\": \"application/json\",\n    \"Authorization\": \"Bearer JOUW_SPRYNG_API_KEY\"\n};\n\nmsg.method = \"POST\";\nmsg.url = \"https://api.spryngsms.com/v1/messages\";\n\nmsg.payload = {\n    \"encoding\": \"auto\",\n    \"body\": \"Hallo Paul, dit is een test via Spryng API!\",\n    \"originator\": \"Paul\",\n    \"recipients\": [\"31612345678\"]\n};\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 100,
        "wires": [
            [
                "spryng_http"
            ]
        ]
    },
    {
        "id": "spryng_http",
        "type": "http request",
        "z": "091a23c860c18c2f",
        "name": "Send to Spryng",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "persist": false,
        "authType": "",
        "x": 560,
        "y": 100,
        "wires": [
            [
                "debug_response"
            ]
        ]
    },
    {
        "id": "debug_response",
        "type": "debug",
        "z": "091a23c860c18c2f",
        "name": "Spryng Response",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 770,
        "y": 100,
        "wires": []
    },
    {
        "id": "462ffa03e84f9b7f",
        "type": "comment",
        "z": "091a23c860c18c2f",
        "name": "https://docs.spryngsms.com/#86dc51da-b3a0-4ecc-8f36-d466e2bdcf86",
        "info": "",
        "x": 330,
        "y": 40,
        "wires": []
    },
    {
        "id": "whatsapp_inject",
        "type": "inject",
        "z": "091a23c860c18c2f",
        "name": "Stuur testbericht",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "Hallo vanaf Node-RED via WhatsApp Cloud API!",
        "payloadType": "str",
        "x": 120,
        "y": 200,
        "wires": [
            [
                "whatsapp_function"
            ]
        ]
    },
    {
        "id": "whatsapp_function",
        "type": "function",
        "z": "091a23c860c18c2f",
        "name": "Maak WhatsApp API body",
        "func": "msg.headers = {\n    \"Authorization\": \"Bearer JOUW_ACCESS_TOKEN\",\n    \"Content-Type\": \"application/json\"\n};\n\nmsg.url = \"https://graph.facebook.com/v19.0/JOUW_PHONE_NUMBER_ID/messages\";\n\nmsg.payload = {\n    \"messaging_product\": \"whatsapp\",\n    \"to\": \"31612345678\",   // jouw nummer in internationaal formaat\n    \"type\": \"text\",\n    \"text\": { \"body\": msg.payload }\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 200,
        "wires": [
            [
                "whatsapp_http"
            ]
        ]
    },
    {
        "id": "whatsapp_http",
        "type": "http request",
        "z": "091a23c860c18c2f",
        "name": "WhatsApp API call",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "persist": false,
        "authType": "",
        "x": 570,
        "y": 200,
        "wires": [
            [
                "whatsapp_debug"
            ]
        ]
    },
    {
        "id": "whatsapp_debug",
        "type": "debug",
        "z": "091a23c860c18c2f",
        "name": "API Response",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 760,
        "y": 200,
        "wires": []
    },
    {
        "id": "pushover_inject",
        "type": "inject",
        "z": "091a23c860c18c2f",
        "name": "Stuur testbericht",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "Hallo2 vanuit Node-RED via Pushover!",
        "payloadType": "str",
        "x": 120,
        "y": 280,
        "wires": [
            [
                "pushover_function"
            ]
        ]
    },
    {
        "id": "pushover_function",
        "type": "function",
        "z": "091a23c860c18c2f",
        "name": "Maak Pushover body",
        "func": "msg.headers = {\n    \"Content-Type\": \"application/x-www-form-urlencoded\"\n};\n\nlet token = \"awr9dr9p4ersmv63fy9ptwy2iaw4ig\";\nlet key = \"ufctqwormtmxaak2mbxdqz2563gyb6\";\n\nmsg.url = \"https://api.pushover.net/1/messages.json\";\n\nmsg.payload = new URLSearchParams({\n    token: token,      // <-- vul in\n    user: key,        // <-- vul in\n    message: msg.payload\n}).toString();\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 280,
        "wires": [
            [
                "pushover_http"
            ]
        ]
    },
    {
        "id": "pushover_http",
        "type": "http request",
        "z": "091a23c860c18c2f",
        "name": "Pushover API call",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "persist": false,
        "authType": "",
        "x": 570,
        "y": 280,
        "wires": [
            [
                "pushover_debug"
            ]
        ]
    },
    {
        "id": "pushover_debug",
        "type": "debug",
        "z": "091a23c860c18c2f",
        "name": "API Response",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 760,
        "y": 280,
        "wires": []
    },
    {
        "id": "4acfd77dc1764bcb",
        "type": "comment",
        "z": "091a23c860c18c2f",
        "name": "https://pushover.net/signup",
        "info": "",
        "x": 170,
        "y": 340,
        "wires": []
    },
    {
        "id": "fe6342474c187542",
        "type": "inject",
        "z": "091a23c860c18c2f",
        "name": "Stuur WhatsApp bericht",
        "props": [
            {
                "p": "message",
                "v": "hello world",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 420,
        "wires": [
            [
                "029a3b7473681958"
            ]
        ]
    },
    {
        "id": "029a3b7473681958",
        "type": "function",
        "z": "091a23c860c18c2f",
        "name": "Bouw API URL",
        "func": "const apikey = \"sy8kti7Jw5WG1e2m\";\nconst type = \"alarm_notification\";\nconst msgText = encodeURIComponent(msg.message);\n\nmsg.method = \"GET\";\nmsg.url = `https://api.inout.bot/send?apikey=${apikey}&type=${type}&message=${msgText}`;\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 420,
        "wires": [
            [
                "bc2627a4d6e0c58f",
                "a8ec53977dd2d24a"
            ]
        ]
    },
    {
        "id": "bc2627a4d6e0c58f",
        "type": "http request",
        "z": "091a23c860c18c2f",
        "name": "Verstuur WhatsApp via InOut.bot",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 660,
        "y": 420,
        "wires": [
            [
                "5af732594ebd5a89"
            ]
        ]
    },
    {
        "id": "5af732594ebd5a89",
        "type": "debug",
        "z": "091a23c860c18c2f",
        "name": "API Response",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 900,
        "y": 420,
        "wires": []
    },
    {
        "id": "a8ec53977dd2d24a",
        "type": "debug",
        "z": "091a23c860c18c2f",
        "name": "debug 4",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 480,
        "wires": []
    }
]
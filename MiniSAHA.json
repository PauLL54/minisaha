[
    {
        "id": "a380efb730bea147",
        "type": "tab",
        "label": "StateMachine",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "1e372cb3d08d9182",
        "type": "tab",
        "label": "UI_Home",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "5c14e0941d341b42",
        "type": "tab",
        "label": "UI_Instellingen",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "af31bf2fe058f803",
        "type": "tab",
        "label": "UI_About",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "eb60a9ea21d42f29",
        "type": "tab",
        "label": "Tester",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ce724907bfebf75c",
        "type": "tab",
        "label": "Bluetooth",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "bf57a768b975c2e6",
        "type": "tab",
        "label": "Meldingsgeluiden",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "bd2a966b.302e18",
        "type": "subflow",
        "name": "CheckIsAtHome",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 360,
                "wires": [
                    {
                        "id": "41839ea3.d361b"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1040,
                "y": 60,
                "wires": [
                    {
                        "id": "f98fba99.4f5198",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1080,
                "y": 120,
                "wires": [
                    {
                        "id": "f98fba99.4f5198",
                        "port": 1
                    }
                ]
            },
            {
                "x": 1090,
                "y": 460,
                "wires": [
                    {
                        "id": "9c091226.6a239",
                        "port": 2
                    }
                ]
            },
            {
                "x": 410,
                "y": 300,
                "wires": [
                    {
                        "id": "41839ea3.d361b",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "inputLabels": [
            "Create CheckAlive script"
        ],
        "outputLabels": [
            "IsAtHome",
            "SuccededPingCount",
            "Result start script",
            "Debug"
        ],
        "status": {
            "x": 1040,
            "y": 180,
            "wires": [
                {
                    "id": "f98fba99.4f5198",
                    "port": 2
                }
            ]
        }
    },
    {
        "id": "7a37030e3e3276d9",
        "type": "subflow",
        "name": "CheckIsAtHome (1)",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 360,
                "wires": [
                    {
                        "id": "e0fbb4a9fd0354d0"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1040,
                "y": 60,
                "wires": [
                    {
                        "id": "9aa4521d2bf238c3",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1080,
                "y": 120,
                "wires": [
                    {
                        "id": "9aa4521d2bf238c3",
                        "port": 1
                    }
                ]
            },
            {
                "x": 1090,
                "y": 460,
                "wires": [
                    {
                        "id": "85ce8a28740483a4",
                        "port": 2
                    }
                ]
            },
            {
                "x": 410,
                "y": 300,
                "wires": [
                    {
                        "id": "e0fbb4a9fd0354d0",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "inputLabels": [
            "Create CheckAlive script"
        ],
        "outputLabels": [
            "IsAtHome",
            "SuccededPingCount",
            "Result start script",
            "Debug"
        ],
        "status": {
            "x": 1040,
            "y": 180,
            "wires": [
                {
                    "id": "9aa4521d2bf238c3",
                    "port": 2
                }
            ]
        }
    },
    {
        "id": "6bde74f61fffc171",
        "type": "group",
        "z": "eb60a9ea21d42f29",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "9c9d4e18a631cc15",
            "6ccc00486baecf9d",
            "ebd1eb7739312b3d",
            "1029c725dc625feb",
            "849129e5cd170f06",
            "30a234133bcbd597",
            "fa66a05f8c746a83",
            "b0067e5db1bb638b",
            "3758cdea9d5d1d01",
            "61806882e2c16761",
            "728339c56b6087ec",
            "6ddc11d490af5fe8"
        ],
        "x": 24,
        "y": 799,
        "w": 962,
        "h": 262
    },
    {
        "id": "289d8e4b5f966496",
        "type": "group",
        "z": "eb60a9ea21d42f29",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "5624329dd5cb5b0a",
            "ac6f3d5c09bce733",
            "29faaa6a019e0e9b",
            "6f0b74ba5a27cc3e",
            "2c5db89378881214",
            "97382ae72dc98a86",
            "2d76e161b54a56ff",
            "8d171fe450c7a81f",
            "148566cf72b33e1a",
            "98ddd266a3e4c998",
            "bce54c96101eb7b7",
            "db6b4ac55c770429",
            "aefcaf0124832705",
            "59d5c77dc1dc2a60",
            "ca12465c285a07be",
            "6cdb9cd1a55cd9dd",
            "5fe7d4a09964b635",
            "82ea9c0c0b1c8052",
            "233943e79ec596cb",
            "e3e7c591d92d8d6d",
            "b6d0686a4823c0c2",
            "7b981f6f76e5f9f4",
            "86822077eb192361",
            "b214b552d64a9c10",
            "e21cc1583323afc0",
            "d17ee11b0c0d7512",
            "68b99b881506f9ef",
            "0d81cada11c97092",
            "0267af7c7471c4a5",
            "c60a13f83d3ae000"
        ],
        "x": 34,
        "y": 11.5,
        "w": 832,
        "h": 769.5
    },
    {
        "id": "d344da1eff713941",
        "type": "group",
        "z": "eb60a9ea21d42f29",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "9efaa0c2fd872693",
            "6d496dbb394b2888",
            "f1ad8f74c46f6314",
            "c8412ad60f0dd6e1",
            "ee5730149418dfeb",
            "7ea37518e7e677d7"
        ],
        "x": 34,
        "y": 1311.5,
        "w": 632,
        "h": 217
    },
    {
        "id": "4e4ef64c30555769",
        "type": "group",
        "z": "a380efb730bea147",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "86a3b683d730904f",
            "dc25463a90653c93",
            "2fe001daedc674d9",
            "f80c926aa5f4b4e1",
            "94fd03500445951f",
            "04335944abb7d75d",
            "0aaa14729a8e7b05",
            "72150be82696bdfc",
            "e95199098a8ec21d",
            "98a637c918e7ffb3",
            "93e66aed5528479a",
            "391e6a39648d43b8",
            "ba38e7032099ab38",
            "cd2ccbcdab9e2474",
            "a60b56107555d543"
        ],
        "x": 14,
        "y": 19,
        "w": 892,
        "h": 502
    },
    {
        "id": "2ce41e3897fb35ce",
        "type": "group",
        "z": "a380efb730bea147",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "6c1f652de628f1be",
            "32e7240df75d8f3a",
            "070af656b33c1a19",
            "0d0b3ee379dc41b0",
            "7e9bbcf4c96e333a",
            "97cd5aa2eb055baf",
            "f66c2ba033e71dfe",
            "df1878820d0f62c5",
            "7406ab9d8567cc25",
            "c9f88ef493593187",
            "f07ba5eecb0df09e",
            "8322868abe70e928",
            "cf1901877bfe59a8",
            "4f39baa7dbd5d547",
            "1cbae632c31ff2b0",
            "da8fec47862aa2f5",
            "cfa6b22427e3edc3",
            "0362a76e4f7b1fd0",
            "d5df2f8a93d16c6a",
            "494c0e1626e74b03",
            "6e3e1642880f5295",
            "9a6d5159979437b8",
            "a9d22c1ccafb666e"
        ],
        "x": 14,
        "y": 559,
        "w": 872,
        "h": 642
    },
    {
        "id": "bb314d79eca0c3fd",
        "type": "group",
        "z": "1e372cb3d08d9182",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "b81cb7c076621c31",
            "6ce9c1c05a07f0e4",
            "7d9adb1d8b871f0c",
            "229bc4f563105a3f",
            "c519aa60e02572b1",
            "bf9647efa558a7d3",
            "f84bc5be2fce9d39",
            "4b53939b9023b8c0",
            "074f5b05354c5090",
            "f85ce69846f65989",
            "848574e93a41e0cc",
            "bd60c97adc37bf3b",
            "79cda76e1cdcc076",
            "7e2f3d7baaebee6d"
        ],
        "x": 14,
        "y": 659,
        "w": 852,
        "h": 402
    },
    {
        "id": "4a425ad2d30f78bc",
        "type": "group",
        "z": "1e372cb3d08d9182",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "86d57ce8cd9b65da",
            "753a239026080219",
            "99b664e80a1908c6",
            "3be586184e50e4ea",
            "dd466b9403f2d8f4",
            "75841af45dc440b7",
            "55d46207a0c02be9",
            "5f66bb58047a17de",
            "6f050edd963ed167",
            "e9fa22955a89da80",
            "a5f6fedc4ec48281",
            "55706aed47335f02",
            "4c44736709d21bb0",
            "1c70b188ec53d6ab",
            "f720e78159430790",
            "131f564f42824545",
            "b2ce6b3ac89473bf",
            "d14d455208d7b126",
            "d283ae10f4012c17",
            "16395cfced8c47cb",
            "00e6d8a574603f71",
            "f31d4676aacdfc8e",
            "b2edd67c1976f042",
            "8a224d6b4c8e6e53",
            "6c02930ddcad9dd8",
            "0436958281830a8e",
            "d6b298f8ec85d61c",
            "c3e2a51a02b00916"
        ],
        "x": 14,
        "y": 19,
        "w": 992,
        "h": 622
    },
    {
        "id": "a49df4f119bb186e",
        "type": "group",
        "z": "af31bf2fe058f803",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "07af420f98d0e89a",
            "d7ff5ad4b1b79918",
            "7a258c3a06322d6a",
            "02d2ac26c698a195",
            "477a82641741c1d2",
            "6ba99393e4c393d8",
            "28228f40169db06d",
            "62cf14493c558309",
            "34d7ae63b33b2312",
            "b119fd4598e51e41",
            "05d5a950f617317c",
            "c4571cfee0924b57",
            "ba410ac8c1a26bad",
            "363ef96aac78d4e7",
            "9328b12c82bcdb88",
            "3dc33bd26ddfd0cd",
            "b92aa98cbf16363f",
            "8032366086aa8de0"
        ],
        "x": 14,
        "y": 999,
        "w": 932,
        "h": 709.5
    },
    {
        "id": "5bb2b589a301c7c8",
        "type": "group",
        "z": "af31bf2fe058f803",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "5a792b79ee924fcc",
            "efef419a3cac5a8b",
            "226a8c5bfb54aa32",
            "38a6029999573c13",
            "7640224f513f74de",
            "60d1d31d381e01eb",
            "e677c617d3a5d29d",
            "940e764301d9d266",
            "6f445b4448b59170",
            "95ed60f262f1803c",
            "6c2c688ef0fa2f63",
            "44f8e182ea2d2fc3",
            "5f841997def03bad",
            "2632771a765ce800",
            "e91938bbca103b42",
            "8341310a2e59ed53",
            "1ad8ae65c31d2570",
            "da7b21ec87871d8c",
            "4d1dba90ae296567",
            "a1659a56c324e2cc",
            "d706900fa126e361",
            "3a750c7cbf887af3",
            "303fedb30576538b",
            "6a267aeb779eac08",
            "dff2dbca89ccfc06"
        ],
        "x": 14,
        "y": 339,
        "w": 792,
        "h": 622
    },
    {
        "id": "04fd012f1107245e",
        "type": "group",
        "z": "ce724907bfebf75c",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "6ab57893a1727021",
            "d3ac11cb5dc0efbc",
            "d611838783d29255",
            "4d4f78505bcbf29e",
            "6c320f8b9fa94d70",
            "f5960bb1164b1dbb",
            "e265ce7aeafc81cf",
            "a382f332dd3ab477",
            "20aee768ba9e2512",
            "17b078a9c4215d63",
            "c8459650666a969b",
            "b6db4fba6aab59b3",
            "ad04926aacf33a5d",
            "25b2f4f138e92a11",
            "9a9cc08da2b8ef61",
            "d1c5073f0e9b7976",
            "b699f11b580a05af",
            "6054eae0fe0bbb10",
            "c9aa4babb452e660",
            "c86740ad60f14028",
            "c4556470956a2dd7",
            "988de3a578461499",
            "27eb7a75f026cd43",
            "70b734ee6121d475",
            "84fda3c5a41e4165",
            "dc7a07b385d309ec",
            "620e6a6d64aff30d",
            "3edb32cf296b125f",
            "1314c5376597aa78",
            "a9b3d569ef1ff64c",
            "a312655bf01fb8e3",
            "c307ebad62357506",
            "d3191e422f60972d",
            "506b78c0fe165e00"
        ],
        "x": 14,
        "y": 859,
        "w": 1092,
        "h": 582
    },
    {
        "id": "b653e740e9531504",
        "type": "group",
        "z": "ce724907bfebf75c",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "0af8df52052ef366",
            "a6248e8d64acb74f",
            "43862d3b661a9960",
            "070ce4d9b1f1776d",
            "f5c783e435202cc2",
            "e110dd782e4ed389",
            "c4bdb95a0f7c3226",
            "36e8febe859fd540",
            "2d29289272c0345f",
            "04ad4a712d3067e5",
            "480d9f15b0563c9c",
            "7463d453bcf5cff1",
            "df6e998b6d564fcf",
            "t1",
            "67633cd44823bbd2",
            "f1378f5cb764a371",
            "7d5983d557669a6c",
            "16c0807580a7c2a0",
            "2e189f3ce88031b6",
            "abfdc701c0c076ca",
            "6e70d09531a84ce8",
            "f1aeced22e9fa07f",
            "a1e2f6d090e5529d",
            "574eb541beac3d21",
            "e1ee20adb971c3d5",
            "77f6b3f3956f0d15",
            "fd7a048b60fd40cc"
        ],
        "x": 14,
        "y": 19,
        "w": 1192,
        "h": 629.5
    },
    {
        "id": "f37a603ed66fd806",
        "type": "group",
        "z": "af31bf2fe058f803",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "eb3b563a66c69093",
            "template1",
            "b66ec02ddb299fb9",
            "8ce06555f0c049ea",
            "8d1f7a72eda8b85e",
            "89c7af3d87bd6dfe",
            "1eec94c61974cd1c",
            "b6944b93af04a874",
            "6ad9e51e2daa380d",
            "b4cb292e1a70622c"
        ],
        "x": 14,
        "y": 59,
        "w": 752,
        "h": 242
    },
    {
        "id": "e2e84e52f82b08ea",
        "type": "group",
        "z": "ce724907bfebf75c",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "861d995a8063ca2d",
            "43f0b3674c4fcca2",
            "a3da71f32673dfd7",
            "e68d3d081a706fa9"
        ],
        "x": 14,
        "y": 699,
        "w": 652,
        "h": 122
    },
    {
        "id": "3856d925f2c69025",
        "type": "group",
        "z": "bf57a768b975c2e6",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "de3f35eb8cc6cc74",
            "50dd2fd4a701d53d",
            "fb00403833140d8b",
            "7d08a46ad06a9fe9",
            "0d7df80c86a6453d",
            "098f8c595d14aaa5",
            "121eeb47240d2a87",
            "3410874898204686",
            "48db1c2e18f88696",
            "034d3d2d8b8a62ca",
            "e438e1a719031b77",
            "2b8910900d4bbdc5",
            "8c04f7e36a9c4acb",
            "292f906d0611558c",
            "2e14724e3c3ae983",
            "0a60a836b38547df",
            "f071260bdcdcd056",
            "ad3cf096050d54e2",
            "3fe4ddc223bcbaeb",
            "4653356d90a8a897",
            "27336a80e583f921",
            "e1471d5c735bd6d3",
            "d722b84b332a8bb8",
            "7cb194b63eb56afd"
        ],
        "x": 34,
        "y": 19,
        "w": 1032,
        "h": 422
    },
    {
        "id": "e9121fbc4482804f",
        "type": "group",
        "z": "bf57a768b975c2e6",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "ac3df9612f272925",
            "d886cc1affb2bca7",
            "411d40273f5f425f",
            "4991f7f568969713",
            "776ed147123b92b8",
            "c2ddecb04917163d",
            "6d21e3f54526cbb1",
            "a0f17d909e19d179",
            "2912eea2927befa7",
            "1ee1bd387c952be2"
        ],
        "x": 34,
        "y": 931.5,
        "w": 792,
        "h": 309.5
    },
    {
        "id": "852f70d81ad10832",
        "type": "group",
        "z": "bf57a768b975c2e6",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "4a80936a1117d160",
            "a6ad4310a571b04f",
            "ff4b91c6f803a3cb",
            "2f60b40d268db108",
            "ec36fc960434517b",
            "7b381f39c3109c7b",
            "4ce40f669f564d3c",
            "e8dcf9dab51432cf",
            "19674a84640dbeb7",
            "34a8c9383eec9020",
            "c7a079d11845588a",
            "9f7d3fb78648fc41",
            "8fbf837b995b0dd9",
            "c0ef744af7819d7c",
            "c0dfb882e72c4bd7",
            "c5dbb4558df77bc6",
            "25d743058464db66",
            "746b7471fda81cac"
        ],
        "x": 34,
        "y": 459,
        "w": 852,
        "h": 442
    },
    {
        "id": "878de3ac45928077",
        "type": "group",
        "z": "eb60a9ea21d42f29",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "d7d28ff8.f76ba",
            "a37b37d1.aad508",
            "ecc06f5.bc3d39",
            "ea735d0.bb55da",
            "d4dee740ac379f10"
        ],
        "x": 34,
        "y": 1099,
        "w": 672,
        "h": 149.5
    },
    {
        "id": "0839f7b4c0cbb0a8",
        "type": "mqtt-broker",
        "name": "",
        "broker": "localhost",
        "port": 1883,
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": 4,
        "keepalive": 60,
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "6c1d30b5f16932dd",
        "type": "ui-base",
        "name": "ui_page",
        "path": "/dashboard",
        "appIcon": "",
        "includeClientData": true,
        "acceptsClientConfig": [
            "ui-notification",
            "ui-control"
        ],
        "showPathInSidebar": false,
        "headerContent": "page",
        "navigationStyle": "default",
        "titleBarStyle": "default",
        "showReconnectNotification": true,
        "notificationDisplayTime": 1,
        "showDisconnectNotification": true,
        "allowInstall": true
    },
    {
        "id": "72011230335eaee3",
        "type": "ui-theme",
        "name": "Default Theme",
        "colors": {
            "surface": "#087d10",
            "primary": "#0094ce",
            "bgPage": "#0d19c9",
            "groupBg": "#0d19c9",
            "groupOutline": "#0d19c9"
        },
        "sizes": {
            "density": "default",
            "pagePadding": "0px",
            "groupGap": "12px",
            "groupBorderRadius": "4px",
            "widgetGap": "12px"
        }
    },
    {
        "id": "74e147230f204214",
        "type": "ui-page",
        "name": "Safe At Home Alone",
        "ui": "6c1d30b5f16932dd",
        "path": "/page1",
        "icon": "account-question",
        "layout": "grid",
        "theme": "72011230335eaee3",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "4"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "6"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "9"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "4"
            }
        ],
        "order": 1,
        "className": "",
        "visible": "true",
        "disabled": "false"
    },
    {
        "id": "ab8f5143a421d4e8",
        "type": "ui-page",
        "name": "Instellingen",
        "ui": "6c1d30b5f16932dd",
        "path": "/page2",
        "icon": "cog-outline",
        "layout": "grid",
        "theme": "72011230335eaee3",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "5"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "5"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "5"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "5"
            }
        ],
        "order": 2,
        "className": "",
        "visible": true,
        "disabled": false
    },
    {
        "id": "1dd0da4fdcd94089",
        "type": "ui-page",
        "name": "Over deze app",
        "ui": "6c1d30b5f16932dd",
        "path": "/page5",
        "icon": "information",
        "layout": "grid",
        "theme": "72011230335eaee3",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "4"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "4"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "4"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "4"
            }
        ],
        "order": 5,
        "className": "",
        "visible": true,
        "disabled": false
    },
    {
        "id": "4de3d58d68afebf3",
        "type": "ui-group",
        "name": "MiniSAHA",
        "page": "74e147230f204214",
        "width": "5",
        "height": 1,
        "order": 1,
        "showTitle": false,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "a50d14b208aa0231",
        "type": "ui-group",
        "name": "Instellingen",
        "page": "ab8f5143a421d4e8",
        "width": "5",
        "height": 1,
        "order": 1,
        "showTitle": false,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "adc719ee09b9438b",
        "type": "ui-group",
        "name": "About",
        "page": "1dd0da4fdcd94089",
        "width": "4",
        "height": 1,
        "order": 1,
        "showTitle": false,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "c5ea61b98d8ee55d",
        "type": "ui-page",
        "name": "Tester",
        "ui": "6c1d30b5f16932dd",
        "path": "/page6",
        "icon": "home",
        "layout": "grid",
        "theme": "72011230335eaee3",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "4"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "4"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "4"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "4"
            }
        ],
        "order": 4,
        "className": "",
        "visible": false,
        "disabled": false
    },
    {
        "id": "b71c0e77d9debcfd",
        "type": "ui-group",
        "name": "Tester",
        "page": "c5ea61b98d8ee55d",
        "width": 6,
        "height": 1,
        "order": 1,
        "showTitle": false,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "e9d32d9d636d4a34",
        "type": "ui-page",
        "name": "Bluetooth",
        "ui": "6c1d30b5f16932dd",
        "path": "/page7",
        "icon": "bluetooth",
        "layout": "grid",
        "theme": "72011230335eaee3",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "4"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "4"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "4"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "4"
            }
        ],
        "order": 3,
        "className": "",
        "visible": true,
        "disabled": false
    },
    {
        "id": "549f1fa0e59e6a04",
        "type": "ui-group",
        "name": "Bluetooth",
        "page": "e9d32d9d636d4a34",
        "width": 6,
        "height": 1,
        "order": 1,
        "showTitle": false,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "bed8396ac6babffc",
        "type": "ui-page",
        "name": "Meldingsgeluiden",
        "ui": "6c1d30b5f16932dd",
        "path": "/page9",
        "icon": "home",
        "layout": "grid",
        "theme": "72011230335eaee3",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "4"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "4"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "4"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "4"
            }
        ],
        "order": 6,
        "className": "",
        "visible": "false",
        "disabled": "false"
    },
    {
        "id": "aae22fe947be766e",
        "type": "ui-group",
        "name": "Meldingsgeluiden",
        "page": "bed8396ac6babffc",
        "width": "5",
        "height": 1,
        "order": 1,
        "showTitle": false,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "41839ea3.d361b",
        "type": "function",
        "z": "bd2a966b.302e18",
        "name": "create checkIsAtHome script",
        "func": "var pingCount = msg.payload.PingCount;\nvar ipAddress = msg.payload.IPAddress;\nflow.set(\"IPAddress\", ipAddress);\n\nvar scriptFileName = \"checkIsAtHome\" + ipAddress;\nmsg = { filename:  scriptFileName };\n\nmsg.payload = \"#!/bin/bash\\nwhile true; do sudo arping -c \" + \npingCount + \n\" \" + ipAddress +\n\" > checkIsAtHome\" + ipAddress +\n\".temp ; cp checkIsAtHome\" + ipAddress + \".temp \" + \n\"checkIsAtHome\" + ipAddress + \".output; done\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 200,
        "y": 360,
        "wires": [
            [
                "902e5ac4.84f2b"
            ]
        ]
    },
    {
        "id": "902e5ac4.84f2b",
        "type": "file",
        "z": "bd2a966b.302e18",
        "name": "store in file",
        "filename": "",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 430,
        "y": 360,
        "wires": [
            [
                "74c702c8.65efb4"
            ]
        ]
    },
    {
        "id": "36d25876.739588",
        "type": "exec",
        "z": "bd2a966b.302e18",
        "command": "chmod +x ",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "make file executable",
        "x": 800,
        "y": 360,
        "wires": [
            [],
            [],
            [
                "5f4eee7c.2e29a"
            ]
        ]
    },
    {
        "id": "8f57678f.b55d08",
        "type": "exec",
        "z": "bd2a966b.302e18",
        "command": "pkill -f ",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "stop previous process",
        "x": 360,
        "y": 460,
        "wires": [
            [
                "c4a15a03.9be1e"
            ],
            [],
            []
        ]
    },
    {
        "id": "9c091226.6a239",
        "type": "exec",
        "z": "bd2a966b.302e18",
        "command": "bash -c ",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "start checkIsAtHome in background",
        "x": 820,
        "y": 440,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "c4a15a03.9be1e",
        "type": "function",
        "z": "bd2a966b.302e18",
        "name": "get cmd string",
        "func": "var ipAddress = flow.get(\"IPAddress\");\n\nmsg.payload = \" \\\"exec -a checkIsAtHome\" + ipAddress + \n              \" ./checkIsAtHome\" + ipAddress + \"\\\"&\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 580,
        "y": 440,
        "wires": [
            [
                "9c091226.6a239"
            ]
        ]
    },
    {
        "id": "faaf1234.933d38",
        "type": "comment",
        "z": "bd2a966b.302e18",
        "name": "Start checkIsAtHome script in the background upon startup",
        "info": "",
        "x": 250,
        "y": 260,
        "wires": []
    },
    {
        "id": "74f775fe.79f4cc",
        "type": "comment",
        "z": "bd2a966b.302e18",
        "name": "Precondition: sudo apt-get install arping !!!!!!!!!!!!!!!!!",
        "info": "",
        "x": 350,
        "y": 180,
        "wires": []
    },
    {
        "id": "b34deede.8145b",
        "type": "inject",
        "z": "bd2a966b.302e18",
        "name": "Regularly (30 s)",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "30",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 100,
        "wires": [
            [
                "95f84901.8005a8"
            ]
        ]
    },
    {
        "id": "3da93624.ce870a",
        "type": "file in",
        "z": "bd2a966b.302e18",
        "name": "read file",
        "filename": "filename",
        "filenameType": "msg",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 480,
        "y": 100,
        "wires": [
            [
                "f98fba99.4f5198"
            ]
        ]
    },
    {
        "id": "f98fba99.4f5198",
        "type": "function",
        "z": "bd2a966b.302e18",
        "name": "Return IsAtHome, SucceededPingCount, status",
        "func": "// get the ping count:\nvar succeededPingCount = 0;\nvar pos = 0;\nvar i = -1;\n\nwhile (pos != -1) {\n  pos = msg.payload.indexOf(\"index=\", i + 1);\n  if (pos != -1) succeededPingCount += 1;\n  i = pos;\n}\n\nvar result = succeededPingCount > 0 ? 1 : 0;\nmsg = { payload: result, topic: flow.get(\"IPAddress\") };\n\nvar msg_SucceededPingCount = { payload: succeededPingCount };\n\nvar msg_Status = { payload: flow.get(\"IPAddress\") + \", \" + Boolean(result) + \", \" + succeededPingCount};\n\nreturn [ msg, msg_SucceededPingCount, msg_Status ];\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 100,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "8dca38e7.59b758",
        "type": "comment",
        "z": "bd2a966b.302e18",
        "name": "Check if person is at home",
        "info": "",
        "x": 150,
        "y": 40,
        "wires": []
    },
    {
        "id": "95f84901.8005a8",
        "type": "function",
        "z": "bd2a966b.302e18",
        "name": "Get filename",
        "func": "var fileName = \"checkIsAtHome\" + flow.get(\"IPAddress\") + \".output\";\n\nmsg = { filename:  fileName };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 330,
        "y": 100,
        "wires": [
            [
                "3da93624.ce870a"
            ]
        ]
    },
    {
        "id": "74c702c8.65efb4",
        "type": "function",
        "z": "bd2a966b.302e18",
        "name": "get scriptName",
        "func": "msg.payload = \"checkIsAtHome\" + flow.get(\"IPAddress\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 360,
        "wires": [
            [
                "36d25876.739588"
            ]
        ]
    },
    {
        "id": "5f4eee7c.2e29a",
        "type": "function",
        "z": "bd2a966b.302e18",
        "name": "get scriptName",
        "func": "msg.payload = \"checkIsAtHome\" + flow.get(\"IPAddress\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 160,
        "y": 460,
        "wires": [
            [
                "8f57678f.b55d08"
            ]
        ]
    },
    {
        "id": "e0fbb4a9fd0354d0",
        "type": "function",
        "z": "7a37030e3e3276d9",
        "name": "create checkIsAtHome script",
        "func": "var pingCount = msg.payload.PingCount;\nvar ipAddress = msg.payload.IPAddress;\nflow.set(\"IPAddress\", ipAddress);\n\nvar scriptFileName = \"checkIsAtHome\" + ipAddress;\nmsg = { filename:  scriptFileName };\n\nmsg.payload = \"#!/bin/bash\\nwhile true; do sudo arping -c \" + \npingCount + \n\" \" + ipAddress +\n\" > checkIsAtHome\" + ipAddress +\n\".temp ; cp checkIsAtHome\" + ipAddress + \".temp \" + \n\"checkIsAtHome\" + ipAddress + \".output; done\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 200,
        "y": 360,
        "wires": [
            [
                "cb34ef38b28112f1"
            ]
        ]
    },
    {
        "id": "cb34ef38b28112f1",
        "type": "file",
        "z": "7a37030e3e3276d9",
        "name": "store in file",
        "filename": "filename",
        "filenameType": "msg",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 430,
        "y": 360,
        "wires": [
            [
                "c07fb01cbd0e1a36"
            ]
        ]
    },
    {
        "id": "f75c33f15a6f1e9a",
        "type": "exec",
        "z": "7a37030e3e3276d9",
        "command": "chmod +x ",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "make file executable",
        "x": 800,
        "y": 360,
        "wires": [
            [],
            [],
            [
                "9db7a230d8d8ded9"
            ]
        ]
    },
    {
        "id": "5d6fe42a49b745c9",
        "type": "exec",
        "z": "7a37030e3e3276d9",
        "command": "pkill -f ",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "stop previous process",
        "x": 360,
        "y": 460,
        "wires": [
            [
                "6799203e85ef9a07"
            ],
            [],
            []
        ]
    },
    {
        "id": "85ce8a28740483a4",
        "type": "exec",
        "z": "7a37030e3e3276d9",
        "command": "bash -c ",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "start checkIsAtHome in background",
        "x": 820,
        "y": 440,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "6799203e85ef9a07",
        "type": "function",
        "z": "7a37030e3e3276d9",
        "name": "get cmd string",
        "func": "var ipAddress = flow.get(\"IPAddress\");\n\nmsg.payload = \" \\\"exec -a checkIsAtHome\" + ipAddress + \n              \" ./checkIsAtHome\" + ipAddress + \"\\\"&\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 580,
        "y": 440,
        "wires": [
            [
                "85ce8a28740483a4"
            ]
        ]
    },
    {
        "id": "3d04040c2df879b0",
        "type": "comment",
        "z": "7a37030e3e3276d9",
        "name": "Start checkIsAtHome script in the background upon startup",
        "info": "",
        "x": 250,
        "y": 260,
        "wires": []
    },
    {
        "id": "a45022df36c5af08",
        "type": "comment",
        "z": "7a37030e3e3276d9",
        "name": "Precondition: sudo apt-get install arping !!!!!!!!!!!!!!!!!",
        "info": "",
        "x": 350,
        "y": 180,
        "wires": []
    },
    {
        "id": "76386622c0e5a3fe",
        "type": "inject",
        "z": "7a37030e3e3276d9",
        "name": "Regularly (30 s)",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "30",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 80,
        "wires": [
            [
                "86e654aae39d4d9a"
            ]
        ]
    },
    {
        "id": "238df2dd7c8038ee",
        "type": "file in",
        "z": "7a37030e3e3276d9",
        "name": "read file",
        "filename": "filename",
        "filenameType": "msg",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 480,
        "y": 100,
        "wires": [
            [
                "9aa4521d2bf238c3"
            ]
        ]
    },
    {
        "id": "9aa4521d2bf238c3",
        "type": "function",
        "z": "7a37030e3e3276d9",
        "name": "Return IsAtHome, SucceededPingCount, status",
        "func": "// get the ping count:\nvar succeededPingCount = 0;\nvar pos = 0;\nvar i = -1;\n\nwhile (pos != -1) {\n  pos = msg.payload.indexOf(\"index=\", i + 1);\n  if (pos != -1) succeededPingCount += 1;\n  i = pos;\n}\n\nvar result = succeededPingCount > 0 ? 1 : 0;\nmsg = { payload: result, topic: flow.get(\"IPAddress\") };\n\nvar msg_SucceededPingCount = { payload: succeededPingCount };\n\nvar msg_Status = { payload: flow.get(\"IPAddress\") + \", \" + Boolean(result) + \", \" + succeededPingCount};\n\nreturn [ msg, msg_SucceededPingCount, msg_Status ];\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 100,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "42db7e7a4a70564a",
        "type": "comment",
        "z": "7a37030e3e3276d9",
        "name": "Check if person is at home",
        "info": "",
        "x": 150,
        "y": 40,
        "wires": []
    },
    {
        "id": "86e654aae39d4d9a",
        "type": "function",
        "z": "7a37030e3e3276d9",
        "name": "Get filename",
        "func": "var fileName = \"checkIsAtHome\" + flow.get(\"IPAddress\") + \".output\";\n\nmsg = { filename:  fileName };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 330,
        "y": 100,
        "wires": [
            [
                "238df2dd7c8038ee"
            ]
        ]
    },
    {
        "id": "c07fb01cbd0e1a36",
        "type": "function",
        "z": "7a37030e3e3276d9",
        "name": "get scriptName",
        "func": "msg.payload = \"checkIsAtHome\" + flow.get(\"IPAddress\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 360,
        "wires": [
            [
                "f75c33f15a6f1e9a"
            ]
        ]
    },
    {
        "id": "9db7a230d8d8ded9",
        "type": "function",
        "z": "7a37030e3e3276d9",
        "name": "get scriptName",
        "func": "msg.payload = \"checkIsAtHome\" + flow.get(\"IPAddress\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 160,
        "y": 460,
        "wires": [
            [
                "5d6fe42a49b745c9"
            ]
        ]
    },
    {
        "id": "8c1fa1cfe914c30b",
        "type": "inject",
        "z": "7a37030e3e3276d9",
        "name": "Once after 5 s",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 140,
        "wires": [
            [
                "86e654aae39d4d9a"
            ]
        ]
    },
    {
        "id": "86a3b683d730904f",
        "type": "inject",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "Every 10 s",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "10",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 200,
        "wires": [
            [
                "04335944abb7d75d"
            ]
        ]
    },
    {
        "id": "dc25463a90653c93",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "Tijd triggers",
        "func": "// hoe laat is het nu?\nvar tijd_nu = global.get(\"getTime\")();\nlet tijd_nu_ms = global.get(\"tijdNaarMs\")(tijd_nu);\nlet meldingstijdGebruiker_ms = global.get(\"tijdNaarMs\")(global.get(\"TijdOK\"));\nlet beginToonVraag_ms = meldingstijdGebruiker_ms - 120 * 60000;\nlet overtijd_ms = meldingstijdGebruiker_ms + global.get(\"MeldPeriodeInMinuten\") * 60000;\n\n// Wanneer is het tijd om een vraag te stellen (2 uur voor de aangegeven tijd)?\nif ((tijd_nu_ms >= beginToonVraag_ms) &&\n    (tijd_nu_ms <  meldingstijdGebruiker_ms)) {\n    msg.payload = \"startToonVraag\";\n    node.status({ text: tijd_nu + \": startToonVraag\" });\n    return msg;\n}\n\n// Wanneer is het tijd om een meldingen te sturen naar de gebruiker?\nif ((tijd_nu_ms >= meldingstijdGebruiker_ms) &&\n    (tijd_nu_ms < overtijd_ms) ) {\n    msg.payload = \"meldingsPeriodeGebruiker\";\n    node.status({ text: tijd_nu + \": meldingsPeriodeGebruiker\" });\n    return msg;\n}\n\n// Wanneer is het tijd om ook een email te sturen naar de mantelzorgers?\nif (tijd_nu_ms >= overtijd_ms) {\n    msg.payload = \"meldingsPeriodeVoorbij\";\n    node.status({ text: tijd_nu + \": meldingsPeriodeVoorbij\" });\n    return msg;\n}\n\nif (tijd_nu_ms == 0) {\n    msg.payload = \"middernacht\";\n    node.status({ text: tijd_nu + \": middernacht\" });\n    return msg;\n}\n\nreturn;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 300,
        "wires": [
            [
                "72150be82696bdfc"
            ]
        ]
    },
    {
        "id": "2fe001daedc674d9",
        "type": "mqtt in",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "",
        "topic": "jaPressed",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 160,
        "y": 360,
        "wires": [
            [
                "72150be82696bdfc"
            ]
        ]
    },
    {
        "id": "f80c926aa5f4b4e1",
        "type": "mqtt in",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "",
        "topic": "neePressed",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 170,
        "y": 420,
        "wires": [
            [
                "72150be82696bdfc"
            ]
        ]
    },
    {
        "id": "94fd03500445951f",
        "type": "mqtt out",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "",
        "topic": "StateChanged",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 800,
        "y": 280,
        "wires": []
    },
    {
        "id": "6c1f652de628f1be",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Gebruiker",
        "func": "var tijd_nu = global.get(\"getTime\")();\n\nlet text = \"Beste \" + global.get(\"VoornaamGebruiker\") + \n           \", \\n\\n\" + \n\n           \"Ben je OK? Open de MiniSAHA app en bevestig.\" +\n            \"\\n\\n\\n\\n\" +\n            \"Test info: \\n\" + \n            global.get(\"RaspberryPiModel\") +\n            \"\\nBluetooth speaker: \" + global.get(\"BluetoothConnectedName\") +\n            \", Connected: \" + global.get(\"BluetoothConnected\");\n\nlet emailGebruiker = global.get(\"EmailGebruiker\") || \"\";\nif (emailGebruiker.indexOf(\"@\") == -1) {\n    msg.payload = \"Geen email gebruiker opgegeven.\"\n    node.status({ text: \"Send: \" + tijd_nu + \n    \" no emailgebruiker: \" + emailGebruiker });\n    return [null, msg];\n}\n\nmsg = {\n    to: emailGebruiker,\n    from: \"safeathomealone@gmail.com\",\n    topic: \"MiniSAHA: ben je OK?\",\n    payload: text\n}\n\nnode.status({ text: \"Send: \" + tijd_nu});\nreturn [msg, null];",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 620,
        "wires": [
            [
                "df1878820d0f62c5",
                "0362a76e4f7b1fd0"
            ],
            [
                "0362a76e4f7b1fd0"
            ]
        ]
    },
    {
        "id": "32e7240df75d8f3a",
        "type": "comment",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "https://www.w3schools.com/js/js_date_reference.asp",
        "info": "",
        "x": 310,
        "y": 1160,
        "wires": []
    },
    {
        "id": "04335944abb7d75d",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "Als Systerm is On",
        "func": "var tijd_nu = global.get(\"getTime\")();\n\nvar isSystemOn = global.get(\"SystemOn\");\nif (!isSystemOn) {\n    node.status({ text: tijd_nu + \": System is Off\" });\n    return;\n}\n\nnode.status({ text: tijd_nu + \": System is On\" });\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 200,
        "wires": [
            [
                "dc25463a90653c93"
            ]
        ]
    },
    {
        "id": "070af656b33c1a19",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Alarm email",
        "func": "let emailSleutelbewaarder1 = global.get(\"EmailSleutelbewaarder1\") || \"\";\nlet emailSleutelbewaarder2 = global.get(\"EmailSleutelbewaarder2\") || \"\";\n\nif (emailSleutelbewaarder1 == \"\" && emailSleutelbewaarder2 == \"\") {\n  node.status({ text: \"Send: \" + tijd_nu  + \" geen mantelzorgers\"});\n  return;\n}\n\nvar bericht = \"Beste mantelzorger, \" +\n    \"\\n\\nNeem contact op met \" +\n    global.get(\"VoornaamGebruiker\") +\n    \" want hij heeft niet gereageerd op de dagelijkse melding.\";\n\nif (emailSleutelbewaarder2 != \"\") {\n  bericht = \"Beste eerste Mantelzorger, \" +\n    \"\\n\\nNeem contact op met \" +\n    global.get(\"VoornaamGebruiker\") + \n    \" want hij heeft niet gereageerd op de dagelijkse melding.\" +\n    \"\\nStuur ook (via een reply to all) een bericht naar \" +\n    emailSleutelbewaarder2 + \n    \" dat je actie onderneemt.\" +\n    \"\\n\\nBeste tweede Mantelzorger,\" +\n    \"\\n\\nMocht je binnen een half uur na dit bericht geen bericht hebben ontvangen van de eerste Mantelzorger, neem dan zelf contact op met de gebruiker en laat dat de eerste Mantelzorger ook weten.\"\n}\n\nmsg.topic = \"MiniSAHA: er is niet gereageerd\";\nmsg.payload = bericht;\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 720,
        "wires": [
            [
                "0d0b3ee379dc41b0"
            ]
        ]
    },
    {
        "id": "0d0b3ee379dc41b0",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Mantelzorgers",
        "func": "var text = msg.payload;\n\nmsg = {\n    to: global.get(\"EmailSleutelbewaarder1\"),\n    cc: global.get(\"EmailSleutelbewaarder2\"),\n    from: \"safeathomealone@gmail.com\",\n    topic: msg.topic,\n    payload: text\n}\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu });\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 780,
        "wires": [
            [
                "df1878820d0f62c5"
            ]
        ]
    },
    {
        "id": "0aaa14729a8e7b05",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "currentState=Idle",
        "func": "global.set(\"currentState\", \"Idle\");\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: tijd_nu + \" currentState=Idle\"});\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 120,
        "wires": [
            [
                "94fd03500445951f"
            ]
        ]
    },
    {
        "id": "7e9bbcf4c96e333a",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Niet OK",
        "func": "msg.topic = \"MiniSAHA: \" +\n    global.get(\"VoornaamGebruiker\") +\n    \" is niet OK\";\n\nvar bericht = \"Beste mantelzorger,\\n\\n\"+\n    global.get(\"VoornaamGebruiker\") + \n    \" heeft NEE geantwoord op de vraag of hij OK was.\"\n\nmsg.payload = bericht;\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 780,
        "wires": [
            [
                "0d0b3ee379dc41b0"
            ]
        ]
    },
    {
        "id": "72150be82696bdfc",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "StateMachine",
        "func": "let states = global.get(\"states\");\nvar tijd_nu = global.get(\"getTime\")();\nlet currentState = global.get(\"currentState\");\nlet previousState = currentState;\nglobal.set(\"previousState\", previousState);\n\nlet trigger = msg.payload;\n\nswitch (currentState) {\n    case states.IDLE: {\n        if (trigger == \"startToonVraag\") currentState = states.TOONOKVRAAG;\n        if (trigger == \"meldingsPeriodeGebruiker\") currentState = states.MELDGEBRUIKER;\n        break;\n    }\n    case states.TOONOKVRAAGNIETTHUIS: {\n        if (trigger == \"isThuis\") currentState = states.TOONOKVRAAG;\n        if (trigger == \"meldingsPeriodeVoorbij\") currentState = states.IDLE;\n            break;\n        }\n    case states.TOONOKVRAAG: {\n        if (trigger == \"isNietThuis\") currentState = states.TOONOKVRAAGNIETTHUIS; \n        if (trigger == \"middernacht\") currentState = states.IDLE; \n        if (trigger == \"jaPressed\") currentState = states.ISOK;\n        if (trigger == \"neePressed\") currentState = states.ISNOTOK;\n        if (trigger == \"meldingsPeriodeGebruiker\") currentState = states.MELDGEBRUIKER;\n        if (trigger == \"meldingsPeriodeVoorbij\") currentState = states.OVERTIJD;\n        break;\n    }\n    case states.MELDGEBRUIKERNIETTHUIS: {\n        if (trigger == \"isThuis\") currentState = states.MELDGEBRUIKER; \n        if (trigger == \"meldingsPeriodeVoorbij\") currentState = states.IDLE;\n    }\n    case states.MELDGEBRUIKER: {\n        if (trigger == \"isNietThuis\") currentState = states.MELDGEBRUIKERNIETTHUIS; \n        if (trigger == \"middernacht\") currentState = states.IDLE; \n        if (trigger == \"jaPressed\") currentState = states.ISOK;\n        if (trigger == \"neePressed\") currentState = states.ISNOTOK;\n        if (trigger == \"meldingsPeriodeVoorbij\") currentState = states.OVERTIJD;\n        break;\n    }\n    case states.ISOK: {\n        if (trigger == \"middernacht\") currentState = states.IDLE; \n        break;\n    }\n    case states.ISNOTOK: {\n        if (trigger == \"middernacht\") currentState = states.IDLE; \n        break;\n    }\n    case states.OVERTIJD: {\n        if (trigger == \"middernacht\") currentState = states.IDLE;\n        if (trigger == \"jaPressed\") currentState = states.ISOK_OVERTIJD;\n        if (trigger == \"neePressed\") currentState = states.ISNOTOK_OVERTIJD;\n        break;\n    }\n    case states.ISOK_OVERTIJD: {\n        if (trigger == \"middernacht\") currentState = states.IDLE; \n        break;\n    }\n    case states.ISNOTOK_OVERTIJD: {\n        if (trigger == \"middernacht\") currentState = states.IDLE; \n        break;\n    }\n}\n\nglobal.set(\"currentState\", currentState);\n\nnode.status({ text: tijd_nu + \" State: \" + currentState });\n\nif (currentState != previousState) {\n    msg.payload = currentState;\n    return msg;\n}\nelse\n    return;\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 380,
        "wires": [
            [
                "94fd03500445951f",
                "97cd5aa2eb055baf"
            ]
        ]
    },
    {
        "id": "97cd5aa2eb055baf",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Email action",
        "func": "var tijd_nu = global.get(\"getTime\")();\nlet currentState = global.get(\"currentState\");\nlet previousState = global.get(\"previousState\");\n\nlet states = global.get(\"states\");\nswitch (currentState) {\n    case states.IDLE: {\n        msg.reset = true;\n        node.status({ text: tijd_nu + \", IDLE\" });\n        return [msg, null, null, null]; // stop met het sturen van berichten naar gebruiker\n    }\n    case states.TOONOKVRAAG: {\n        node.status({ text: tijd_nu + \", TOONOKVRAAG\" });\n        msg.reset = true;\n        return [msg, null, null, null];\n    }\n    case states.TOONOKVRAAGNIETTHUIS: {\n        node.status({ text: tijd_nu + \", TOONOKVRAAGNIETTHUIS\" });\n        msg.reset = true;\n        return [msg, null, null, null];\n    }\n    case states.MELDGEBRUIKERNIETTHUIS: {\n        node.status({ text: tijd_nu + \", MELDGEBRUIKERNIETTHUIS\" });\n        msg.reset = true;\n        return [msg, null, null, null];\n    }\n    case states.MELDGEBRUIKER: {\n        node.status({ text: tijd_nu + \", MELDGEBRUIKER, delay (min): \" + global.get(\"Herinnering\") });\n        msg.delay = global.get(\"Herinnering\") * 60000;\n        return [msg, null, null, null];\n    }\n    case states.ISOK: {\n        node.status({ text: tijd_nu + \", reset timer, ISOK\" });\n        msg.reset = true;\n        return [msg, null, null, null];\n    }\n    case states.ISNOTOK: {\n        node.status({ text: tijd_nu + \", ISNOTOK\" });\n        msg.reset = true;\n        return [msg, null, msg, null];\n    }\n    case states.OVERTIJD: {\n        if (currentState != previousState) {\n            node.status({ text: tijd_nu + \", OVERTIJD\" });\n            return [null, msg, null, null]; // Informeer mantelzorgers\n        }\n        break;\n    }\n    case states.ISOK_OVERTIJD: {\n        if (currentState != previousState) {\n            node.status({ text: tijd_nu + \", ISOK_OVERTIJD\" });\n            msg.reset = true;\n            msg.payload = \"JA\";\n            return [msg, null, null, msg];\n        }\n        break;\n    }\n    case states.ISNOTOK_OVERTIJD: {\n        if (currentState != previousState) {\n            node.status({ text: tijd_nu + \", ISNOTOK_OVERTIJD\" });\n            msg.reset = true;\n            msg.payload = \"NEE\";\n            return [msg, null, null, msg];\n        }\n        break;\n    }\n}\nreturn;\n",
        "outputs": 4,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 150,
        "y": 740,
        "wires": [
            [
                "7406ab9d8567cc25"
            ],
            [
                "070af656b33c1a19"
            ],
            [
                "7e9bbcf4c96e333a"
            ],
            [
                "f66c2ba033e71dfe"
            ]
        ]
    },
    {
        "id": "f66c2ba033e71dfe",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Overtijd",
        "func": "msg.topic = \"MiniSAHA: alsnog op \" + msg.payload + \" gedrukt\";\n\nvar bericht = \"Beste mantelzorger(s), \\n\\n\"+ \n    global.get(\"VoornaamGebruiker\") + \n    \", heeft alsnog \" + msg.payload + \n    \" geantwoord op de vraag of hij OK was.\"\n\nmsg.payload = bericht;\n\nvar tijd_nu = global.get(\"getTime\")(); \nnode.status({ text: \"Send: \" + tijd_nu });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 840,
        "wires": [
            [
                "0d0b3ee379dc41b0"
            ]
        ]
    },
    {
        "id": "df1878820d0f62c5",
        "type": "e-mail",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "server": "smtp.gmail.com",
        "port": "465",
        "authtype": "BASIC",
        "saslformat": true,
        "token": "oauth2Response.access_token",
        "secure": true,
        "tls": true,
        "name": "",
        "dname": "",
        "x": 770,
        "y": 780,
        "wires": []
    },
    {
        "id": "e95199098a8ec21d",
        "type": "mqtt in",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "",
        "topic": "TijdOKChanged",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 120,
        "y": 120,
        "wires": [
            [
                "0aaa14729a8e7b05"
            ]
        ]
    },
    {
        "id": "7406ab9d8567cc25",
        "type": "trigger",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Repeat",
        "op1": "aaa",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "5",
        "extend": false,
        "overrideDelay": true,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 360,
        "y": 620,
        "wires": [
            [
                "6c1f652de628f1be"
            ],
            [
                "c9f88ef493593187"
            ]
        ]
    },
    {
        "id": "c9f88ef493593187",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "loop back",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 680,
        "wires": [
            [
                "7406ab9d8567cc25"
            ]
        ]
    },
    {
        "id": "f07ba5eecb0df09e",
        "type": "catch",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 300,
        "y": 1000,
        "wires": [
            [
                "cf1901877bfe59a8",
                "8322868abe70e928"
            ]
        ]
    },
    {
        "id": "8322868abe70e928",
        "type": "debug",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Error",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 1000,
        "wires": []
    },
    {
        "id": "98a637c918e7ffb3",
        "type": "inject",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "At Startup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 60,
        "wires": [
            [
                "93e66aed5528479a"
            ]
        ]
    },
    {
        "id": "93e66aed5528479a",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "Set global functions",
        "func": "global.set(\"tijdNaarMs\", function (tijd) { // e.g. \"09:15\"\n    let [h, m] = tijd.split(\":\").map(Number);\n    return (h * 60 + m) * 60000;\n});\n\nglobal.set(\"getTime\", function () {\n    let now = new Date();\n    return ('0' + now.getHours()).slice(-2) + \":\" + ('0' + now.getMinutes()).slice(-2);\n});\n\nglobal.set(\"states\", {\n    IDLE: \"Idle\",\n    TOONOKVRAAG: \"ToonOkVraag\",\n    TOONOKVRAAGNIETTHUIS: \"ToonOkVraagNietThuis\",\n    MELDGEBRUIKER: \"MeldGebruiker\",\n    MELDGEBRUIKERNIETTHUIS: \"MeldGebruikerNietThuis\",\n    ISOK: \"IsOk\",\n    ISNOTOK: \"IsNotOk\",\n    ISOK_OVERTIJD: \"IsOk_OverTijd\",\n    ISNOTOK_OVERTIJD: \"IsNotOk_OverTijd\",\n    OVERTIJD: \"OverTijd\"\n});\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: tijd_nu + \" global functions created\"});\n\nglobal.set(\"currentState\", global.get(\"currentState\") ?? \"Idle\");\nglobal.set(\"TijdOK\", global.get(\"TijdOK\") ?? \" \");\nglobal.set(\"VoornaamGebruiker\", global.get(\"VoornaamGebruiker\") ?? \"\");\nglobal.set(\"EmailGebruiker\", global.get(\"EmailGebruiker\") ?? \"\");\nglobal.set(\"EmailSleutelbewaarder1\", global.get(\"EmailSleutelbewaarder1\") ?? \"\");\nglobal.set(\"EmailSleutelbewaarder2\", global.get(\"EmailSleutelbewaarder2\") ?? \"\");\n\nglobal.set(\"currentState\", \"Idle\");\nglobal.set(\"previousState\", \"Idle\");\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 60,
        "wires": [
            [
                "391e6a39648d43b8"
            ]
        ]
    },
    {
        "id": "391e6a39648d43b8",
        "type": "delay",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 520,
        "y": 60,
        "wires": [
            [
                "94fd03500445951f"
            ]
        ]
    },
    {
        "id": "cf1901877bfe59a8",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Paul",
        "func": "var text = msg.payload.error + \", \" +\nmsg.payload.error.source.name + \", \";\n\nmsg = {\n    to: \"paullangemeijer@hotmail.com\",\n    from: \"safeathomealone@gmail.com\",\n    topic: \"MiniSAHA: fout\",\n    payload: text\n}\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 960,
        "wires": [
            [
                "4f39baa7dbd5d547"
            ]
        ]
    },
    {
        "id": "4f39baa7dbd5d547",
        "type": "delay",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Rate limit",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "hour",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 600,
        "y": 960,
        "wires": [
            [
                "df1878820d0f62c5"
            ]
        ]
    },
    {
        "id": "1cbae632c31ff2b0",
        "type": "mqtt in",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "",
        "topic": "HerinneringChanged",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 600,
        "wires": [
            [
                "97cd5aa2eb055baf"
            ]
        ]
    },
    {
        "id": "da8fec47862aa2f5",
        "type": "inject",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Weekly",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 12 * * 0",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 900,
        "wires": [
            [
                "cfa6b22427e3edc3"
            ]
        ]
    },
    {
        "id": "cfa6b22427e3edc3",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "MiniSAHA actief",
        "func": "msg.topic = \"MiniSAHA: nog steeds actief bij \" + global.get(\"VoornaamGebruiker\");\n\nmsg.payload = \"Beste mantelzorger,\\n\\n\" + \n  \"Eens per week wordt dit bericht naar je gestuurd.\\n\" + \n  \"Zo weet je dat het MiniSAHA systeem nog steeds actief is bij \" + \n  global.get(\"VoornaamGebruiker\") + \".\\n\\n\" +\n\" Mocht je dit bericht niet meer ontvangen op zondag rond 12:00, neem dan contact op met hem.\";\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 900,
        "wires": [
            [
                "0d0b3ee379dc41b0"
            ]
        ]
    },
    {
        "id": "0362a76e4f7b1fd0",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "Sound?",
        "func": "var tijd_nu = global.get(\"getTime\")();\nlet connected = global.get(\"BluetoothConnected\");\nnode.status({ text: tijd_nu + \" connected=\" + connected });\nif (connected == \"yes\")   \n    return msg;\nelse\n    return null;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 620,
        "wires": [
            [
                "d5df2f8a93d16c6a"
            ]
        ]
    },
    {
        "id": "d5df2f8a93d16c6a",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "default or random?",
        "func": "let random = global.get(\"BluetoothRandomSound\");\nnode.status({ text: \"random=\" + random });\n\nif (random)\n  return [msg, null];\nelse {\n  msg.payload = global.get(\"BluetoothSound\");\n  return [null, msg]\n}\n",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 150,
        "y": 1120,
        "wires": [
            [
                "494c0e1626e74b03"
            ],
            [
                "9a6d5159979437b8"
            ]
        ]
    },
    {
        "id": "494c0e1626e74b03",
        "type": "exec",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "command": "ls .node-red/projects/MiniSAHA/sounds/*.mp3",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "ls sounds",
        "x": 340,
        "y": 1100,
        "wires": [
            [
                "6e3e1642880f5295"
            ],
            [],
            []
        ]
    },
    {
        "id": "6e3e1642880f5295",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "random",
        "func": "let options = msg.payload.split(/\\n/);\noptions.pop();\nmsg.payload = options[Math.floor(Math.random() * options.length)];\nnode.status({ text: msg.payload });\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 1080,
        "wires": [
            [
                "9a6d5159979437b8"
            ]
        ]
    },
    {
        "id": "9a6d5159979437b8",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "join",
        "func": "var tijd_nu = global.get(\"getTime\")();\nnode.status({ text: tijd_nu + \", \" + msg.payload });\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 1140,
        "wires": [
            [
                "a9d22c1ccafb666e"
            ]
        ]
    },
    {
        "id": "a9d22c1ccafb666e",
        "type": "mqtt out",
        "z": "a380efb730bea147",
        "g": "2ce41e3897fb35ce",
        "name": "",
        "topic": "PlaySound",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 790,
        "y": 1140,
        "wires": []
    },
    {
        "id": "ba38e7032099ab38",
        "type": "inject",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "At Startup 20s",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "20",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 780,
        "y": 160,
        "wires": [
            [
                "94fd03500445951f"
            ]
        ]
    },
    {
        "id": "cd2ccbcdab9e2474",
        "type": "mqtt in",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "",
        "topic": "PersoonThuis",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 170,
        "y": 480,
        "wires": [
            [
                "a60b56107555d543"
            ]
        ]
    },
    {
        "id": "a60b56107555d543",
        "type": "function",
        "z": "a380efb730bea147",
        "g": "4e4ef64c30555769",
        "name": "isThuis?",
        "func": "var tijd_nu = global.get(\"getTime\")();\nvar isThuis = global.get(\"GebruikerIsAtHome\");\nmsg.payload = isThuis ? \"isThuis\" : \"isNietThuis\"\nnode.status({ text: tijd_nu + \": \" + msg.payload});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 480,
        "wires": [
            [
                "72150be82696bdfc"
            ]
        ]
    },
    {
        "id": "86d57ce8cd9b65da",
        "type": "mqtt in",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "",
        "topic": "StateChanged",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 160,
        "wires": [
            [
                "3be586184e50e4ea",
                "d14d455208d7b126",
                "d283ae10f4012c17"
            ]
        ]
    },
    {
        "id": "753a239026080219",
        "type": "mqtt out",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "",
        "topic": "jaPressed",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 840,
        "y": 120,
        "wires": []
    },
    {
        "id": "99b664e80a1908c6",
        "type": "mqtt out",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "",
        "topic": "neePressed",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 850,
        "y": 180,
        "wires": []
    },
    {
        "id": "3be586184e50e4ea",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "Enable/Disable",
        "func": "var msg = { enabled: false, \n    ui_update: { textColor: \"gray\" } };\n            \nlet states = global.get(\"states\");\nswitch (global.get(\"currentState\")) {\n    case states.TOONOKVRAAG:\n    case states.MELDGEBRUIKER: \n    case states.OVERTIJD: {\n        var msg = {\n            enabled: true,\n            ui_update: { textColor: \"white\" } };\n        break;\n    }\n    default: {\n        break;\n    }\n}\n\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: tijd_nu + \" \" + msg.enabled });\nreturn msg;\n\n/*\n\"red\"\n\"blue\"\n\"green\"\n\"yellow\"\n\"orange\"\n\"purple\"\n\"pink\"\n\"brown\"\n\"black\"\n\"white\"\n\"gray\"\n\n Extra veelgebruikte tinten\n\"cyan\" (lichtblauw)\n\"magenta\" (fel roze/paars)\n\"lime\" (felgroen)\n\"navy\" (donkerblauw)\n\"teal\" (blauwgroen)\n\"olive\" (olijfgroen)\n\"maroon\" (donkerrood)\n\"silver\" (lichtgrijs)\n\"gold\" (goudkleurig)\n\"indigo\" (diep paars/blauw)\n*/",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 160,
        "wires": [
            [
                "a5f6fedc4ec48281",
                "e9fa22955a89da80"
            ]
        ]
    },
    {
        "id": "dd466b9403f2d8f4",
        "type": "inject",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "OnStartup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "Welkom!",
        "payloadType": "str",
        "x": 130,
        "y": 480,
        "wires": [
            [
                "5f66bb58047a17de",
                "b2ce6b3ac89473bf"
            ]
        ]
    },
    {
        "id": "75841af45dc440b7",
        "type": "comment",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "icons: https://pictogrammers.com/library/mdi/",
        "info": "",
        "x": 210,
        "y": 600,
        "wires": []
    },
    {
        "id": "55d46207a0c02be9",
        "type": "change",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "SystemOn",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "5f66bb58047a17de",
        "type": "change",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "SystemOn",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "SystemOn",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 480,
        "wires": [
            [
                "00e6d8a574603f71"
            ]
        ]
    },
    {
        "id": "6f050edd963ed167",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "Systeem in/uit geschakeld",
        "func": "var bericht = \"Systeem uitgeschakeld.\";\nif (msg.payload) bericht = \"Systeem ingeschakeld.\";\n\nmsg.payload = bericht;\n\nnode.status({ fill: \"blue\", shape: \"ring\", text: bericht });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 360,
        "wires": [
            [
                "16395cfced8c47cb"
            ]
        ]
    },
    {
        "id": "e9fa22955a89da80",
        "type": "ui-button",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "group": "4de3d58d68afebf3",
        "name": "Nee",
        "label": "NEE",
        "order": 3,
        "width": "2",
        "height": "2",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "JaNeeButton",
        "icon": "",
        "iconPosition": "left",
        "payload": "neePressed",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "yellow",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 610,
        "y": 180,
        "wires": [
            [
                "99b664e80a1908c6"
            ]
        ]
    },
    {
        "id": "a5f6fedc4ec48281",
        "type": "ui-button",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "group": "4de3d58d68afebf3",
        "name": "Ja",
        "label": "JA",
        "order": 2,
        "width": "2",
        "height": "2",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "JaNeeButton",
        "icon": "",
        "iconPosition": "left",
        "payload": "jaPressed",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "yellow",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 610,
        "y": 120,
        "wires": [
            [
                "753a239026080219"
            ]
        ]
    },
    {
        "id": "55706aed47335f02",
        "type": "ui-switch",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "Systeem actief",
        "label": "",
        "group": "4de3d58d68afebf3",
        "order": 10,
        "width": "1",
        "height": "1",
        "passthru": false,
        "decouple": false,
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "className": "",
        "layout": "row-left",
        "clickableArea": "switch",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 640,
        "y": 480,
        "wires": [
            [
                "55d46207a0c02be9",
                "6f050edd963ed167"
            ]
        ]
    },
    {
        "id": "4c44736709d21bb0",
        "type": "ui-text",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "group": "4de3d58d68afebf3",
        "order": 1,
        "width": "4",
        "height": "2",
        "name": "Vraag",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": true,
        "font": "",
        "fontSize": "24",
        "color": "#ffffff",
        "wrapText": true,
        "className": "TextNode",
        "value": "payload",
        "valueType": "msg",
        "x": 610,
        "y": 60,
        "wires": []
    },
    {
        "id": "1c70b188ec53d6ab",
        "type": "ui-text",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "group": "4de3d58d68afebf3",
        "order": 4,
        "width": "5",
        "height": "2",
        "name": "Response",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": true,
        "font": "",
        "fontSize": "24",
        "color": "#ffffff",
        "wrapText": true,
        "className": "TextNode",
        "value": "payload",
        "valueType": "msg",
        "x": 620,
        "y": 280,
        "wires": []
    },
    {
        "id": "b81cb7c076621c31",
        "type": "ui-text",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "group": "4de3d58d68afebf3",
        "order": 7,
        "width": 0,
        "height": 0,
        "name": "Alarm bericht",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": true,
        "font": "",
        "fontSize": "24",
        "color": "#ffff00",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 730,
        "y": 840,
        "wires": []
    },
    {
        "id": "f720e78159430790",
        "type": "ui-text",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "group": "4de3d58d68afebf3",
        "order": 9,
        "width": "3",
        "height": "1",
        "name": "Persoon thuis?",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": true,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 640,
        "y": 540,
        "wires": []
    },
    {
        "id": "131f564f42824545",
        "type": "mqtt in",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "",
        "topic": "PersoonThuis",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 540,
        "wires": [
            [
                "b2ce6b3ac89473bf"
            ]
        ]
    },
    {
        "id": "b2ce6b3ac89473bf",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "Ja/Nee",
        "func": "var isThuis = global.get(\"GebruikerIsAtHome\");\n\nvar text = \"Mobiel: geen IP adres.\";\n\nvar ipMobiel = global.get(\"IP_Mobiel\"); \nif (ipMobiel && ipMobiel.length > 0) {\n    if (isThuis) {\n        text = \"Mobiel gedetecteerd.\";\n    }\n    else {\n        text = \"Mobiel NIET gedetecteerd.\";\n    }\n}\n\nvar msg = { payload: text };\n\nif (isThuis) \n    msg.ui_update = { color: \"#ffffff\"} // wit ;\nelse\n    msg.ui_update = { color: \"#ff0000\"} // rood ;\n\nnode.status({ text: text });\nreturn msg;\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 540,
        "wires": [
            [
                "f720e78159430790",
                "c3e2a51a02b00916"
            ]
        ]
    },
    {
        "id": "d14d455208d7b126",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "Vraag",
        "func": "let states = global.get(\"states\");\nmsg.payload = global.get(\"VoornaamGebruiker\");\n\nswitch (global.get(\"currentState\")) {\n    case states.TOONOKVRAAG: \n    case states.MELDGEBRUIKER: {\n        msg.payload += \", ben je OK?\";\n        break;\n    }\n    case states.TOONOKVRAAGNIETTHUIS: \n    case states.MELDGEBRUIKERNIETTHUIS: {\n        msg.payload += \", je bent nu niet thuis\";\n        break;\n    }\n    case states.OVERTIJD: {\n        msg.payload += \", ben je OK? <br>Overtijd: er is een bericht naar mantelzorger(s) gestuurd.\";\n        break;\n    }    \n    default: {\n        msg.payload += \", er is geen vraag voor nu.\";\n        break;\n    }\n}\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({text: tijd_nu + \" \" + msg.payload});\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 60,
        "wires": [
            [
                "4c44736709d21bb0"
            ]
        ]
    },
    {
        "id": "d283ae10f4012c17",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "Response",
        "func": "let currentState = global.get(\"currentState\");\nlet previousState = global.get(\"previousState\");\n\nmsg.payload = \"\";\n\nlet states = global.get(\"states\");\n\nif (currentState != previousState) {\n    switch (global.get(\"currentState\")) {\n        case states.ISOK: {\n            msg.payload = \"Dank je wel! Fijne Dag.\";\n            break;\n        }\n        case states.ISOK_OVERTIJD: {\n            msg.payload = \"Dank je wel! Fijne Dag. <br>De mantelzorger(s) zijn geinformeerd.\";\n            break;\n        }\n        case states.ISNOTOK_OVERTIJD: \n        case states.ISNOTOK: {\n            msg.payload = \"Wat vervelend! <br>De mantelzorger(s) zijn geinformeerd.\";\n            break;\n        }\n        default: {\n            break;\n        }\n    }\n}\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({text: tijd_nu + \" \" + msg.payload});\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 240,
        "wires": [
            [
                "16395cfced8c47cb"
            ]
        ]
    },
    {
        "id": "16395cfced8c47cb",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "join",
        "func": "var now = new Date();\nvar tijd_nu = now.getHours() + \":\" + ('0' + now.getMinutes()).slice(-2);;\nnode.status({ text: tijd_nu + \" \"+ msg.payload });\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 280,
        "wires": [
            [
                "1c70b188ec53d6ab",
                "0436958281830a8e"
            ]
        ]
    },
    {
        "id": "00e6d8a574603f71",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "default",
        "func": "if (msg.payload == null) {\n    msg.payload = true;\n    global.set(\"SystemOn\", true);\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 480,
        "wires": [
            [
                "55706aed47335f02"
            ]
        ]
    },
    {
        "id": "f31d4676aacdfc8e",
        "type": "ui-template",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "group": "",
        "page": "74e147230f204214",
        "ui": "",
        "name": "CSS button",
        "order": 1,
        "width": 0,
        "height": 0,
        "head": "",
        "format": ".JaNeeButton button {\n    font-size: 2.5em;\n}\n",
        "storeOutMessages": true,
        "passthru": true,
        "resendOnRefresh": true,
        "templateScope": "page:style",
        "className": "",
        "x": 630,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "b2edd67c1976f042",
        "type": "mqtt in",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "",
        "topic": "EmailError",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 100,
        "y": 300,
        "wires": [
            [
                "8a224d6b4c8e6e53"
            ]
        ]
    },
    {
        "id": "8a224d6b4c8e6e53",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "error",
        "func": "let emailGebruiker = global.get(\"EmailGebruiker\") || \"\";\nlet emailSleutelbewaarder1 = global.get(\"EmailSleutelbewaarder1\") || \"\";\nlet emailSleutelbewaarder2 = global.get(\"EmailSleutelbewaarder2\") || \"\";\n\nif (!emailGebruiker.includes(\"@\")) {\n    msg.payload = \"Fout: geen email adres gebruiker.\";\n}\n\nif ((!emailSleutelbewaarder1.includes(\"@\")) && \n    (!emailSleutelbewaarder1.includes(\"@\"))) {\n    msg.payload = \"Fout: geen email adres mantelzorgers.\";\n}\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 270,
        "y": 300,
        "wires": [
            [
                "16395cfced8c47cb"
            ]
        ]
    },
    {
        "id": "6ce9c1c05a07f0e4",
        "type": "ui-button",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "group": "4de3d58d68afebf3",
        "name": "ALARM",
        "label": "ALARM",
        "order": 5,
        "width": "2",
        "height": "2",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "JaNeeButton",
        "icon": "",
        "iconPosition": "left",
        "payload": "neePressed",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "yellow",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 100,
        "y": 700,
        "wires": [
            [
                "bf9647efa558a7d3",
                "4b53939b9023b8c0",
                "848574e93a41e0cc"
            ]
        ]
    },
    {
        "id": "7d9adb1d8b871f0c",
        "type": "ui-button",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "group": "4de3d58d68afebf3",
        "name": "CANCEL",
        "label": "CANCEL",
        "order": 6,
        "width": "2",
        "height": "2",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "JaNeeButton",
        "icon": "",
        "iconPosition": "left",
        "payload": "neePressed",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "yellow",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 100,
        "y": 760,
        "wires": [
            [
                "f84bc5be2fce9d39",
                "074f5b05354c5090",
                "848574e93a41e0cc"
            ]
        ]
    },
    {
        "id": "229bc4f563105a3f",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "Sleutelbewaarders",
        "func": "var text = msg.payload;\n\nmsg = {\n    to: global.get(\"EmailSleutelbewaarder1\"),\n    cc: global.get(\"EmailSleutelbewaarder2\"),\n    from: \"safeathomealone@gmail.com\",\n    topic: msg.topic,\n    payload: text\n}\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu });\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 720,
        "wires": [
            [
                "c519aa60e02572b1"
            ]
        ]
    },
    {
        "id": "c519aa60e02572b1",
        "type": "e-mail",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "server": "smtp.gmail.com",
        "port": "465",
        "authtype": "BASIC",
        "saslformat": true,
        "token": "oauth2Response.access_token",
        "secure": true,
        "tls": true,
        "name": "",
        "dname": "",
        "x": 790,
        "y": 720,
        "wires": []
    },
    {
        "id": "bf9647efa558a7d3",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "Alarm tekst",
        "func": "let emailSleutelbewaarder1 = global.get(\"EmailSleutelbewaarder1\") || \"\";\nlet emailSleutelbewaarder2 = global.get(\"EmailSleutelbewaarder2\") || \"\";\n\nif (emailSleutelbewaarder1 == \"\" && emailSleutelbewaarder2 == \"\") {\n  node.status({ text: \"Send: \" + tijd_nu  + \" geen mantelzorgers\"});\n  return;\n}\n\nvar bericht = \"Beste mantelzorger, \" +\n    \"\\n\\nNeem contact op met \" +\n    global.get(\"VoornaamGebruiker\") +\n    \" want hij heeft op de Alarm knop gedrukt.\";\n\nif (emailSleutelbewaarder2 != \"\") {\n  bericht = \"Beste eerste Mantelzorger, \" +\n    \"\\n\\nNeem contact op met \" +\n    global.get(\"VoornaamGebruiker\") + \n    \" want hij heeft op de noodknop gedrukt.\" +\n    \"\\nStuur ook (via een reply to all) een bericht naar \" +\n    emailSleutelbewaarder2 + \n    \" dat je actie onderneemt.\" +\n    \"\\n\\nBeste tweede Mantelzorger,\" +\n    \"\\n\\nMocht je binnen een half uur na dit bericht geen bericht hebben ontvangen van de eerste Mantelzorger, neem dan zelf contact op met de gebruiker en laat dat de eerste Mantelzorger ook weten.\"\n}\n\nmsg.topic = \"MiniSAHA: op Alarm knop gedrukt\";\nmsg.payload = bericht;\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 700,
        "wires": [
            [
                "229bc4f563105a3f"
            ]
        ]
    },
    {
        "id": "f84bc5be2fce9d39",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "Cancel Alarm",
        "func": "let emailSleutelbewaarder1 = global.get(\"EmailSleutelbewaarder1\") || \"\";\nlet emailSleutelbewaarder2 = global.get(\"EmailSleutelbewaarder2\") || \"\";\n\nif (emailSleutelbewaarder1 == \"\" && emailSleutelbewaarder2 == \"\") {\n  node.status({ text: \"Send: \" + tijd_nu  + \" geen mantelzorgers\"});\n  return;\n}\n\nvar bericht = \"Beste mantelzorger, \" +\n    \"\\n\\n \" +\n    global.get(\"VoornaamGebruiker\") +\n    \" heeft op Cancel Alarm gedrukt.\";\n\nmsg.topic = \"MiniSAHA: op Cancel Alarm gedrukt\";\nmsg.payload = bericht;\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: \"Send: \" + tijd_nu });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 760,
        "wires": [
            [
                "229bc4f563105a3f"
            ]
        ]
    },
    {
        "id": "4b53939b9023b8c0",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "feedback",
        "func": "msg.payload = global.get(\"getTime\")() + \": Alarm email gestuurd.\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 820,
        "wires": [
            [
                "b81cb7c076621c31"
            ]
        ]
    },
    {
        "id": "074f5b05354c5090",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "feedback",
        "func": "msg.payload = global.get(\"getTime\")() +\": Cancel email gestuurd.\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 880,
        "wires": [
            [
                "b81cb7c076621c31"
            ]
        ]
    },
    {
        "id": "f85ce69846f65989",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "clear",
        "func": "msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 940,
        "wires": [
            [
                "b81cb7c076621c31"
            ]
        ]
    },
    {
        "id": "848574e93a41e0cc",
        "type": "delay",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 380,
        "y": 940,
        "wires": [
            [
                "f85ce69846f65989"
            ]
        ]
    },
    {
        "id": "6c02930ddcad9dd8",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "clear",
        "func": "msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 340,
        "wires": [
            [
                "1c70b188ec53d6ab"
            ]
        ]
    },
    {
        "id": "0436958281830a8e",
        "type": "delay",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 500,
        "y": 340,
        "wires": [
            [
                "6c02930ddcad9dd8"
            ]
        ]
    },
    {
        "id": "d6b298f8ec85d61c",
        "type": "ui-text",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "group": "4de3d58d68afebf3",
        "order": 8,
        "width": 0,
        "height": 0,
        "name": "lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payloads",
        "valueType": "msg",
        "x": 620,
        "y": 400,
        "wires": []
    },
    {
        "id": "bd60c97adc37bf3b",
        "type": "ui-control",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "",
        "ui": "6c1d30b5f16932dd",
        "events": "all",
        "x": 660,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "79cda76e1cdcc076",
        "type": "function",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "set page Instellingen",
        "func": "msg.payload = \"Instellingen\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 1020,
        "wires": [
            [
                "bd60c97adc37bf3b"
            ]
        ]
    },
    {
        "id": "7e2f3d7baaebee6d",
        "type": "inject",
        "z": "1e372cb3d08d9182",
        "g": "bb314d79eca0c3fd",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 300,
        "y": 1020,
        "wires": [
            [
                "79cda76e1cdcc076"
            ]
        ]
    },
    {
        "id": "c3e2a51a02b00916",
        "type": "debug",
        "z": "1e372cb3d08d9182",
        "g": "4a425ad2d30f78bc",
        "name": "debug 1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 600,
        "wires": []
    },
    {
        "id": "dba3182f449692bb",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "TijdOK",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "c7a382e00daaa762",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "VoornaamGebruiker",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "210d4509be3e8c2a",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "EmailGebruiker",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "1db2268601835331",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "EmailSleutelbewaarder2",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "acdfb2cd148bff6b",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "EmailSleutelbewaarder1",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "ee88c907a0b09cd1",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "Instellingen aangepast",
        "func": "msg.payload = \"Instellingen aangepast.\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 160,
        "wires": [
            [
                "dd63a561601b450c"
            ]
        ]
    },
    {
        "id": "dd63a561601b450c",
        "type": "mqtt out",
        "z": "5c14e0941d341b42",
        "name": "",
        "topic": "Home_Response",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 890,
        "y": 160,
        "wires": []
    },
    {
        "id": "c3f276a2ad7a0959",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "VoornaamGebruiker",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "VoornaamGebruiker",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 180,
        "y": 100,
        "wires": [
            [
                "40cdbc12fde511c0"
            ]
        ]
    },
    {
        "id": "d79dc93d3be0348d",
        "type": "inject",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "3",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 110,
        "y": 40,
        "wires": [
            [
                "4abb19d96b88ba67"
            ]
        ]
    },
    {
        "id": "03a73053ad9f3c47",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "EmailGebruiker",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "EmailGebruiker",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 240,
        "wires": [
            [
                "7722ab3d73849d23"
            ]
        ]
    },
    {
        "id": "e4c83a107e69ec69",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "EmailSleutelbewaarder1",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "EmailSleutelbewaarder1",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 190,
        "y": 640,
        "wires": [
            [
                "bc64711aeceb5b57"
            ]
        ]
    },
    {
        "id": "fcb8a603643a65f9",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "EmailSleutelbewaarder2",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "EmailSleutelbewaarder2",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 190,
        "y": 700,
        "wires": [
            [
                "7630404a4410cc18"
            ]
        ]
    },
    {
        "id": "895ee0f7358cef53",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "TijdOK",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "TijdOK",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 130,
        "y": 820,
        "wires": [
            [
                "655933cca9c65716"
            ]
        ]
    },
    {
        "id": "fa655697e3f1bd1d",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "MobielGebruiker",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "cbe4d5b193c88548",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "MobielGebruiker",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "MobielGebruiker",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 360,
        "wires": [
            [
                "a2dcd0ec27b30c84"
            ]
        ]
    },
    {
        "id": "a6fd027bc0be280d",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "IP_Mobiel",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "13c630dd78517252",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "IP_Mobiel",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "IP_Mobiel",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 140,
        "y": 460,
        "wires": [
            [
                "3f047118cb814e7f"
            ]
        ]
    },
    {
        "id": "6827ed79fcbc1bcc",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "help tekst",
        "func": "msg.payload = \n\"<b>Je kan een melding krijgen op een Bluetooth speaker en/of via een alarmgeluid van een email. \" +\n\"<br></b><br>\" +\n\"<b>Als je alleen een Bluetooth speaker gebruikt (dit is simpel om te configureren), kan je dit veld leeg laten.\" +\n\"<br></b><br>\" +\n\"<b>Als je melding wilt via email, maak dan een nieuw email adres aan die alleen voor meldingen van deze app gebruikt gaat worden. \" +\n\"Want je wilt voor meldingen een uniek geluid kunnen kiezen.</b><br>\" +\n\"<br></b><br>\" +\n\"<b>Dat kan je doen door voor dit email adres een andere email app te gebruiken dan de standaard app. \" +\n\"Vervolgens stel je voor deze email app een uniek geluid in.</b><br>\" +\n\"<br></b><br>\" +\n\"<b>Tip: gebruik op Android geluid: 'Schat'.</b><br>\";\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 280,
        "wires": [
            [
                "cc825dfdb183c22b"
            ]
        ]
    },
    {
        "id": "c7a30ab24c9ec224",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "Spaces",
        "func": "// verwijder spaties\nlet origineleString = msg.payload;\nif (origineleString == undefined) return;\nlet zonderSpaties = origineleString.replace(/\\s+/g, \"\");\nmsg.payload = zonderSpaties;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 460,
        "wires": [
            [
                "a6fd027bc0be280d",
                "996abe576c2cecb2"
            ]
        ]
    },
    {
        "id": "f39bf68dcea766f2",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "MeldPeriodeInMinuten",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "da27f195c199f6ae",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "MeldPeriodeInMinuten",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "MeldPeriodeInMinuten",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 180,
        "y": 1000,
        "wires": [
            [
                "8432a47ba220719a"
            ]
        ]
    },
    {
        "id": "5cd5579edefbe928",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "help tekst",
        "func": "msg.payload = \n\"<b>De gebruiker moet binnen de meldperiode (b.v. 60 minuten) reageren in deze app.</b><br>\" +\n\"<br></b><br>\" +\n\"<b>Zo niet, dan wordt er een email gestuurd naar de mantelzorger(s) met het verzoek contact met je op te nemen.</b><br>\";\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 1100,
        "wires": [
            [
                "f24ffaab884e5a75"
            ]
        ]
    },
    {
        "id": "4abb19d96b88ba67",
        "type": "link out",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "mode": "link",
        "links": [
            "c9ec5160388cc29c",
            "ba5f9de83ae33543",
            "73afa7fb3453b035",
            "3a6f5a640cea07b3",
            "e4a4c204a25091da",
            "eb5258117d95a7ad",
            "5c2edaa6489039d0",
            "26417c5cfef73e15",
            "bdebfa0f1e99fc2e"
        ],
        "x": 225,
        "y": 40,
        "wires": []
    },
    {
        "id": "c9ec5160388cc29c",
        "type": "link in",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "links": [
            "4abb19d96b88ba67"
        ],
        "x": 45,
        "y": 1000,
        "wires": [
            [
                "da27f195c199f6ae"
            ]
        ]
    },
    {
        "id": "ba5f9de83ae33543",
        "type": "link in",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "links": [
            "4abb19d96b88ba67"
        ],
        "x": 45,
        "y": 100,
        "wires": [
            [
                "c3f276a2ad7a0959"
            ]
        ]
    },
    {
        "id": "73afa7fb3453b035",
        "type": "link in",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "links": [
            "4abb19d96b88ba67"
        ],
        "x": 45,
        "y": 240,
        "wires": [
            [
                "03a73053ad9f3c47"
            ]
        ]
    },
    {
        "id": "3a6f5a640cea07b3",
        "type": "link in",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "links": [
            "4abb19d96b88ba67"
        ],
        "x": 45,
        "y": 360,
        "wires": [
            [
                "cbe4d5b193c88548"
            ]
        ]
    },
    {
        "id": "e4a4c204a25091da",
        "type": "link in",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "links": [
            "4abb19d96b88ba67"
        ],
        "x": 45,
        "y": 460,
        "wires": [
            [
                "13c630dd78517252"
            ]
        ]
    },
    {
        "id": "eb5258117d95a7ad",
        "type": "link in",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "links": [
            "4abb19d96b88ba67"
        ],
        "x": 45,
        "y": 640,
        "wires": [
            [
                "e4c83a107e69ec69"
            ]
        ]
    },
    {
        "id": "5c2edaa6489039d0",
        "type": "link in",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "links": [
            "4abb19d96b88ba67"
        ],
        "x": 45,
        "y": 700,
        "wires": [
            [
                "fcb8a603643a65f9"
            ]
        ]
    },
    {
        "id": "26417c5cfef73e15",
        "type": "link in",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "links": [
            "4abb19d96b88ba67"
        ],
        "x": 45,
        "y": 820,
        "wires": [
            [
                "895ee0f7358cef53"
            ]
        ]
    },
    {
        "id": "40cdbc12fde511c0",
        "type": "ui-text-input",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Voornaam gebruiker",
        "label": "Voornaam gebruiker",
        "order": 1,
        "width": "2",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "text",
        "tooltip": "",
        "delay": "2000",
        "passthru": true,
        "sendOnDelay": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 540,
        "y": 100,
        "wires": [
            [
                "c7a382e00daaa762",
                "ee88c907a0b09cd1",
                "6e34a944a7019b1e"
            ]
        ]
    },
    {
        "id": "7722ab3d73849d23",
        "type": "ui-text-input",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Email gebruiker",
        "label": "Email adres gebruiker",
        "order": 3,
        "width": "4",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "email",
        "tooltip": "",
        "delay": "2000",
        "passthru": true,
        "sendOnDelay": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 520,
        "y": 240,
        "wires": [
            [
                "210d4509be3e8c2a"
            ]
        ]
    },
    {
        "id": "7630404a4410cc18",
        "type": "ui-text-input",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Email mantelzorger 2",
        "label": "Email adres mantelzorger 2",
        "order": 9,
        "width": "0",
        "height": "0",
        "topic": "topic",
        "topicType": "msg",
        "mode": "text",
        "tooltip": "",
        "delay": "2000",
        "passthru": true,
        "sendOnDelay": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 540,
        "y": 700,
        "wires": [
            [
                "1db2268601835331"
            ]
        ]
    },
    {
        "id": "0d14b59266171697",
        "type": "ui-text-input",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Tijd OK",
        "label": "Tijdstip melding sturen: ben je OK?",
        "order": 11,
        "width": "4",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "time",
        "tooltip": "",
        "delay": "2000",
        "passthru": true,
        "sendOnDelay": false,
        "sendOnBlur": true,
        "sendOnEnter": false,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 500,
        "y": 820,
        "wires": [
            [
                "9b36b60d6131042f"
            ]
        ]
    },
    {
        "id": "bc64711aeceb5b57",
        "type": "ui-text-input",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Email mantelzorger 1",
        "label": "Email adres mantelzorger 1",
        "order": 8,
        "width": "0",
        "height": "0",
        "topic": "topic",
        "topicType": "msg",
        "mode": "text",
        "tooltip": "",
        "delay": "2000",
        "passthru": true,
        "sendOnDelay": true,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 540,
        "y": 640,
        "wires": [
            [
                "acdfb2cd148bff6b"
            ]
        ]
    },
    {
        "id": "a2dcd0ec27b30c84",
        "type": "ui-text-input",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Mobiel gebruiker",
        "label": "06 nummer gebruiker",
        "order": 2,
        "width": "3",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "text",
        "tooltip": "",
        "delay": "2000",
        "passthru": true,
        "sendOnDelay": true,
        "sendOnBlur": false,
        "sendOnEnter": false,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 520,
        "y": 360,
        "wires": [
            [
                "fa655697e3f1bd1d"
            ]
        ]
    },
    {
        "id": "3f047118cb814e7f",
        "type": "ui-text-input",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "IP adres",
        "label": "WIFI IP adres van deze telefoon",
        "order": 5,
        "width": "4",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "text",
        "tooltip": "",
        "delay": "500",
        "passthru": true,
        "sendOnDelay": false,
        "sendOnBlur": true,
        "sendOnEnter": false,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 500,
        "y": 460,
        "wires": [
            [
                "c7a30ab24c9ec224"
            ]
        ]
    },
    {
        "id": "163dbba3527a1208",
        "type": "ui-text-input",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Meldperiode (in minuten)",
        "label": "Meldperiode (in minuten)",
        "order": 13,
        "width": "4",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "number",
        "tooltip": "",
        "delay": 300,
        "passthru": true,
        "sendOnDelay": true,
        "sendOnBlur": true,
        "sendOnEnter": false,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 550,
        "y": 1000,
        "wires": [
            [
                "f39bf68dcea766f2"
            ]
        ]
    },
    {
        "id": "d1640933aa5790c8",
        "type": "ui-button",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Help IP",
        "label": "?",
        "order": 6,
        "width": "1",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 500,
        "y": 500,
        "wires": [
            [
                "21d5374db39f6f21"
            ]
        ]
    },
    {
        "id": "96d36014946018e2",
        "type": "ui-button",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Help Meldperiode",
        "label": "?",
        "order": 14,
        "width": "1",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 530,
        "y": 1100,
        "wires": [
            [
                "5cd5579edefbe928"
            ]
        ]
    },
    {
        "id": "aa21372c06ac99e6",
        "type": "ui-text",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "order": 10,
        "width": 0,
        "height": 0,
        "name": "lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payloads",
        "valueType": "msg",
        "x": 500,
        "y": 580,
        "wires": []
    },
    {
        "id": "06e50d5277b96605",
        "type": "ui-text",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "order": 7,
        "width": 0,
        "height": 0,
        "name": "lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payloads",
        "valueType": "msg",
        "x": 500,
        "y": 760,
        "wires": []
    },
    {
        "id": "d79891686c8e66ba",
        "type": "ui-notification",
        "z": "5c14e0941d341b42",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": true,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Close",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 890,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "f24ffaab884e5a75",
        "type": "ui-notification",
        "z": "5c14e0941d341b42",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": true,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Close",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 890,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "996abe576c2cecb2",
        "type": "mqtt out",
        "z": "5c14e0941d341b42",
        "name": "",
        "topic": "IPAdressUser",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 880,
        "y": 400,
        "wires": []
    },
    {
        "id": "f487e19abb196edc",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Herinnering",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 1160,
        "wires": [
            []
        ]
    },
    {
        "id": "2825429d7e218b9b",
        "type": "change",
        "z": "5c14e0941d341b42",
        "name": "Herinnering",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Herinnering",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 150,
        "y": 1160,
        "wires": [
            [
                "590a24117a7d6877"
            ]
        ]
    },
    {
        "id": "bdebfa0f1e99fc2e",
        "type": "link in",
        "z": "5c14e0941d341b42",
        "name": "OnStartup",
        "links": [
            "4abb19d96b88ba67"
        ],
        "x": 35,
        "y": 1160,
        "wires": [
            [
                "2825429d7e218b9b"
            ]
        ]
    },
    {
        "id": "eecb60f839dc5afc",
        "type": "ui-text-input",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Herinnering",
        "label": "Melding herhalen na (in minuten)",
        "order": 15,
        "width": "0",
        "height": "0",
        "topic": "topic",
        "topicType": "msg",
        "mode": "number",
        "tooltip": "",
        "delay": 300,
        "passthru": true,
        "sendOnDelay": true,
        "sendOnBlur": true,
        "sendOnEnter": false,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 510,
        "y": 1160,
        "wires": [
            [
                "f487e19abb196edc",
                "3d702f0ad5e3389a"
            ]
        ]
    },
    {
        "id": "590a24117a7d6877",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "5",
        "func": "if (msg.payload == null) {\n    msg.payload = 5;\n    global.set(\"Herinnering\", msg.payload);\n    node.status({ text: msg.payload });\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 1160,
        "wires": [
            [
                "eecb60f839dc5afc"
            ]
        ]
    },
    {
        "id": "4a202b76747eac9b",
        "type": "mqtt out",
        "z": "5c14e0941d341b42",
        "name": "",
        "topic": "TijdOKChanged",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 880,
        "y": 860,
        "wires": []
    },
    {
        "id": "5dd81c36547166d6",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "help tekst",
        "func": "msg.payload = \n\"<b>Vanaf dit moment ontvang je meldingen via email met de vraag of je OK bent.</b><br>\" +\n\"<br></b><br>\" +\n\"<b>Echter al 2 uur voor dit tijdstip kan je in de app aangeven dat je OK bent. Je krijgt dan ook geen meldingen meer.</b><br>\"\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 920,
        "wires": [
            [
                "e5c27da5e10601ac"
            ]
        ]
    },
    {
        "id": "5574ceb8a61ddb47",
        "type": "ui-button",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Help tijd OK",
        "label": "?",
        "order": 12,
        "width": "1",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 510,
        "y": 920,
        "wires": [
            [
                "5dd81c36547166d6"
            ]
        ]
    },
    {
        "id": "e5c27da5e10601ac",
        "type": "ui-notification",
        "z": "5c14e0941d341b42",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": true,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Close",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 890,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "21d5374db39f6f21",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "help tekst",
        "func": "msg.payload = \n\"<b>Het IP-adres van de WIFI verbinding van je telefoon wordt gebruikt om te zien of je in huis bent. \" +\n\"Als je niet thuis bent, ontvang je geen vraag of je OK bent.</b><br>\" +\n\"<br></b><br>\" +\n\"<b>Dit IP-adres kan je vinden bij Instellingen van je mobiel. \" +\n\"Voor ieder merk en type telefoon is dat anders.</b><br>\" +\n\"<br></b><br>\" +\n\"<b>Je kan het zo ongeveer vinden:</b><br>\"+\n\"<b>1. Instellingen --> Verbindingen --> WIFI.</b><br>\" +\n\"<b>2. Tik op het verbonden netwerk (of Instellingen daarnaast).</b><br>\" +\n\"<b>3. Daar zie je ergens het IP-adres staan.</b><br>\" +\n\"<br></b><br>\" +\n\"<b>Voorbeeld van een IP-adres is: '192.168.2.68'.</b><br>\" +\n\"<br></b><br>\" +\n\"<b>Als blijkt dat je mobiel soms niet gedetecteerd wordt, \" + \n\" ga naar In.stellingen  Apps  (kies een app die altijd actief mag zijn, bv. Chrome)  Batterij  Onbeperkt</b><br>\";\n\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 500,
        "wires": [
            [
                "d79891686c8e66ba"
            ]
        ]
    },
    {
        "id": "8b7619373fc6f4a5",
        "type": "ui-button",
        "z": "5c14e0941d341b42",
        "group": "a50d14b208aa0231",
        "name": "Help Email gebruiker",
        "label": "?",
        "order": 4,
        "width": "1",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 540,
        "y": 280,
        "wires": [
            [
                "6827ed79fcbc1bcc"
            ]
        ]
    },
    {
        "id": "cc825dfdb183c22b",
        "type": "ui-notification",
        "z": "5c14e0941d341b42",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": true,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Close",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 890,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "d2f2d7243a624cab",
        "type": "comment",
        "z": "5c14e0941d341b42",
        "name": "Weergave is altijd AM/PM",
        "info": "",
        "x": 690,
        "y": 780,
        "wires": []
    },
    {
        "id": "8432a47ba220719a",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "60",
        "func": "if (msg.payload == null) {\n    msg.payload = 60;\n    global.set(\"MeldPeriodeInMinuten\", msg.payload);\n    node.status({ text: '\"null: ' + msg.payload + '\"' });\n}        \nnode.status({ text: '\"' + msg.payload + '\"' });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 1000,
        "wires": [
            [
                "163dbba3527a1208"
            ]
        ]
    },
    {
        "id": "655933cca9c65716",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "09:00",
        "func": "if (msg.payload == null || msg.payload.trim() == \"\") { \n    msg.payload = \"09:00\";\n    global.set(\"TijdOK\", msg.payload);\n    node.status({ text: '\"was empty: ' + msg.payload + '\"' });\n}\nnode.status({ text: '\"' + msg.payload + '\"'});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 820,
        "wires": [
            [
                "0d14b59266171697"
            ]
        ]
    },
    {
        "id": "9b36b60d6131042f",
        "type": "function",
        "z": "5c14e0941d341b42",
        "name": "Changed?",
        "func": "if (msg.payload != global.get(\"TijdOK\")) {\n    node.status({ text: \"'\"+ msg.payload + \"'\"});\n    return msg;\n}\nelse\n    return;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 820,
        "wires": [
            [
                "dba3182f449692bb",
                "4a202b76747eac9b"
            ]
        ]
    },
    {
        "id": "3d702f0ad5e3389a",
        "type": "mqtt out",
        "z": "5c14e0941d341b42",
        "name": "",
        "topic": "HerinneringChanged",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 900,
        "y": 1220,
        "wires": []
    },
    {
        "id": "6e34a944a7019b1e",
        "type": "mqtt out",
        "z": "5c14e0941d341b42",
        "name": "",
        "topic": "StateChanged",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 880,
        "y": 60,
        "wires": []
    },
    {
        "id": "5a792b79ee924fcc",
        "type": "inject",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "OnStart",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 600,
        "wires": [
            [
                "e677c617d3a5d29d"
            ]
        ]
    },
    {
        "id": "efef419a3cac5a8b",
        "type": "ui-button",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "group": "adc719ee09b9438b",
        "name": "Update",
        "label": "Update",
        "order": 7,
        "width": "2",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "buttonupdate",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 100,
        "y": 720,
        "wires": [
            [
                "6c2c688ef0fa2f63"
            ]
        ]
    },
    {
        "id": "eb3b563a66c69093",
        "type": "ui-text",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "group": "adc719ee09b9438b",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "About",
        "label": "De MiniSAHA app is bedoeld voor de alleenstaande oudere. Met deze app kan je instellen hoe laat je een melding wilt ontvangen op je Bluetooth speaker en/of telefoon om te controleren of het goed met je gaat. Mocht je niet binnen een bepaalde tijd reageren, dan ontvangt een andere persoon een email met de vraag om te kijken hoe het met je gaat.",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": true,
        "font": "",
        "fontSize": "18",
        "color": "#ffffff",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 610,
        "y": 100,
        "wires": []
    },
    {
        "id": "226a8c5bfb54aa32",
        "type": "ui-text",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "group": "adc719ee09b9438b",
        "order": 6,
        "width": "2",
        "height": "1",
        "name": "Versie",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 630,
        "y": 500,
        "wires": []
    },
    {
        "id": "38a6029999573c13",
        "type": "ui-text",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "group": "adc719ee09b9438b",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Auteur",
        "label": "Digidokters SONENBREUGELVERBINDT",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 630,
        "y": 380,
        "wires": []
    },
    {
        "id": "7640224f513f74de",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "command": "wget https://raw.githubusercontent.com/PauLL54/minisaha/main/version.txt",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "get version.txt",
        "x": 420,
        "y": 720,
        "wires": [
            [
                "44f8e182ea2d2fc3"
            ],
            [],
            []
        ]
    },
    {
        "id": "60d1d31d381e01eb",
        "type": "function",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "rm \\n",
        "func": "msg.payload = msg.payload.replace(/[\\r\\n]+/g, '');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 600,
        "wires": [
            [
                "940e764301d9d266",
                "95ed60f262f1803c"
            ]
        ]
    },
    {
        "id": "e677c617d3a5d29d",
        "type": "file in",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "current version",
        "filename": ".node-red/projects/MiniSAHA/version.txt",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 280,
        "y": 600,
        "wires": [
            [
                "60d1d31d381e01eb"
            ]
        ]
    },
    {
        "id": "940e764301d9d266",
        "type": "change",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "version",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "6f445b4448b59170",
        "type": "ui-text",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "group": "adc719ee09b9438b",
        "order": 8,
        "width": 0,
        "height": 0,
        "name": "Update msg",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 710,
        "y": 840,
        "wires": []
    },
    {
        "id": "95ed60f262f1803c",
        "type": "function",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "Versie:",
        "func": "msg.payload = \"Versie: \" + msg.payload;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 500,
        "wires": [
            [
                "226a8c5bfb54aa32"
            ]
        ]
    },
    {
        "id": "07af420f98d0e89a",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "sudo reboot",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "Reboot",
        "x": 760,
        "y": 1420,
        "wires": [
            [
                "e91938bbca103b42"
            ],
            [],
            []
        ]
    },
    {
        "id": "6c2c688ef0fa2f63",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "command": "rm version.txt*",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "rm old",
        "x": 270,
        "y": 720,
        "wires": [
            [
                "7640224f513f74de"
            ],
            [],
            []
        ]
    },
    {
        "id": "44f8e182ea2d2fc3",
        "type": "file in",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "latest",
        "filename": "version.txt",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 570,
        "y": 720,
        "wires": [
            [
                "5f841997def03bad"
            ]
        ]
    },
    {
        "id": "5f841997def03bad",
        "type": "function",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "rm \\n",
        "func": "msg.payload = msg.payload.replace(/[\\r\\n]+/g, '');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 720,
        "wires": [
            [
                "8341310a2e59ed53"
            ]
        ]
    },
    {
        "id": "2632771a765ce800",
        "type": "delay",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "45",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 380,
        "y": 880,
        "wires": [
            [
                "e91938bbca103b42"
            ]
        ]
    },
    {
        "id": "e91938bbca103b42",
        "type": "function",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "clear",
        "func": "msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 880,
        "wires": [
            [
                "6f445b4448b59170"
            ]
        ]
    },
    {
        "id": "8341310a2e59ed53",
        "type": "function",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "Update?",
        "func": "var current = global.get(\"version\");\nvar latest = msg.payload;\n\nnode.status({ fill: \"blue\", shape: \"ring\", \n    text: \"current: \" + current +\n    \", latest: \" + latest    });\n\nif (latest > current) {\n    var msg2 = { payload: \"Update wordt geinstalleerd...\"};\n    return [msg, msg2];\n}\nelse {\n    var msg2 = { payload: \"Geen nieuwere versie beschikbaar.\"};\n   return [null, msg2]; \n}\nreturn msg;",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 180,
        "y": 840,
        "wires": [
            [
                "d7ff5ad4b1b79918"
            ],
            [
                "2632771a765ce800",
                "6f445b4448b59170"
            ]
        ]
    },
    {
        "id": "d7ff5ad4b1b79918",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "rm MiniSAHA.json",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "rm MiniSAHA.json",
        "x": 310,
        "y": 1100,
        "wires": [
            [
                "7a258c3a06322d6a"
            ],
            [],
            []
        ]
    },
    {
        "id": "7a258c3a06322d6a",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "wget https://raw.githubusercontent.com/PauLL54/minisaha/main/MiniSAHA.json",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "get MiniSAHA.json",
        "x": 570,
        "y": 1100,
        "wires": [
            [
                "28228f40169db06d"
            ],
            [],
            []
        ]
    },
    {
        "id": "02d2ac26c698a195",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "cp -f version.txt version_test.txt  MiniSAHA_cred.json MiniSAHA.json Logo.png bluetooth.py .node-red/projects/MiniSAHA",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "Install all files",
        "x": 290,
        "y": 1420,
        "wires": [
            [
                "c4571cfee0924b57"
            ],
            [],
            []
        ]
    },
    {
        "id": "1ad8ae65c31d2570",
        "type": "inject",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "OnStart",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 380,
        "y": 920,
        "wires": [
            [
                "e91938bbca103b42"
            ]
        ]
    },
    {
        "id": "da7b21ec87871d8c",
        "type": "catch",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 120,
        "y": 500,
        "wires": [
            [
                "4d1dba90ae296567",
                "3a750c7cbf887af3"
            ]
        ]
    },
    {
        "id": "4d1dba90ae296567",
        "type": "function",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "0000-00-00",
        "func": "msg.payload = \"0000-00-00\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 500,
        "wires": [
            [
                "95ed60f262f1803c",
                "940e764301d9d266"
            ]
        ]
    },
    {
        "id": "a1659a56c324e2cc",
        "type": "inject",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "At 00:00",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 660,
        "wires": [
            [
                "6c2c688ef0fa2f63"
            ]
        ]
    },
    {
        "id": "d706900fa126e361",
        "type": "ui-template",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "group": "",
        "page": "1dd0da4fdcd94089",
        "ui": "",
        "name": "CSS button",
        "order": 1,
        "width": 0,
        "height": 0,
        "head": "",
        "format": ".buttonupdate button {\n    font-size: 1.7em;\n}",
        "storeOutMessages": true,
        "passthru": true,
        "resendOnRefresh": true,
        "templateScope": "page:style",
        "className": "buttonupdate",
        "x": 110,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "template1",
        "type": "ui-template",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "group": "adc719ee09b9438b",
        "page": "",
        "ui": "",
        "name": "Afbeelding tonen",
        "order": 3,
        "width": "0",
        "height": "0",
        "format": "<template>\n    <div style=\"text-align:center;\">\n        <img src=\"/logo\" \n             style=\"max-width:40%; height:auto;\" \n             @click=\"send({payload: 'logo_clicked'})\" />\n    </div>\n</template>\n",
        "storeOutMessages": true,
        "passthru": true,
        "templateScope": "local",
        "className": "",
        "x": 650,
        "y": 180,
        "wires": [
            [
                "b6944b93af04a874"
            ]
        ]
    },
    {
        "id": "477a82641741c1d2",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "wget https://raw.githubusercontent.com/PauLL54/minisaha/main/Logo.png",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "get Logo.png",
        "x": 550,
        "y": 1260,
        "wires": [
            [
                "b119fd4598e51e41"
            ],
            [],
            []
        ]
    },
    {
        "id": "6ba99393e4c393d8",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "rm Logo.png",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "rm Logo.png",
        "x": 290,
        "y": 1260,
        "wires": [
            [
                "477a82641741c1d2"
            ],
            [],
            []
        ]
    },
    {
        "id": "28228f40169db06d",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "rm MiniSAHA_cred.json",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "rm MiniSAHA_cred.json",
        "x": 330,
        "y": 1180,
        "wires": [
            [
                "62cf14493c558309"
            ],
            [],
            []
        ]
    },
    {
        "id": "62cf14493c558309",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "wget https://raw.githubusercontent.com/PauLL54/minisaha/main/MiniSAHA_cred.json",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "get MiniSAHA_cred.json",
        "x": 590,
        "y": 1180,
        "wires": [
            [
                "6ba99393e4c393d8"
            ],
            [],
            []
        ]
    },
    {
        "id": "3a750c7cbf887af3",
        "type": "debug",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "catch all About",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 300,
        "y": 440,
        "wires": []
    },
    {
        "id": "b66ec02ddb299fb9",
        "type": "http in",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "name": "Get",
        "url": "/logo",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 180,
        "wires": [
            [
                "8ce06555f0c049ea"
            ]
        ]
    },
    {
        "id": "8ce06555f0c049ea",
        "type": "file in",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "name": "path Logo",
        "filename": ".node-red/projects/MiniSAHA/Logo.png",
        "filenameType": "str",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 300,
        "y": 180,
        "wires": [
            [
                "8d1f7a72eda8b85e"
            ]
        ]
    },
    {
        "id": "8d1f7a72eda8b85e",
        "type": "http response",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 430,
        "y": 180,
        "wires": []
    },
    {
        "id": "89c7af3d87bd6dfe",
        "type": "ui-text",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "group": "adc719ee09b9438b",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payloads",
        "valueType": "msg",
        "x": 620,
        "y": 140,
        "wires": []
    },
    {
        "id": "303fedb30576538b",
        "type": "inject",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 540,
        "wires": [
            [
                "4d1dba90ae296567"
            ]
        ]
    },
    {
        "id": "34d7ae63b33b2312",
        "type": "mqtt in",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "name": "",
        "topic": "Update",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 1100,
        "wires": [
            [
                "d7ff5ad4b1b79918"
            ]
        ]
    },
    {
        "id": "b119fd4598e51e41",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "rm bluetooth.py",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "rm bluetooth.py",
        "x": 300,
        "y": 1340,
        "wires": [
            [
                "05d5a950f617317c"
            ],
            [],
            []
        ]
    },
    {
        "id": "05d5a950f617317c",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "wget https://raw.githubusercontent.com/PauLL54/minisaha/main/bluetooth.py",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "get bluetooth.py",
        "x": 560,
        "y": 1340,
        "wires": [
            [
                "02d2ac26c698a195"
            ],
            [],
            []
        ]
    },
    {
        "id": "1eec94c61974cd1c",
        "type": "ui-control",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "name": "",
        "ui": "6c1d30b5f16932dd",
        "events": "all",
        "x": 620,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "b6944b93af04a874",
        "type": "function",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "name": "set page Tester",
        "func": "msg.payload = \"Tester\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 260,
        "wires": [
            [
                "1eec94c61974cd1c"
            ]
        ]
    },
    {
        "id": "6ad9e51e2daa380d",
        "type": "ui-button",
        "z": "af31bf2fe058f803",
        "d": true,
        "g": "f37a603ed66fd806",
        "group": "adc719ee09b9438b",
        "name": "Tester",
        "label": "Voor testers",
        "order": 9,
        "width": "0",
        "height": "0",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "buttonupdate",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 170,
        "y": 260,
        "wires": [
            [
                "b6944b93af04a874"
            ]
        ]
    },
    {
        "id": "c4571cfee0924b57",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "chmod +x .node-red/projects/MiniSAHA/bluetooth.py",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "chmod +x",
        "x": 540,
        "y": 1420,
        "wires": [
            [
                "07af420f98d0e89a"
            ],
            [],
            []
        ]
    },
    {
        "id": "b4cb292e1a70622c",
        "type": "comment",
        "z": "af31bf2fe058f803",
        "g": "f37a603ed66fd806",
        "name": "Navigeer naar de Test pagina door op het logo te klikken",
        "info": "",
        "x": 240,
        "y": 100,
        "wires": []
    },
    {
        "id": "6a267aeb779eac08",
        "type": "comment",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "name": "Update button en iedere nacht testen of een update nodig is",
        "info": "",
        "x": 260,
        "y": 400,
        "wires": []
    },
    {
        "id": "ba410ac8c1a26bad",
        "type": "comment",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "name": "Update procedure voor de gebruiker en tester",
        "info": "",
        "x": 430,
        "y": 1040,
        "wires": []
    },
    {
        "id": "363ef96aac78d4e7",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "wget https://raw.githubusercontent.com/PauLL54/minisaha/main/sounds/Goedemorgen.mp3",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "get sound",
        "x": 280,
        "y": 1520,
        "wires": [
            [
                "9328b12c82bcdb88"
            ],
            [],
            []
        ]
    },
    {
        "id": "9328b12c82bcdb88",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "cp -f Goedemorgen.mp3 .node-red/projects/MiniSAHA/sounds",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "Install sound",
        "x": 550,
        "y": 1520,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "3dc33bd26ddfd0cd",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "sudo systemctl restart nodered.service",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "Restart node-red",
        "x": 830,
        "y": 1660,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "b92aa98cbf16363f",
        "type": "inject",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 1040,
        "wires": [
            [
                "d7ff5ad4b1b79918"
            ]
        ]
    },
    {
        "id": "8032366086aa8de0",
        "type": "exec",
        "z": "af31bf2fe058f803",
        "g": "a49df4f119bb186e",
        "command": "cd .node-red; npm install @flowfuse/node-red-dashboard@latest",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "install dashboard@latest",
        "x": 590,
        "y": 1660,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "dff2dbca89ccfc06",
        "type": "ui-text",
        "z": "af31bf2fe058f803",
        "g": "5bb2b589a301c7c8",
        "group": "adc719ee09b9438b",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payloads",
        "valueType": "msg",
        "x": 640,
        "y": 440,
        "wires": []
    },
    {
        "id": "5624329dd5cb5b0a",
        "type": "inject",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "OnStart",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 400,
        "wires": [
            [
                "97382ae72dc98a86"
            ]
        ]
    },
    {
        "id": "ac6f3d5c09bce733",
        "type": "ui-button",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "name": "Test update",
        "label": "Update",
        "order": 8,
        "width": "2",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "buttonupdate",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 130,
        "y": 500,
        "wires": [
            [
                "148566cf72b33e1a"
            ]
        ]
    },
    {
        "id": "29faaa6a019e0e9b",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "order": 7,
        "width": "2",
        "height": "1",
        "name": "Test versie",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 750,
        "y": 320,
        "wires": []
    },
    {
        "id": "6f0b74ba5a27cc3e",
        "type": "exec",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "command": "wget https://raw.githubusercontent.com/PauLL54/minisaha/main/version_test.txt",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "get version_test.txt",
        "x": 450,
        "y": 500,
        "wires": [
            [
                "98ddd266a3e4c998"
            ],
            [],
            []
        ]
    },
    {
        "id": "2c5db89378881214",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "rm \\n",
        "func": "msg.payload = msg.payload.replace(/[\\r\\n]+/g, '');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 400,
        "wires": [
            [
                "2d76e161b54a56ff",
                "e3e7c591d92d8d6d"
            ]
        ]
    },
    {
        "id": "97382ae72dc98a86",
        "type": "file in",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "current test version",
        "filename": ".node-red/projects/MiniSAHA/version_test.txt",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 310,
        "y": 400,
        "wires": [
            [
                "2c5db89378881214"
            ]
        ]
    },
    {
        "id": "2d76e161b54a56ff",
        "type": "change",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "version_test",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "8d171fe450c7a81f",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "order": 9,
        "width": 0,
        "height": 0,
        "name": "Update msg",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 750,
        "y": 640,
        "wires": []
    },
    {
        "id": "148566cf72b33e1a",
        "type": "exec",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "command": "rm version_test.txt",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "rm old",
        "x": 290,
        "y": 500,
        "wires": [
            [
                "6f0b74ba5a27cc3e"
            ],
            [],
            []
        ]
    },
    {
        "id": "98ddd266a3e4c998",
        "type": "file in",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "latest",
        "filename": "version_test.txt",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 610,
        "y": 500,
        "wires": [
            [
                "bce54c96101eb7b7"
            ]
        ]
    },
    {
        "id": "bce54c96101eb7b7",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "rm \\n",
        "func": "msg.payload = msg.payload.replace(/[\\r\\n]+/g, '');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 500,
        "wires": [
            [
                "59d5c77dc1dc2a60"
            ]
        ]
    },
    {
        "id": "db6b4ac55c770429",
        "type": "delay",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "",
        "pauseType": "delay",
        "timeout": "30",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 340,
        "y": 680,
        "wires": [
            [
                "aefcaf0124832705"
            ]
        ]
    },
    {
        "id": "aefcaf0124832705",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "clear",
        "func": "msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 680,
        "wires": [
            [
                "8d171fe450c7a81f"
            ]
        ]
    },
    {
        "id": "59d5c77dc1dc2a60",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "Update?",
        "func": "var current = global.get(\"version_test\");\nvar latest = msg.payload;\n\nnode.status({ fill: \"blue\", shape: \"ring\", \n    text: \"current: \" + current +\n    \", latest: \" + latest    });\n\nif (latest > current) {\n    var msg2 = { payload: \"Nieuwe test versie wordt geinstalleerd...\"};\n    return [msg, msg2];\n}\nelse {\n    var msg2 = { payload: \"Geen nieuwere test versie beschikbaar.\"};\n   return [null, msg2]; \n}\nreturn msg;",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 620,
        "wires": [
            [
                "b6d0686a4823c0c2"
            ],
            [
                "db6b4ac55c770429",
                "8d171fe450c7a81f"
            ]
        ]
    },
    {
        "id": "ca12465c285a07be",
        "type": "inject",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "OnStart",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 340,
        "y": 740,
        "wires": [
            [
                "aefcaf0124832705"
            ]
        ]
    },
    {
        "id": "6cdb9cd1a55cd9dd",
        "type": "catch",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 140,
        "y": 320,
        "wires": [
            [
                "5fe7d4a09964b635",
                "233943e79ec596cb"
            ]
        ]
    },
    {
        "id": "5fe7d4a09964b635",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "0000-00-00",
        "func": "msg.payload = \"0000-00-00\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 320,
        "wires": [
            [
                "2d76e161b54a56ff",
                "e3e7c591d92d8d6d"
            ]
        ]
    },
    {
        "id": "82ea9c0c0b1c8052",
        "type": "ui-template",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "",
        "page": "c5ea61b98d8ee55d",
        "ui": "",
        "name": "CSS button",
        "order": 1,
        "width": 0,
        "height": 0,
        "head": "",
        "format": ".buttonupdate button {\n    font-size: 1.7em;\n}",
        "storeOutMessages": true,
        "passthru": true,
        "resendOnRefresh": true,
        "templateScope": "page:style",
        "className": "buttonupdate",
        "x": 130,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "233943e79ec596cb",
        "type": "debug",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "catch all About",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 340,
        "y": 280,
        "wires": []
    },
    {
        "id": "e3e7c591d92d8d6d",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "Test versie:",
        "func": "msg.payload = \"TestVersie \" + msg.payload;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 320,
        "wires": [
            [
                "29faaa6a019e0e9b"
            ]
        ]
    },
    {
        "id": "b6d0686a4823c0c2",
        "type": "mqtt out",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "",
        "topic": "Update",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 420,
        "y": 600,
        "wires": []
    },
    {
        "id": "9c9d4e18a631cc15",
        "type": "subflow:7a37030e3e3276d9",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "",
        "env": [],
        "x": 550,
        "y": 940,
        "wires": [
            [
                "849129e5cd170f06",
                "61806882e2c16761",
                "6ddc11d490af5fe8"
            ],
            [],
            [],
            []
        ]
    },
    {
        "id": "6ccc00486baecf9d",
        "type": "inject",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "At startup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.2",
        "topic": "",
        "payload": "4",
        "payloadType": "num",
        "x": 130,
        "y": 1020,
        "wires": [
            [
                "ebd1eb7739312b3d",
                "1029c725dc625feb"
            ]
        ]
    },
    {
        "id": "ebd1eb7739312b3d",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "IP adres & PingCount",
        "func": "var ipAddress = global.get(\"IP_Mobiel\");\nvar pingCount = msg.payload;\n\nmsg.payload = { IPAddress: ipAddress, PingCount: pingCount };\n\nnode.status({ fill:\"blue\", shape:\"ring\", \ntext: ipAddress + \", pingCount: \" + pingCount });\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 940,
        "wires": [
            [
                "9c9d4e18a631cc15"
            ]
        ]
    },
    {
        "id": "1029c725dc625feb",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "GebruikerIsAtHome=false",
        "func": "global.set(\"GebruikerIsAtHome\", false);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "849129e5cd170f06",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "set global GebruikerIsAtHome",
        "func": "global.set(\"GebruikerIsAtHome\", (msg.payload == 1));\nnode.status({ fill: \"blue\", shape: \"ring\", text: (msg.payload == 1) ? \"thuis\" : \"niet thuis\" });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "30a234133bcbd597",
        "type": "comment",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "Precondition: sudo apt-get install arping !!!!!!!!!!!!!!!!!",
        "info": "",
        "x": 260,
        "y": 840,
        "wires": []
    },
    {
        "id": "fa66a05f8c746a83",
        "type": "inject",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "Na 2 min",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "120",
        "topic": "",
        "payload": "20",
        "payloadType": "num",
        "x": 130,
        "y": 940,
        "wires": [
            [
                "ebd1eb7739312b3d"
            ]
        ]
    },
    {
        "id": "b0067e5db1bb638b",
        "type": "ui-chart",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "group": "b71c0e77d9debcfd",
        "name": "",
        "label": "",
        "order": 1,
        "chartType": "line",
        "category": "topic",
        "categoryType": "msg",
        "xAxisLabel": "",
        "xAxisProperty": "",
        "xAxisPropertyType": "timestamp",
        "xAxisType": "time",
        "xAxisFormat": "",
        "xAxisFormatType": "auto",
        "xmin": "",
        "xmax": "",
        "yAxisLabel": "",
        "yAxisProperty": "payload",
        "yAxisPropertyType": "msg",
        "ymin": "0",
        "ymax": "80",
        "bins": 10,
        "action": "append",
        "stackSeries": false,
        "pointShape": "circle",
        "pointRadius": 4,
        "showLegend": true,
        "removeOlder": "24",
        "removeOlderUnit": "3600",
        "removeOlderPoints": "1000",
        "colors": [
            "#04ff00",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#a347e1",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "textColor": [
            "#ffffff"
        ],
        "textColorDefault": false,
        "gridColor": [
            "#e5e5e5"
        ],
        "gridColorDefault": true,
        "width": 6,
        "height": "3",
        "className": "",
        "interpolation": "linear",
        "x": 880,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "3758cdea9d5d1d01",
        "type": "mqtt in",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "",
        "topic": "IPAdressUser",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 120,
        "y": 880,
        "wires": [
            [
                "728339c56b6087ec"
            ]
        ]
    },
    {
        "id": "61806882e2c16761",
        "type": "mqtt out",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "",
        "topic": "PersoonThuis",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "0839f7b4c0cbb0a8",
        "x": 780,
        "y": 840,
        "wires": []
    },
    {
        "id": "728339c56b6087ec",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "pingcount",
        "func": "msg.payload = 4;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 270,
        "y": 880,
        "wires": [
            [
                "ebd1eb7739312b3d"
            ]
        ]
    },
    {
        "id": "9efaa0c2fd872693",
        "type": "exec",
        "z": "eb60a9ea21d42f29",
        "g": "d344da1eff713941",
        "command": "sudo shutdown -h now",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "Execute shutdown",
        "x": 550,
        "y": 1360,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "6d496dbb394b2888",
        "type": "exec",
        "z": "eb60a9ea21d42f29",
        "g": "d344da1eff713941",
        "command": "sudo reboot -f",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "Execute restart",
        "x": 540,
        "y": 1480,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "f1ad8f74c46f6314",
        "type": "ui-button",
        "z": "eb60a9ea21d42f29",
        "g": "d344da1eff713941",
        "group": "b71c0e77d9debcfd",
        "name": "Shutdown computer",
        "label": "Shutdown",
        "order": 10,
        "width": "2",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "PowerButton",
        "icon": "",
        "iconPosition": "left",
        "payload": "Shutdown...",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 160,
        "y": 1360,
        "wires": [
            [
                "9efaa0c2fd872693",
                "7ea37518e7e677d7"
            ]
        ]
    },
    {
        "id": "c8412ad60f0dd6e1",
        "type": "ui-button",
        "z": "eb60a9ea21d42f29",
        "g": "d344da1eff713941",
        "group": "b71c0e77d9debcfd",
        "name": "Restart computer",
        "label": "Restart",
        "order": 11,
        "width": "2",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "PowerButton",
        "icon": "",
        "iconPosition": "left",
        "payload": "Restarting...",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 150,
        "y": 1480,
        "wires": [
            [
                "6d496dbb394b2888",
                "7ea37518e7e677d7"
            ]
        ]
    },
    {
        "id": "ee5730149418dfeb",
        "type": "ui-template",
        "z": "eb60a9ea21d42f29",
        "g": "d344da1eff713941",
        "group": "",
        "page": "c5ea61b98d8ee55d",
        "ui": "",
        "name": "CSS button",
        "order": 1,
        "width": 0,
        "height": 0,
        "head": "",
        "format": ".PowerButton button {\n    font-size: 1.5em;\n}\n",
        "storeOutMessages": true,
        "passthru": true,
        "resendOnRefresh": true,
        "templateScope": "page:style",
        "className": "",
        "x": 130,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "7b981f6f76e5f9f4",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "Model",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": true,
        "font": "",
        "fontSize": "18",
        "color": "#ffffff",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 730,
        "y": 60,
        "wires": []
    },
    {
        "id": "86822077eb192361",
        "type": "inject",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "At Startup 1",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 60,
        "wires": [
            [
                "b214b552d64a9c10"
            ]
        ]
    },
    {
        "id": "b214b552d64a9c10",
        "type": "exec",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "command": "cat /proc/cpuinfo",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 360,
        "y": 60,
        "wires": [
            [
                "e21cc1583323afc0"
            ],
            [],
            []
        ]
    },
    {
        "id": "e21cc1583323afc0",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "Model?",
        "func": "msg.payload = parseCpuInfo(msg.payload);\nglobal.set(\"RaspberryPiModel\", msg.payload);\nnode.status({ text: msg.payload });\nreturn msg;\n\nfunction parseCpuInfo(cpuinfo) {\n    // Extract the revision line\n    const revisionMatch = cpuinfo.match(/Revision\\s*:\\s*([0-9a-fA-F]+)/);\n    if (!revisionMatch) {\n        return \"\";\n    }\n\n    const revision = revisionMatch[1].toLowerCase();\n\n    // Mapping van revision codes naar modellen\n    const revisionMap = {\n        // --- Raspberry Pi 2 ---\n        \"a01041\": \"Raspberry Pi 2 Model B - revisie 1.1\",\n        // --- Raspberry Pi 3 ---\n        \"a02082\": \"Raspberry Pi 3 Model B\",\n        \"a22082\": \"Raspberry Pi 3 Model B (Sony)\",\n        \"a020d3\": \"Raspberry Pi 3 Model B+\",\n        \"a020a0\": \"Raspberry Pi Compute Module 3\",\n        \"a02100\": \"Raspberry Pi Compute Module 3+\",\n\n        // --- Raspberry Pi 4 ---\n        \"a03111\": \"Raspberry Pi 4 Model B (1GB)\",\n        \"a03115\": \"Raspberry Pi 4 Model B+ (1GB) Rev 1.5\",\n        \"b03111\": \"Raspberry Pi 4 Model B (2GB)\",\n        \"b03115\": \"Raspberry Pi 4 Model B (2GB) Rev 1.5\",\n        \"c03111\": \"Raspberry Pi 4 Model B (4GB)\",\n        \"d03114\": \"Raspberry Pi 4 Model B (8GB)\",\n\n        // --- Raspberry Pi 400 ---\n        \"c03130\": \"Raspberry Pi 400\",\n\n        // --- Raspberry Pi Compute Module 4 ---\n        \"a03140\": \"Raspberry Pi Compute Module 4\",\n        \"b03140\": \"Raspberry Pi Compute Module 4 (WiFi)\",\n        \"c03140\": \"Raspberry Pi Compute Module 4 (Lite)\",\n        \"d03140\": \"Raspberry Pi Compute Module 4 (WiFi + Lite)\",\n\n        // --- Raspberry Pi 5 ---\n        \"9023c0\": \"Raspberry Pi 5 (4GB)\",\n        \"a023c0\": \"Raspberry Pi 5 (8GB)\",\n        \"b023c0\": \"Raspberry Pi 5 (16GB)\",\n\n        // --- Raspberry Pi 5 Compute Module ---\n        \"c023c0\": \"Raspberry Pi Compute Module 5\",\n        \"d023c0\": \"Raspberry Pi Compute Module 5 Lite\"\n    };\n\n    const model = revisionMap[revision] || \"Onbekende revision: \" + revision;\n\nreturn model;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 60,
        "wires": [
            [
                "7b981f6f76e5f9f4"
            ]
        ]
    },
    {
        "id": "d17ee11b0c0d7512",
        "type": "exec",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "command": "free",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 330,
        "y": 140,
        "wires": [
            [
                "68b99b881506f9ef"
            ],
            [],
            []
        ]
    },
    {
        "id": "68b99b881506f9ef",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "Free/swapped",
        "func": "var output = msg.payload.split(\"\\n\");\n\nvar words1 = output[1].split(/[ ]+/);\nvar free = (words1[3] / 1000); \nmsg.payload = free.toFixed(0)  + \" kb\"; \n\nvar words2 = output[2].split(/[ ]+/);\nvar swapped = (words2[2] / 1000); \n\nvar swap = { payload: swapped + \" kb\"};\n\nreturn [msg, swap];",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 140,
        "wires": [
            [
                "0267af7c7471c4a5"
            ],
            [
                "c60a13f83d3ae000"
            ]
        ]
    },
    {
        "id": "0d81cada11c97092",
        "type": "inject",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "name": "At Startup 2",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 140,
        "wires": [
            [
                "d17ee11b0c0d7512"
            ]
        ]
    },
    {
        "id": "0267af7c7471c4a5",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "order": 4,
        "width": "2",
        "height": "1",
        "name": "Free",
        "label": "Mem Free:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": true,
        "font": "",
        "fontSize": "18",
        "color": "#ffffff",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 730,
        "y": 120,
        "wires": []
    },
    {
        "id": "c60a13f83d3ae000",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "289d8e4b5f966496",
        "group": "b71c0e77d9debcfd",
        "order": 5,
        "width": "2",
        "height": "1",
        "name": "Swapped",
        "label": "Swapped:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": true,
        "font": "",
        "fontSize": "18",
        "color": "#ffffff",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 740,
        "y": 160,
        "wires": []
    },
    {
        "id": "d7d28ff8.f76ba",
        "type": "inject",
        "z": "eb60a9ea21d42f29",
        "g": "878de3ac45928077",
        "name": "Every minute",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 1200,
        "wires": [
            [
                "a37b37d1.aad508",
                "d4dee740ac379f10"
            ]
        ]
    },
    {
        "id": "a37b37d1.aad508",
        "type": "exec",
        "z": "eb60a9ea21d42f29",
        "g": "878de3ac45928077",
        "command": "vcgencmd measure_temp",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "measure CPU temperature",
        "x": 400,
        "y": 1200,
        "wires": [
            [
                "ecc06f5.bc3d39"
            ],
            [],
            []
        ]
    },
    {
        "id": "ecc06f5.bc3d39",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "878de3ac45928077",
        "name": "Get value",
        "func": "let str = msg.payload\n\nmsg.payload = parseInt(str.substring(5, 9), 10);\nmsg.topic = \"CPU Temp\";\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 1200,
        "wires": [
            [
                "b0067e5db1bb638b"
            ]
        ]
    },
    {
        "id": "ea735d0.bb55da",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "878de3ac45928077",
        "name": "Get value",
        "func": "msg.payload = parseFloat(msg.payload);\nmsg.topic = \"CPU load\";\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 1140,
        "wires": [
            [
                "b0067e5db1bb638b"
            ]
        ]
    },
    {
        "id": "7ea37518e7e677d7",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "g": "d344da1eff713941",
        "group": "b71c0e77d9debcfd",
        "order": 12,
        "width": 0,
        "height": 0,
        "name": "status",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 510,
        "y": 1420,
        "wires": []
    },
    {
        "id": "a8c74409d559174f",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "group": "b71c0e77d9debcfd",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 840,
        "y": 1280,
        "wires": []
    },
    {
        "id": "d725720309b60f1a",
        "type": "ui-text",
        "z": "eb60a9ea21d42f29",
        "group": "b71c0e77d9debcfd",
        "order": 6,
        "width": 0,
        "height": 0,
        "name": "lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 840,
        "y": 1340,
        "wires": []
    },
    {
        "id": "6ddc11d490af5fe8",
        "type": "function",
        "z": "eb60a9ea21d42f29",
        "g": "6bde74f61fffc171",
        "name": "1 --> 80",
        "func": "msg.topic = \"Gebruiker thuis\";\nif (msg.payload == 1) msg.payload = 80;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 960,
        "wires": [
            [
                "b0067e5db1bb638b"
            ]
        ]
    },
    {
        "id": "d4dee740ac379f10",
        "type": "cpu",
        "z": "eb60a9ea21d42f29",
        "g": "878de3ac45928077",
        "name": "",
        "msgCore": false,
        "msgOverall": true,
        "msgArray": false,
        "msgTemp": false,
        "x": 350,
        "y": 1140,
        "wires": [
            [
                "ea735d0.bb55da"
            ]
        ]
    },
    {
        "id": "0af8df52052ef366",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "get devices",
        "func": "msg.payload = 'echo -e \"devices\\nquit\" | bluetoothctl';\nmsg.payload = 'bluetoothctl devices';\nnode.status({ text: msg.payload });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 360,
        "wires": [
            [
                "a6248e8d64acb74f"
            ]
        ]
    },
    {
        "id": "a6248e8d64acb74f",
        "type": "exec",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "bluetoothctl",
        "x": 510,
        "y": 360,
        "wires": [
            [
                "43862d3b661a9960"
            ],
            [],
            []
        ]
    },
    {
        "id": "43862d3b661a9960",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "mac/name",
        "func": "let str = Buffer.from(msg.payload).toString(\"utf8\");\nlet clean = stripAnsi(str);\n\nlet results = [];\nconst regex = /Device\\s+([0-9A-F:]{17})\\s+(.+)/gi;\nlet matches = clean.matchAll(regex);\n\nfor (const m of matches) {\n    results.push({\n        mac: m[1],\n        name: m[2]\n    });\n}\nmsg.devices = results;\n\nreturn msg;\n\nfunction stripAnsi(str) {\n    return str.replace(/\\x1B\\[[0-9;]*[A-Za-z]/g, '');\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 360,
        "wires": [
            [
                "070ce4d9b1f1776d"
            ]
        ]
    },
    {
        "id": "070ce4d9b1f1776d",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "get status",
        "func": "let devices = msg.devices;\nif (Array.isArray(devices) && devices.length === 0) {\n    node.status({ text: \"geen devices gekoppeld\" });\n    msg.payload = \"bluetoothctl quit\";    \n    return msg;\n}\n\nlet cmd = \"\";\nfor (const device of devices) {\n    cmd += \"bluetoothctl info \" + device.mac + \";\";\n}\nmsg.payload = cmd;\nnode.status({ text: \"bluetoothctl info\"  });\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 440,
        "wires": [
            [
                "f5c783e435202cc2"
            ]
        ]
    },
    {
        "id": "f5c783e435202cc2",
        "type": "exec",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "bluetoothctl",
        "x": 510,
        "y": 440,
        "wires": [
            [
                "e110dd782e4ed389"
            ],
            [],
            []
        ]
    },
    {
        "id": "e110dd782e4ed389",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "Connected?",
        "func": "let devices = [];\n\nif (msg.payload == \"\") {\n    global.set(\"BluetoothConnected\", \"no\");\n    global.set(\"BluetoothPaired\", \"no\");\n    global.set(\"BluetoothConnectedName\", \"\");\n    node.status({ text: \"payload empty\" });\n    msg.payload = devices;\n    return msg;\n}\n\nconst text = msg.payload;\nnode.status({ text: text });\nconst blocks = text.split(/(?=Device\\s+[0-9A-F:]{17})/gi);\n\nfor (const block of blocks) {\n    // MAC-adres\n    const macMatch = block.match(/Device\\s+([0-9A-F:]{17})/i);\n    if (!macMatch) continue;\n\n    // Naam\n    const nameMatch = block.match(/Name:\\s*(.+)/i);\n    const name = nameMatch ? nameMatch[1].trim() : null;\n\n    // Paired-status\n    const pairedMatch = block.match(/Paired:\\s*(yes|no)/i);\n    const paired = pairedMatch ? pairedMatch[1].toLowerCase() : null;\n\n    // Connected-status\n    const connMatch = block.match(/Connected:\\s*(yes|no)/i);\n    const connected = connMatch ? connMatch[1].toLowerCase() : null;\n\n    if (paired == \"yes\") {\n        devices.push({\n            mac: macMatch[1],\n            name,\n            paired,\n            connected\n        });\n    }\n\n    if (connected == \"yes\") {\n        node.status({ text: \"Connected: \" + name });\n        global.set(\"BluetoothMac\", macMatch[1]);\n        global.set(\"BluetoothConnectedName\", name);\n        global.set(\"BluetoothPaired\", paired);\n        global.set(\"BluetoothConnected\", connected);\n    }\n    else {\n        if (name == global.get(\"BluetoothConnectedName\")) {\n            global.set(\"BluetoothPaired\", paired);\n            global.set(\"BluetoothConnected\", connected);\n        }\n    }\n}\n\nmsg.payload = devices;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 440,
        "wires": [
            [
                "2d29289272c0345f"
            ]
        ]
    },
    {
        "id": "d3ac11cb5dc0efbc",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "kill",
        "func": "msg.kill = \"SIGTERM\";   // of \"SIGKILL\", \"SIGINT\", etc.\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 270,
        "y": 1320,
        "wires": [
            [
                "d611838783d29255",
                "c4556470956a2dd7"
            ]
        ]
    },
    {
        "id": "c4bdb95a0f7c3226",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "start",
        "func": "if (msg.topic == \"$pageview\" && \n    msg.payload.page.name == \"Bluetooth\") {\n\n    var tijd_nu = global.get(\"getTime\")();\n    node.status({ text: tijd_nu });\n    return msg;\n}\nelse return null;\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 250,
        "y": 160,
        "wires": [
            [
                "04ad4a712d3067e5"
            ]
        ]
    },
    {
        "id": "36e8febe859fd540",
        "type": "ui-event",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "ui": "6c1d30b5f16932dd",
        "name": "",
        "x": 90,
        "y": 200,
        "wires": [
            [
                "c4bdb95a0f7c3226",
                "480d9f15b0563c9c"
            ]
        ]
    },
    {
        "id": "2d29289272c0345f",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "Toon Naam en Verbonden",
        "func": "// Vertaal velden + voeg actie-knop toe\nmsg.payload = msg.payload.map(d => ({\n    mac: d.mac,\n    naam: d.name,\n    verbonden: d.connected === \"yes\" ? \"ja\" : \"nee\",\n    actie: \"\"\n}));\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 540,
        "wires": [
            [
                "t1"
            ]
        ]
    },
    {
        "id": "04ad4a712d3067e5",
        "type": "trigger",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "Repeat 10s",
        "op1": "Status Bluetooth devices",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "5",
        "extend": false,
        "overrideDelay": true,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 410,
        "y": 220,
        "wires": [
            [
                "0af8df52052ef366"
            ],
            [
                "7463d453bcf5cff1"
            ]
        ]
    },
    {
        "id": "480d9f15b0563c9c",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "reset",
        "func": "if (msg.topic == \"$pageleave\" && \n    msg.payload.page.name == \"Bluetooth\") {\n        msg.reset = true;\n        return msg;\n    }\nelse \n    return null;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 250,
        "y": 220,
        "wires": [
            [
                "04ad4a712d3067e5"
            ]
        ]
    },
    {
        "id": "7463d453bcf5cff1",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "loop back",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 140,
        "wires": [
            [
                "04ad4a712d3067e5"
            ]
        ]
    },
    {
        "id": "df6e998b6d564fcf",
        "type": "inject",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "Startup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 360,
        "wires": [
            [
                "0af8df52052ef366"
            ]
        ]
    },
    {
        "id": "t1",
        "type": "ui-table",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "group": "549f1fa0e59e6a04",
        "name": "Device Table",
        "label": "",
        "order": 2,
        "width": "0",
        "height": "0",
        "maxrows": "",
        "autocols": false,
        "showSearch": false,
        "deselect": true,
        "selectionType": "none",
        "columns": [
            {
                "title": "Naam:",
                "key": "naam",
                "keyType": "key",
                "type": "text",
                "width": ""
            },
            {
                "title": "Verbonden:",
                "key": "verbonden",
                "keyType": "key",
                "type": "text",
                "width": ""
            },
            {
                "title": "Verwijder:",
                "key": "actie",
                "keyType": "key",
                "type": "button",
                "width": "",
                "align": "start"
            }
        ],
        "mobileBreakpoint": "sm",
        "mobileBreakpointType": "defaults",
        "action": "replace",
        "x": 690,
        "y": 540,
        "wires": [
            [
                "67633cd44823bbd2"
            ]
        ]
    },
    {
        "id": "67633cd44823bbd2",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "remove device",
        "func": "global.set(\"BluetoothConnectedName\", \"\");\nglobal.set(\"BluetoothPaired\", \"no\");\nglobal.set(\"BluetoothConnected\", \"no\");\n\nnode.status({ text: \"remove \" + msg.payload.mac });\nmsg.payload = \"bluetoothctl remove \" + msg.payload.mac;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 600,
        "wires": [
            [
                "f1378f5cb764a371"
            ]
        ]
    },
    {
        "id": "f1378f5cb764a371",
        "type": "exec",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "bluetoothctl",
        "x": 510,
        "y": 600,
        "wires": [
            [
                "0af8df52052ef366"
            ],
            [],
            []
        ]
    },
    {
        "id": "d611838783d29255",
        "type": "exec",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "command": ".node-red/projects/MiniSAHA/bluetooth.py",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "Pair & Connect",
        "x": 720,
        "y": 1100,
        "wires": [
            [
                "6054eae0fe0bbb10",
                "84fda3c5a41e4165"
            ],
            [],
            []
        ]
    },
    {
        "id": "4d4f78505bcbf29e",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "msg",
        "func": "msg.payload = global.get(\"BluetoothName\");\nif (msg.payload === undefined) { msg.payload = \"\"; }\nmsg.payload = '\"' + msg.payload + '\"';\n\nlet bluetoothConnectedName = global.get(\"BluetoothConnectedName\");\nif (bluetoothConnectedName === undefined) { bluetoothConnectedName = \"\"; }\n\n\nlet paired = global.get(\"BluetoothPaired\");\nif (paired === undefined) { paired = \"no\"; }\n\nlet connected = global.get(\"BluetoothConnected\");\nif (connected === undefined) { connected = \"no\"; }\n\nif (bluetoothConnectedName.toLowerCase().includes(msg.payload.toLowerCase())) { \n    if (connected == \"no\" && paired == \"yes\") {\n        msg.payload = \"Zet \" + bluetoothConnectedName + \n        \" aan en wacht 1 minuut.\"\n        node.status({ text: msg.payload });\n        return [null, msg];\n    }\n    else {\n        msg.payload = bluetoothConnectedName + \" is al verbonden.\"\n        node.status({ text: msg.payload });\n        return [null, msg];\n    }\n}\nelse { // nieuwe naam\n    if (global.get(\"BluetoothPaired\") == \"yes\") { \n        msg.payload = \"Verwijder eerst \" + bluetoothConnectedName;\n        node.status({ text: msg.payload });\n        return [null, msg];\n    }\n    node.status({ text: \"Connect \" + msg.payload });\n}\nnode.status({ text: \"Connect \" + msg.payload });\nreturn [msg, null];",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 1200,
        "wires": [
            [
                "ad04926aacf33a5d",
                "d611838783d29255"
            ],
            [
                "988de3a578461499"
            ]
        ]
    },
    {
        "id": "6c320f8b9fa94d70",
        "type": "ui-button",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "group": "549f1fa0e59e6a04",
        "name": "",
        "label": "Voeg apparaat toe",
        "order": 7,
        "width": "2",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 130,
        "y": 1220,
        "wires": [
            [
                "4d4f78505bcbf29e"
            ]
        ]
    },
    {
        "id": "f5960bb1164b1dbb",
        "type": "ui-text-input",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "group": "549f1fa0e59e6a04",
        "name": "Zoek op naam",
        "label": "Zoek op (gedeelte van) naam",
        "order": 5,
        "width": "3",
        "height": "1",
        "topic": "topic",
        "topicType": "msg",
        "mode": "text",
        "tooltip": "",
        "delay": 300,
        "passthru": true,
        "sendOnDelay": false,
        "sendOnBlur": true,
        "sendOnEnter": true,
        "className": "",
        "clearable": false,
        "sendOnClear": false,
        "icon": "",
        "iconPosition": "left",
        "iconInnerPosition": "inside",
        "x": 680,
        "y": 1020,
        "wires": [
            [
                "e265ce7aeafc81cf"
            ]
        ]
    },
    {
        "id": "e265ce7aeafc81cf",
        "type": "change",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "BluetoothName",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "a382f332dd3ab477",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "set BluetoothName",
        "func": "if (msg.payload == null) msg.payload = \"Speaker\";\nglobal.set(\"BluetoothName\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 1020,
        "wires": [
            [
                "f5960bb1164b1dbb"
            ]
        ]
    },
    {
        "id": "20aee768ba9e2512",
        "type": "change",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "BluetoothName",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "BluetoothName",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 1020,
        "wires": [
            [
                "a382f332dd3ab477"
            ]
        ]
    },
    {
        "id": "17b078a9c4215d63",
        "type": "inject",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "At Startup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 1020,
        "wires": [
            [
                "20aee768ba9e2512"
            ]
        ]
    },
    {
        "id": "c8459650666a969b",
        "type": "ui-text",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "group": "549f1fa0e59e6a04",
        "order": 9,
        "width": "0",
        "height": "0",
        "name": "progress",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 980,
        "y": 1240,
        "wires": []
    },
    {
        "id": "b6db4fba6aab59b3",
        "type": "ui-button",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "group": "549f1fa0e59e6a04",
        "name": "",
        "label": "Annuleer",
        "order": 8,
        "width": "2",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 100,
        "y": 1320,
        "wires": [
            [
                "d3ac11cb5dc0efbc"
            ]
        ]
    },
    {
        "id": "ad04926aacf33a5d",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "Scanning...",
        "func": "msg.payload = \"Zoeken naar \" + global.get(\"BluetoothName\") + \"... (staat apparaat aan?)\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1240,
        "wires": [
            [
                "c8459650666a969b"
            ]
        ]
    },
    {
        "id": "25b2f4f138e92a11",
        "type": "delay",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 820,
        "y": 1320,
        "wires": [
            [
                "6ab57893a1727021"
            ]
        ]
    },
    {
        "id": "6ab57893a1727021",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "clear",
        "func": "msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 970,
        "y": 1320,
        "wires": [
            [
                "c8459650666a969b"
            ]
        ]
    },
    {
        "id": "7d5983d557669a6c",
        "type": "ui-template",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "group": "",
        "page": "",
        "ui": "6c1d30b5f16932dd",
        "name": "",
        "order": 1,
        "width": 0,
        "height": 0,
        "head": "",
        "format": "<script>\n(function(scope) {\n\n    // Verstuur event wanneer de pagina geladen is\n    scope.$socket.emit(\"page_loaded\", {\n        page: \"Bluetooth\"\n    });\n\n    // Verstuur event bij elke klik op de pagina\n    document.addEventListener(\"click\", function(e) {\n        scope.$socket.emit(\"page_click\", {\n            tag: e.target.tagName,\n            class: e.target.className,\n            text: e.target.innerText\n        });\n    });\n\n})(scope);\n</script>\n",
        "storeOutMessages": true,
        "passthru": true,
        "resendOnRefresh": true,
        "templateScope": "widget:ui",
        "className": "",
        "x": 640,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "16c0807580a7c2a0",
        "type": "ui-control",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "",
        "ui": "6c1d30b5f16932dd",
        "events": "change",
        "x": 800,
        "y": 180,
        "wires": [
            [
                "2e189f3ce88031b6"
            ]
        ]
    },
    {
        "id": "2e189f3ce88031b6",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "page clicked",
        "func": "if (msg.socketid && msg.payload) {\n\n    if (msg.payload.event === \"page_loaded\") {\n        msg.topic = \"page_loaded\";\n        msg.page = msg.payload.data.page;\n        return msg;\n    }\n\n    if (msg.payload.event === \"page_click\") {\n        msg.topic = \"page_click\";\n        msg.click = msg.payload.data;\n        return msg;\n    }\n}\n\nreturn null;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 950,
        "y": 180,
        "wires": [
            [
                "abfdc701c0c076ca"
            ]
        ]
    },
    {
        "id": "abfdc701c0c076ca",
        "type": "debug",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "debug 6",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1100,
        "y": 180,
        "wires": []
    },
    {
        "id": "6e70d09531a84ce8",
        "type": "comment",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "Workaround bug (maar werkt niet?)",
        "info": "",
        "x": 720,
        "y": 140,
        "wires": []
    },
    {
        "id": "9a9cc08da2b8ef61",
        "type": "ui-text",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "group": "549f1fa0e59e6a04",
        "order": 3,
        "width": "5",
        "height": "1",
        "name": "Lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 110,
        "y": 1400,
        "wires": []
    },
    {
        "id": "d1c5073f0e9b7976",
        "type": "inject",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "At Startup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 810,
        "y": 1380,
        "wires": [
            [
                "6ab57893a1727021"
            ]
        ]
    },
    {
        "id": "b699f11b580a05af",
        "type": "ui-text",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "group": "549f1fa0e59e6a04",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Een nieuw apparaat koppelen:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 170,
        "y": 960,
        "wires": []
    },
    {
        "id": "6054eae0fe0bbb10",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "Verbonden",
        "func": "msg.payload = \"Verbonden\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1200,
        "wires": [
            [
                "c9aa4babb452e660",
                "70b734ee6121d475"
            ]
        ]
    },
    {
        "id": "f1aeced22e9fa07f",
        "type": "link in",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "connected",
        "links": [
            "c9aa4babb452e660",
            "c307ebad62357506"
        ],
        "x": 165,
        "y": 400,
        "wires": [
            [
                "0af8df52052ef366"
            ]
        ]
    },
    {
        "id": "c9aa4babb452e660",
        "type": "link out",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "connected",
        "mode": "link",
        "links": [
            "f1aeced22e9fa07f"
        ],
        "x": 785,
        "y": 1200,
        "wires": []
    },
    {
        "id": "c86740ad60f14028",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "geannuleerd",
        "func": "msg.payload = \"Scanning geannuleerd.\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1320,
        "wires": [
            [
                "70b734ee6121d475"
            ]
        ]
    },
    {
        "id": "c4556470956a2dd7",
        "type": "delay",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "delay 0.1",
        "pauseType": "delay",
        "timeout": "100",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 440,
        "y": 1320,
        "wires": [
            [
                "c86740ad60f14028"
            ]
        ]
    },
    {
        "id": "988de3a578461499",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "fout bericht",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1280,
        "wires": [
            [
                "70b734ee6121d475"
            ]
        ]
    },
    {
        "id": "84fda3c5a41e4165",
        "type": "debug",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "debug 2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 920,
        "y": 1100,
        "wires": []
    },
    {
        "id": "27eb7a75f026cd43",
        "type": "inject",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 1180,
        "wires": [
            [
                "4d4f78505bcbf29e"
            ]
        ]
    },
    {
        "id": "70b734ee6121d475",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "join",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 1260,
        "wires": [
            [
                "c8459650666a969b",
                "25b2f4f138e92a11"
            ]
        ]
    },
    {
        "id": "dc7a07b385d309ec",
        "type": "ui-text",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "group": "549f1fa0e59e6a04",
        "order": 10,
        "width": "5",
        "height": "1",
        "name": "Lege regel",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 290,
        "y": 1400,
        "wires": []
    },
    {
        "id": "620e6a6d64aff30d",
        "type": "ui-button",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "group": "549f1fa0e59e6a04",
        "name": "Help naam",
        "label": "?",
        "order": 6,
        "width": "1",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 670,
        "y": 960,
        "wires": [
            [
                "3edb32cf296b125f",
                "c307ebad62357506"
            ]
        ]
    },
    {
        "id": "3edb32cf296b125f",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "help tekst",
        "func": "msg.payload = \n\"<b>De Bluetooth speaker moet in de buurt van het meegeleverde computertje staan. \" + \n\"Bluetooth heeft een bereik van ongeveer 10 m.</b><br>\" +\n\"<br></b><br>\" +\n\"<b>De naam van de Bluetooth speaker vind je in de handleiding. Bijvoorbeeld: HEMA BT Speaker.</b><br>\" +\n\"<br></b><br>\" +\n\"<b>Je hoeft maar een gedeelte van de naam op te geven. Bijvoorbeeld: speaker.</b><br>\" +\n\"<br></b><br>\" +\n\"<b>Als je geen handleiding meer hebt, kan je op je mobiel kijken \" +\n\"welke naam te voorschijn komt (maar niet koppelen, hoor!).</b><br>\" +\n\"<br></b><br>\" +\n\"<b>Je kan maar 1 apparaat tegelijk koppelen. Dus als je een nieuw apparaat wil koppelen, moet je eerst de oude verwijderen.</b><br>\";;\n\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 960,
        "wires": [
            [
                "1314c5376597aa78"
            ]
        ]
    },
    {
        "id": "1314c5376597aa78",
        "type": "ui-notification",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": true,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Close",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 990,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "a1e2f6d090e5529d",
        "type": "comment",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "Toon automatisch (wanneer de pagina getoond wordt) of via een button wat de status is",
        "info": "",
        "x": 340,
        "y": 60,
        "wires": []
    },
    {
        "id": "a9b3d569ef1ff64c",
        "type": "comment",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "Verbinden met een nieuw apparaat",
        "info": "",
        "x": 180,
        "y": 900,
        "wires": []
    },
    {
        "id": "574eb541beac3d21",
        "type": "ui-button",
        "z": "ce724907bfebf75c",
        "d": true,
        "g": "b653e740e9531504",
        "group": "549f1fa0e59e6a04",
        "name": "Help Toon...",
        "label": "?",
        "order": 1,
        "width": "1",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 490,
        "y": 300,
        "wires": [
            [
                "e1ee20adb971c3d5",
                "0af8df52052ef366"
            ]
        ]
    },
    {
        "id": "e1ee20adb971c3d5",
        "type": "function",
        "z": "ce724907bfebf75c",
        "d": true,
        "g": "b653e740e9531504",
        "name": "help tekst",
        "func": "msg.payload = \n\"<b>Als de lijst leeg is, moet je eeerst een Bluetooth speaker koppelen.</b><br>\" +\n\"<b></b><br>\" +\n\"<b>Als een speaker niet verbonden is, dan staat hij niet aan of is niet in het bereik van het computertje bij de router.</b><br>\" +\n\"<b></b><br>\" +\n\"<b>Als hij verbonden is, zou je met een geluid moeten kunnen testen.</b><br>\" +\n\"<b></b><br>\" +\n\"<b>Je kan instellen dat er steeds een random geluid gekozen wordt voor een melding.</b><br>\" +\n\"<b></b><br>\" +\n\"<b>Je kan maar 1 apparaat tegelijk koppelen. Dus als je een nieuw apparaat wil koppelen, moet je eerst de oude verwijderen.</b><br>\";\n\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 300,
        "wires": [
            [
                "77f6b3f3956f0d15"
            ]
        ]
    },
    {
        "id": "77f6b3f3956f0d15",
        "type": "ui-notification",
        "z": "ce724907bfebf75c",
        "d": true,
        "g": "b653e740e9531504",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": true,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Close",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 830,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "fd7a048b60fd40cc",
        "type": "comment",
        "z": "ce724907bfebf75c",
        "g": "b653e740e9531504",
        "name": "Bij een Deploy van de code werkt ui-event niet meer (bug)",
        "info": "",
        "x": 250,
        "y": 100,
        "wires": []
    },
    {
        "id": "861d995a8063ca2d",
        "type": "comment",
        "z": "ce724907bfebf75c",
        "g": "e2e84e52f82b08ea",
        "name": "https://pixabay.com/nl/music/search/ringtones/",
        "info": "",
        "x": 350,
        "y": 780,
        "wires": []
    },
    {
        "id": "43f0b3674c4fcca2",
        "type": "ui-button",
        "z": "ce724907bfebf75c",
        "g": "e2e84e52f82b08ea",
        "group": "549f1fa0e59e6a04",
        "name": "",
        "label": "Beheer meldingsgeluiden",
        "order": 11,
        "width": "0",
        "height": "0",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 150,
        "y": 740,
        "wires": [
            [
                "a3da71f32673dfd7"
            ]
        ]
    },
    {
        "id": "a3da71f32673dfd7",
        "type": "function",
        "z": "ce724907bfebf75c",
        "g": "e2e84e52f82b08ea",
        "name": "set page Beheer",
        "func": "msg.payload = \"Meldingsgeluiden\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 740,
        "wires": [
            [
                "e68d3d081a706fa9"
            ]
        ]
    },
    {
        "id": "e68d3d081a706fa9",
        "type": "ui-control",
        "z": "ce724907bfebf75c",
        "g": "e2e84e52f82b08ea",
        "name": "",
        "ui": "6c1d30b5f16932dd",
        "events": "all",
        "x": 580,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "a312655bf01fb8e3",
        "type": "inject",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 1280,
        "wires": [
            [
                "d3ac11cb5dc0efbc"
            ]
        ]
    },
    {
        "id": "c307ebad62357506",
        "type": "link out",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "connected",
        "mode": "link",
        "links": [
            "f1aeced22e9fa07f"
        ],
        "x": 775,
        "y": 900,
        "wires": []
    },
    {
        "id": "d3191e422f60972d",
        "type": "exec",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "command": "/bin/bash",
        "addpay": "",
        "append": "-c \"sudo bash -c 'systemctl stop bluetooth; rm -rf /var/lib/bluetooth/*; systemctl start bluetooth'\"",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "Clear cache",
        "x": 290,
        "y": 1100,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "506b78c0fe165e00",
        "type": "inject",
        "z": "ce724907bfebf75c",
        "g": "04fd012f1107245e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 1080,
        "wires": [
            [
                "d3191e422f60972d"
            ]
        ]
    },
    {
        "id": "de3f35eb8cc6cc74",
        "type": "ui-button",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "group": "aae22fe947be766e",
        "name": "",
        "label": "Test geluid",
        "order": 2,
        "width": "2",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 150,
        "y": 220,
        "wires": [
            [
                "7cb194b63eb56afd"
            ]
        ]
    },
    {
        "id": "50dd2fd4a701d53d",
        "type": "ui-dropdown",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "group": "aae22fe947be766e",
        "name": "",
        "label": "Kies meldingsgeluid:",
        "tooltip": "",
        "order": 1,
        "width": "0",
        "height": "0",
        "passthru": false,
        "multiple": false,
        "chips": false,
        "clearable": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "typeIsComboBox": false,
        "msgTrigger": "onChange",
        "x": 700,
        "y": 280,
        "wires": [
            [
                "098f8c595d14aaa5"
            ]
        ]
    },
    {
        "id": "fb00403833140d8b",
        "type": "exec",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "command": "ls .node-red/projects/MiniSAHA/sounds",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "ls sounds",
        "x": 320,
        "y": 280,
        "wires": [
            [
                "7d08a46ad06a9fe9"
            ],
            [],
            []
        ]
    },
    {
        "id": "7d08a46ad06a9fe9",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "split",
        "func": "var tijd_nu = global.get(\"getTime\")();\n\nmsg.options = msg.payload.split(/\\n/);\nif (msg.options.length > 1) {\n   msg.options.pop();\n}\n\nlet selected = global.get(\"BluetoothSound\"); \n\nif (msg.options.includes(selected)) {\n    node.status({ text: tijd_nu + \", default: \" + msg.options });\n    msg.payload = global.get(\"BluetoothSound\");\n}\nelse {\n    if (msg.options.length > 0) {\n        node.status({ text: tijd_nu + \", first: \" + msg.payload });\n        msg.payload = msg.options[0];\n        global.set(\"BluetoothSound\", msg.payload);\n    }\n    else {\n        node.status({ text: tijd_nu + \", empty\" });\n        msg.payload = \"\";\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 280,
        "wires": [
            [
                "50dd2fd4a701d53d"
            ]
        ]
    },
    {
        "id": "0d7df80c86a6453d",
        "type": "exec",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "play sound",
        "x": 730,
        "y": 160,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "098f8c595d14aaa5",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "set BluetoothSound",
        "func": "global.set(\"BluetoothSound\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 910,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "121eeb47240d2a87",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "mpg123 sound",
        "func": "msg.payload = \"mpg123 -q '.node-red/projects/MiniSAHA/sounds/\" +\n  msg.payload + \"'\";\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({ text: tijd_nu + \", \" + msg.payload });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 180,
        "wires": [
            [
                "0d7df80c86a6453d"
            ]
        ]
    },
    {
        "id": "3410874898204686",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "kill",
        "func": "var tijd_nu = global.get(\"getTime\")();\nnode.status({text: tijd_nu + \" kill sound\"});\nmsg.kill = \"SIGTERM\";   // of \"SIGKILL\", \"SIGINT\", etc.\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 120,
        "wires": [
            [
                "0d7df80c86a6453d"
            ]
        ]
    },
    {
        "id": "48db1c2e18f88696",
        "type": "ui-button",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "group": "aae22fe947be766e",
        "name": "",
        "label": "Stop",
        "order": 3,
        "width": "2",
        "height": "1",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 130,
        "y": 120,
        "wires": [
            [
                "3410874898204686"
            ]
        ]
    },
    {
        "id": "034d3d2d8b8a62ca",
        "type": "ui-switch",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "",
        "label": "Random geluid",
        "group": "aae22fe947be766e",
        "order": 4,
        "width": "2",
        "height": "1",
        "passthru": false,
        "decouple": false,
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "className": "",
        "layout": "row-left",
        "clickableArea": "switch",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 680,
        "y": 340,
        "wires": [
            [
                "e438e1a719031b77"
            ]
        ]
    },
    {
        "id": "e438e1a719031b77",
        "type": "change",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "BluetoothRandomSound",
        "rules": [
            {
                "t": "set",
                "p": "BluetoothRandomSound",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "2b8910900d4bbdc5",
        "type": "change",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "BluetoothRandomSound",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "BluetoothRandomSound",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 340,
        "wires": [
            [
                "8c04f7e36a9c4acb"
            ]
        ]
    },
    {
        "id": "8c04f7e36a9c4acb",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "false",
        "func": "if (msg.payload == null) {\n    msg.payload = false;\n    global.set(\"BluetoothRandomSound\", msg.payload);\n    node.status({ text: msg.payload });\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 340,
        "wires": [
            [
                "034d3d2d8b8a62ca"
            ]
        ]
    },
    {
        "id": "292f906d0611558c",
        "type": "comment",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "https://pixabay.com/nl/music/search/ringtones/",
        "info": "",
        "x": 810,
        "y": 80,
        "wires": []
    },
    {
        "id": "2e14724e3c3ae983",
        "type": "mqtt in",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "",
        "topic": "PlaySound",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 140,
        "y": 160,
        "wires": [
            [
                "121eeb47240d2a87"
            ]
        ]
    },
    {
        "id": "ac3df9612f272925",
        "type": "exec",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "command": "ls .node-red/projects/MiniSAHA/sounds/*.mp3",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "ls sounds",
        "x": 200,
        "y": 980,
        "wires": [
            [
                "411d40273f5f425f"
            ],
            [],
            []
        ]
    },
    {
        "id": "d886cc1affb2bca7",
        "type": "ui-table",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "group": "aae22fe947be766e",
        "name": "Device Table",
        "label": "",
        "order": 10,
        "width": "0",
        "height": "0",
        "maxrows": "",
        "autocols": false,
        "showSearch": false,
        "deselect": true,
        "selectionType": "none",
        "columns": [
            {
                "title": "Naam:",
                "key": "shortName",
                "keyType": "key",
                "type": "text",
                "width": ""
            },
            {
                "title": "Verwijder:",
                "key": "actie",
                "keyType": "key",
                "type": "button",
                "width": "",
                "align": "start"
            }
        ],
        "mobileBreakpoint": "sm",
        "mobileBreakpointType": "defaults",
        "action": "replace",
        "x": 730,
        "y": 980,
        "wires": [
            [
                "4991f7f568969713"
            ]
        ]
    },
    {
        "id": "411d40273f5f425f",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "name": "Array: filename, shortname, delete",
        "func": "let filenames = msg.payload.split(/\\r?\\n/);\nif (filenames.length > 1) {\n    filenames = filenames.slice(0, -1);\n}\nnode.status({ text: filenames.length });\n\nlet data = [];\nfilenames.forEach(function(filename) {\n    let short = filename.split('/').pop();\n    short = short.split('.').slice(0, -1).join('.')\n    data.push({\n        filename: filename,\n        shortName: short,\n        actie: \"\"\n    });\n}\n);\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 980,
        "wires": [
            [
                "d886cc1affb2bca7"
            ]
        ]
    },
    {
        "id": "4a80936a1117d160",
        "type": "ui-text",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "group": "aae22fe947be766e",
        "order": 9,
        "width": 0,
        "height": 0,
        "name": "Voortgang",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 790,
        "y": 500,
        "wires": []
    },
    {
        "id": "a6ad4310a571b04f",
        "type": "ui-button",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "group": "aae22fe947be766e",
        "name": "",
        "label": "Kopieer alle MP3 bestanden van USB stick",
        "order": 7,
        "width": "0",
        "height": "0",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 230,
        "y": 680,
        "wires": [
            [
                "ec36fc960434517b"
            ]
        ]
    },
    {
        "id": "4991f7f568969713",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "name": "remove sound",
        "func": "msg.payload = 'rm \"' + msg.payload.filename + '\"';\nnode.status({ text: msg.payload });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 1060,
        "wires": [
            [
                "776ed147123b92b8"
            ]
        ]
    },
    {
        "id": "776ed147123b92b8",
        "type": "exec",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "exec",
        "x": 690,
        "y": 1060,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "ff4b91c6f803a3cb",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "USB disk",
        "func": "let usb = msg.payload.slice(0, -1);\nusb = usb.replace(/ /, \"\\\\ \");\n\nnode.status({ text: usb });\nmsg.payload = 'cp -r /media/pi/' + usb +\n    '/*.mp3 /home/pi/.node-red/projects/MiniSAHA/sounds/'\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 740,
        "wires": [
            [
                "2f60b40d268db108"
            ]
        ]
    },
    {
        "id": "2f60b40d268db108",
        "type": "exec",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "exec",
        "x": 690,
        "y": 740,
        "wires": [
            [
                "19674a84640dbeb7"
            ],
            [],
            []
        ]
    },
    {
        "id": "ec36fc960434517b",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "Find USB",
        "func": "msg.payload = \"ls /media/pi\"\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 680,
        "wires": [
            [
                "7b381f39c3109c7b"
            ]
        ]
    },
    {
        "id": "7b381f39c3109c7b",
        "type": "exec",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "command": "",
        "addpay": "payload",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "exec",
        "x": 690,
        "y": 680,
        "wires": [
            [
                "ff4b91c6f803a3cb"
            ],
            [],
            []
        ]
    },
    {
        "id": "c2ddecb04917163d",
        "type": "watch-directory",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "folder": ".node-red/projects/MiniSAHA/sounds",
        "recursive": 0,
        "typeEvent": "create",
        "ignoreInitial": false,
        "ignoredFiles": "",
        "ignoredFilesType": "re",
        "name": "",
        "x": 200,
        "y": 1120,
        "wires": [
            [
                "a0f17d909e19d179"
            ]
        ]
    },
    {
        "id": "6d21e3f54526cbb1",
        "type": "watch-directory",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "folder": ".node-red/projects/MiniSAHA/sounds",
        "recursive": 0,
        "typeEvent": "delete",
        "ignoreInitial": false,
        "ignoredFiles": "",
        "ignoredFilesType": "re",
        "name": "",
        "x": 200,
        "y": 1200,
        "wires": [
            [
                "a0f17d909e19d179"
            ]
        ]
    },
    {
        "id": "a0f17d909e19d179",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "name": "join",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 1180,
        "wires": [
            [
                "2912eea2927befa7"
            ]
        ]
    },
    {
        "id": "2912eea2927befa7",
        "type": "link out",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "name": "Changed",
        "mode": "link",
        "links": [
            "1ee1bd387c952be2",
            "0a60a836b38547df",
            "4ce40f669f564d3c"
        ],
        "x": 565,
        "y": 1180,
        "wires": []
    },
    {
        "id": "1ee1bd387c952be2",
        "type": "link in",
        "z": "bf57a768b975c2e6",
        "g": "e9121fbc4482804f",
        "name": "link in 1",
        "links": [
            "2912eea2927befa7"
        ],
        "x": 95,
        "y": 980,
        "wires": [
            [
                "ac3df9612f272925"
            ]
        ]
    },
    {
        "id": "0a60a836b38547df",
        "type": "link in",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "link in 2",
        "links": [
            "2912eea2927befa7"
        ],
        "x": 155,
        "y": 280,
        "wires": [
            [
                "fb00403833140d8b"
            ]
        ]
    },
    {
        "id": "f071260bdcdcd056",
        "type": "inject",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "Startup",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 380,
        "wires": [
            [
                "2b8910900d4bbdc5",
                "4653356d90a8a897"
            ]
        ]
    },
    {
        "id": "4ce40f669f564d3c",
        "type": "link in",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "link in 3",
        "links": [
            "2912eea2927befa7"
        ],
        "x": 105,
        "y": 500,
        "wires": [
            [
                "e8dcf9dab51432cf"
            ]
        ]
    },
    {
        "id": "e8dcf9dab51432cf",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "klaar",
        "func": "msg.payload = \"klaar\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 500,
        "wires": [
            [
                "9f7d3fb78648fc41"
            ]
        ]
    },
    {
        "id": "19674a84640dbeb7",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "bezig",
        "func": "msg.payload = \"bezig...\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 540,
        "wires": [
            [
                "9f7d3fb78648fc41"
            ]
        ]
    },
    {
        "id": "34a8c9383eec9020",
        "type": "delay",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 640,
        "y": 560,
        "wires": [
            [
                "c7a079d11845588a"
            ]
        ]
    },
    {
        "id": "c7a079d11845588a",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "clear",
        "func": "msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 560,
        "wires": [
            [
                "4a80936a1117d160"
            ]
        ]
    },
    {
        "id": "9f7d3fb78648fc41",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "join",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 500,
        "wires": [
            [
                "4a80936a1117d160",
                "34a8c9383eec9020"
            ]
        ]
    },
    {
        "id": "8fbf837b995b0dd9",
        "type": "ui-text",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "group": "aae22fe947be766e",
        "order": 6,
        "width": 0,
        "height": 0,
        "name": "leeg",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 110,
        "y": 860,
        "wires": []
    },
    {
        "id": "c0ef744af7819d7c",
        "type": "ui-button",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "group": "aae22fe947be766e",
        "name": "",
        "label": "Hoe kopieer ik MP3 bestanden vanaf mijn PC?",
        "order": 8,
        "width": "0",
        "height": "0",
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 240,
        "y": 800,
        "wires": [
            [
                "746b7471fda81cac"
            ]
        ]
    },
    {
        "id": "c0dfb882e72c4bd7",
        "type": "ui-notification",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "ui": "6c1d30b5f16932dd",
        "position": "top right",
        "colorDefault": true,
        "color": "#000000",
        "displayTime": "60",
        "showCountdown": true,
        "outputs": 1,
        "allowDismiss": true,
        "dismissText": "Close",
        "allowConfirm": false,
        "confirmText": "Confirm",
        "raw": false,
        "className": "",
        "name": "",
        "x": 690,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "c5dbb4558df77bc6",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "help tekst",
        "func": "msg.payload = \n\"<b>Je kan MP3 bestanden ook kopieren vanaf je PC.</b><br>\" +\n\"<br></b><br>\" +\n\"<b>In Windows Explorer typ in de adres balk: \\\\\\\\\" + msg.payload + \"\\\\sounds\" + \"</b><br>\" +\n\"<br></b><br>\" +\n\"<b>Log in als gebruiker 'user' met wachtwoord 'user'.</b><br>\";\nmsg.ui_update = {\n    raw: true,\n    position: \"top right\",\n    displayTime: 60,\n    allowDismiss: true,\n    color: \"green\",\n    showCountdown: true\n};\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 860,
        "wires": [
            [
                "c0dfb882e72c4bd7"
            ]
        ]
    },
    {
        "id": "25d743058464db66",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "name": "IP adres",
        "func": "msg.payload = msg.payload.split(/\\s+/)[0];\nnode.status({ text: msg.payload });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 800,
        "wires": [
            [
                "c5dbb4558df77bc6"
            ]
        ]
    },
    {
        "id": "746b7471fda81cac",
        "type": "exec",
        "z": "bf57a768b975c2e6",
        "g": "852f70d81ad10832",
        "command": "hostname -I  ",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "hostname -I  ",
        "x": 530,
        "y": 800,
        "wires": [
            [
                "25d743058464db66"
            ],
            [],
            []
        ]
    },
    {
        "id": "ad3cf096050d54e2",
        "type": "ui-switch",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "",
        "label": "Stop na JA/NEE",
        "group": "aae22fe947be766e",
        "order": 5,
        "width": "2",
        "height": "1",
        "passthru": false,
        "decouple": false,
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "className": "",
        "layout": "row-left",
        "clickableArea": "switch",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 680,
        "y": 400,
        "wires": [
            [
                "3fe4ddc223bcbaeb"
            ]
        ]
    },
    {
        "id": "3fe4ddc223bcbaeb",
        "type": "change",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "BluetoothAutoStop",
        "rules": [
            {
                "t": "set",
                "p": "BluetoothAutoStop",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "4653356d90a8a897",
        "type": "change",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "BluetoothAutoStop",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "BluetoothAutoStop",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 400,
        "wires": [
            [
                "27336a80e583f921"
            ]
        ]
    },
    {
        "id": "27336a80e583f921",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "false",
        "func": "if (msg.payload == null) {\n    msg.payload = false;\n    global.set(\"BluetoothAutoStop\", msg.payload);\n    node.status({ text: msg.payload });\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 400,
        "wires": [
            [
                "ad3cf096050d54e2"
            ]
        ]
    },
    {
        "id": "e1471d5c735bd6d3",
        "type": "mqtt in",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "",
        "topic": "StateChanged",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "0839f7b4c0cbb0a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 150,
        "y": 60,
        "wires": [
            [
                "d722b84b332a8bb8"
            ]
        ]
    },
    {
        "id": "d722b84b332a8bb8",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "AutoStop?",
        "func": "if (global.get(\"BluetoothAutoStop\") == \"false\") {\n    return null;\n}\n\nlet states = global.get(\"states\");\n\nswitch (global.get(\"currentState\")) {\n    case states.ISOK: \n    case states.ISNOTOK: \n    case states.ISOK_OVERTIJD: \n    case states.ISNOTOK_OVERTIJD: { \n            var tijd_nu = global.get(\"getTime\")();\n            node.status({text: tijd_nu + \" Stop sounds\"});\n            return msg;\n    }\n    default: {\n        return null;\n    }\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 60,
        "wires": [
            [
                "3410874898204686"
            ]
        ]
    },
    {
        "id": "7cb194b63eb56afd",
        "type": "function",
        "z": "bf57a768b975c2e6",
        "g": "3856d925f2c69025",
        "name": "default sound",
        "func": "msg.payload = global.get(\"BluetoothSound\");\n\nvar tijd_nu = global.get(\"getTime\")();\nnode.status({text: tijd_nu + \" \" + msg.payload});\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 220,
        "wires": [
            [
                "121eeb47240d2a87"
            ]
        ]
    }
]